var bn=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var L=class extends Uint8Array{currentIndex;constructor(e){super(e),this.currentIndex=0}};function ue(i){let e=i.reduce((n,s)=>n+s.length,0),t=new L(e),o=0;for(let n of i)t.set(n,o),o+=n.length;return t}function Lt(i){i=Math.floor(i);let e=Math.floor(i/60),t=Math.round(i-e*60);return{minutes:e,seconds:t,time:`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}}function ro(i){return i.trim().replaceAll(".mid","").replaceAll(".kar","").replaceAll(".rmi","").replaceAll("_"," ").trim()}function vn(i){let e=[];for(let t of i)(t===47||t===92)&&(t=10),e.push(t);return new Uint8Array(e)}var B={warn:"color: orange;",unrecognized:"color: red;",info:"color: aqua;",recognized:"color: lime",value:"color: yellow; background-color: black;"};var et=class{ticks;messageStatusByte;messageData;constructor(e,t,o){this.ticks=e,this.messageStatusByte=t,this.messageData=o}};var G={noteOff:128,noteOn:144,polyPressure:160,controllerChange:176,programChange:192,channelPressure:208,pitchBend:224,systemExclusive:240,timecode:241,songPosition:242,songSelect:243,tuneRequest:246,clock:248,start:250,continue:251,stop:252,activeSensing:254,reset:255,sequenceNumber:0,text:1,copyright:2,trackName:3,instrumentName:4,lyric:5,marker:6,cuePoint:7,programName:8,midiChannelPrefix:32,midiPort:33,endOfTrack:47,setTempo:81,smpteOffset:84,timeSignature:88,keySignature:89,sequenceSpecific:127};function xn(i){let e=i&240,t=i&15,o=-1,n=i;return e>=128&&e<=224&&(o=t,n=e),{status:n,channel:o}}var R={bankSelect:0,modulationWheel:1,breathController:2,footController:4,portamentoTime:5,dataEntryMsb:6,mainVolume:7,balance:8,pan:10,expressionController:11,effectControl1:12,effectControl2:13,generalPurposeController1:16,generalPurposeController2:17,generalPurposeController3:18,generalPurposeController4:19,lsbForControl0BankSelect:32,lsbForControl1ModulationWheel:33,lsbForControl2BreathController:34,lsbForControl4FootController:36,lsbForControl5PortamentoTime:37,lsbForControl6DataEntry:38,lsbForControl7MainVolume:39,lsbForControl8Balance:40,lsbForControl10Pan:42,lsbForControl11ExpressionController:43,lsbForControl12EffectControl1:44,lsbForControl13EffectControl2:45,sustainPedal:64,portamentoOnOff:65,sostenutoPedal:66,softPedal:67,legatoFootswitch:68,hold2Pedal:69,soundVariation:70,filterResonance:71,releaseTime:72,attackTime:73,brightness:74,soundController6:75,soundController7:76,soundController8:77,soundController9:78,soundController10:79,generalPurposeController5:80,generalPurposeController6:81,generalPurposeController7:82,generalPurposeController8:83,portamentoControl:84,reverbDepth:91,tremoloDepth:92,chorusDepth:93,detuneDepth:94,phaserDepth:95,dataIncrement:96,dataDecrement:97,NRPNLsb:98,NRPNMsb:99,RPNLsb:100,RPNMsb:101,allSoundOff:120,resetAllControllers:121,localControlOnOff:122,allNotesOff:123,omniModeOff:124,omniModeOn:125,monoModeOn:126,polyModeOn:127};var To=class{constructor(){this.events={noteoff:{},noteon:{},pitchwheel:{},controllerchange:{},programchange:{},channelpressure:{},polypressure:{},drumchange:{},stopall:{},newchannel:{},mutechannel:{},presetlistchange:{},allcontrollerreset:{},soundfonterror:{},synthdisplay:{}},this.timeDelay=0}addEvent(e,t,o){this.events[e][t]=o}removeEvent(e,t){delete this.events[e][t]}callEvent(e,t){this.events[e]&&(this.timeDelay>0?setTimeout(()=>{Object.values(this.events[e]).forEach(o=>{try{o(t)}catch(n){console.error(`Error while executing an event callback for ${e}:`,n)}})},this.timeDelay*1e3):Object.values(this.events[e]).forEach(o=>{try{o(t)}catch(n){console.error(`Error while executing an event callback for ${e}:`,n)}}))}};var tt={nodesAmount:4,defaultDelay:.03,delayVariation:.01,stereoDifference:.02,oscillatorFrequency:.2,oscillatorFrequencyVariation:.05,oscillatorGain:.003},ao=class{constructor(e,t=tt){let o=e.context;this.input=o.createChannelSplitter(2);let n=o.createChannelMerger(2),s=[],r=[],a=t.oscillatorFrequency,A=t.defaultDelay;for(let d=0;d<t.nodesAmount;d++)this.createChorusNode(a,A-t.stereoDifference,s,0,n,0,o,t),this.createChorusNode(a,A+t.stereoDifference,r,1,n,1,o,t),a+=t.oscillatorFrequencyVariation,A+=t.delayVariation;n.connect(e),this.merger=n,this.chorusLeft=s,this.chorusRight=r}delete(){this.input.disconnect(),delete this.input,this.merger.disconnect(),delete this.merger;for(let e of this.chorusLeft)e.delay.disconnect(),e.oscillator.disconnect(),e.oscillatorGain.disconnect(),delete e.delay,delete e.oscillatorGain,delete e.oscillatorGain;for(let e of this.chorusRight)e.delay.disconnect(),e.oscillator.disconnect(),e.oscillatorGain.disconnect(),delete e.delay,delete e.oscillatorGain,delete e.oscillatorGain}createChorusNode(e,t,o,n,s,r,a,A){let d=a.createOscillator();d.type="sine",d.frequency.value=e;let u=a.createGain();u.gain.value=A.oscillatorGain;let l=a.createDelay();l.delayTime.value=t,d.connect(u),u.connect(l.delayTime),d.start(a.currentTime),this.input.connect(l,n),l.connect(s,0,r),o.push({oscillator:d,oscillatorGain:u,delay:l})}};function Mn(i,e=void 0){let t=i.createConvolver();if(e)t.buffer=e;else{let o=new URL("impulse_response_2.flac",import.meta.url);fetch(o).then(async n=>{let s=await n.arrayBuffer();t.buffer=await i.decodeAudioData(s)})}return t}var ce={noteOff:0,noteOn:1,ccChange:2,programChange:3,channelPressure:4,polyPressure:5,killNote:6,ccReset:7,setChannelVibrato:8,soundFontManager:9,stopAll:10,killNotes:11,muteChannel:12,addNewChannel:13,customcCcChange:14,debugMessage:15,systemExclusive:16,setMasterParameter:17,setDrums:18,pitchWheel:19,transpose:20,highPerformanceMode:21,lockController:22,sequencerSpecific:23,requestSynthesizerSnapshot:24,setLogLevel:25,keyModifierManager:26,setEffectsGain:27,destroyWorklet:28},lo={mainVolume:0,masterPan:1,voicesCap:2,interpolationType:3},Fe=-1,Gt={channelProperties:0,eventCall:1,reportedCurrentTime:2,sequencerSpecific:3,synthesizerSnapshot:4,ready:5,soundfontError:6,identify:7};var ga=!1,da=!0,Gi=!1;function x(...i){ga&&console.info(...i)}function Z(...i){da&&console.warn(...i)}function Re(...i){Gi&&console.group(...i)}function fe(...i){Gi&&console.groupCollapsed(...i)}function j(){Gi&&console.groupEnd()}var Fn={chorusEnabled:!0,chorusConfig:tt,reverbEnabled:!0,reverbImpulseResponse:void 0,audioNodeCreators:void 0};var co={reloadSoundFont:0,addNewSoundFont:2,deleteSoundFont:3,rearrangeSoundFonts:4};var No=class{constructor(e){this.soundfontList=[{id:"main",bankOffset:0}],this._port=e.worklet.port,this.synth=e}_sendToWorklet(e,t){this._port.postMessage({messageType:ce.soundFontManager,messageData:[e,t]})}async addNewSoundFont(e,t,o=0){if(this.soundfontList.find(n=>n.id===t)!==void 0)throw new Error("Cannot overwrite the existing soundfont. Use soundfontManager.delete(id) instead.");this._sendToWorklet(co.addNewSoundFont,[e,t,o]),await new Promise(n=>this.synth.resolveWhenReady=n),this.soundfontList.push({id:t,bankOffset:o})}deleteSoundFont(e){if(this.soundfontList.length===0){Z("1 soundfont left. Aborting!");return}if(this.soundfontList.findIndex(t=>t.id===e)===-1){Z(`No soundfont with id of "${e}" found. Aborting!`);return}this._sendToWorklet(co.deleteSoundFont,e)}rearrangeSoundFonts(e){this._sendToWorklet(co.rearrangeSoundFonts,e),this.soundfontList.sort((t,o)=>e.indexOf(t.id)-e.indexOf(o.id))}async reloadManager(e){this._sendToWorklet(co.reloadSoundFont,e),await new Promise(t=>this.synth.resolveWhenReady=t)}};var Uo=class{velocity=-1;patch={bank:-1,program:-1};constructor(e=-1,t=-1,o=-1){this.velocity=e,this.patch={bank:t,program:o}}},qo={addMapping:0,deleteMapping:1,clearMappings:2};var _o=class{constructor(e){this.synth=e,this._keyModifiers=[]}_sendToWorklet(e,t){this.synth.post({messageType:ce.keyModifierManager,messageData:[e,t]})}addModifier(e,t,o){let n=o?.velocity??-1,s=o?.patch?.program??-1,r=o?.patch?.bank??-1,a=new Uo(n,r,s);this._keyModifiers[e]===void 0&&(this._keyModifiers[e]=[]),this._keyModifiers[e][t]=a,this._sendToWorklet(qo.addMapping,[e,t,a])}getModifier(e,t){return this._keyModifiers?.[e]?.[t]}deleteModifier(e,t){this._sendToWorklet(qo.deleteMapping,[e,t]),this._keyModifiers[e]?.[t]!==void 0&&(this._keyModifiers[e][t]=void 0)}clearModifiers(){this._sendToWorklet(qo.clearMappings,void 0),this._keyModifiers=[]}};var I={INVALID:-1,startAddrsOffset:0,endAddrOffset:1,startloopAddrsOffset:2,endloopAddrsOffset:3,startAddrsCoarseOffset:4,modLfoToPitch:5,vibLfoToPitch:6,modEnvToPitch:7,initialFilterFc:8,initialFilterQ:9,modLfoToFilterFc:10,modEnvToFilterFc:11,endAddrsCoarseOffset:12,modLfoToVolume:13,unused1:14,chorusEffectsSend:15,reverbEffectsSend:16,pan:17,unused2:18,unused3:19,unused4:20,delayModLFO:21,freqModLFO:22,delayVibLFO:23,freqVibLFO:24,delayModEnv:25,attackModEnv:26,holdModEnv:27,decayModEnv:28,sustainModEnv:29,releaseModEnv:30,keyNumToModEnvHold:31,keyNumToModEnvDecay:32,delayVolEnv:33,attackVolEnv:34,holdVolEnv:35,decayVolEnv:36,sustainVolEnv:37,releaseVolEnv:38,keyNumToVolEnvHold:39,keyNumToVolEnvDecay:40,instrument:41,reserved1:42,keyRange:43,velRange:44,startloopAddrsCoarseOffset:45,keyNum:46,velocity:47,initialAttenuation:48,reserved2:49,endloopAddrsCoarseOffset:50,coarseTune:51,fineTune:52,sampleID:53,sampleModes:54,reserved3:55,scaleTuning:56,exclusiveClass:57,overridingRootKey:58,unused5:59,endOper:60},W=[];W[I.startAddrsOffset]={min:0,max:32768,def:0};W[I.endAddrOffset]={min:-32768,max:32768,def:0};W[I.startloopAddrsOffset]={min:-32768,max:32768,def:0};W[I.endloopAddrsOffset]={min:-32768,max:32768,def:0};W[I.startAddrsCoarseOffset]={min:0,max:32768,def:0};W[I.modLfoToPitch]={min:-12e3,max:12e3,def:0};W[I.vibLfoToPitch]={min:-12e3,max:12e3,def:0};W[I.modEnvToPitch]={min:-12e3,max:12e3,def:0};W[I.initialFilterFc]={min:1500,max:13500,def:13500};W[I.initialFilterQ]={min:0,max:960,def:0};W[I.modLfoToFilterFc]={min:-12e3,max:12e3,def:0};W[I.modEnvToFilterFc]={min:-12e3,max:12e3,def:0};W[I.endAddrsCoarseOffset]={min:-32768,max:32768,def:0};W[I.modLfoToVolume]={min:-960,max:960,def:0};W[I.chorusEffectsSend]={min:0,max:1e3,def:0};W[I.reverbEffectsSend]={min:0,max:1e3,def:0};W[I.pan]={min:-500,max:500,def:0};W[I.delayModLFO]={min:-12e3,max:5e3,def:-12e3};W[I.freqModLFO]={min:-16e3,max:4500,def:0};W[I.delayVibLFO]={min:-12e3,max:5e3,def:-12e3};W[I.freqVibLFO]={min:-16e3,max:4500,def:0};W[I.delayModEnv]={min:-32768,max:5e3,def:-32768};W[I.attackModEnv]={min:-32768,max:8e3,def:-32768};W[I.holdModEnv]={min:-12e3,max:5e3,def:-12e3};W[I.decayModEnv]={min:-12e3,max:8e3,def:-12e3};W[I.sustainModEnv]={min:0,max:1e3,def:0};W[I.releaseModEnv]={min:-7200,max:8e3,def:-12e3};W[I.keyNumToModEnvHold]={min:-1200,max:1200,def:0};W[I.keyNumToModEnvDecay]={min:-1200,max:1200,def:0};W[I.delayVolEnv]={min:-12e3,max:5e3,def:-12e3};W[I.attackVolEnv]={min:-12e3,max:8e3,def:-12e3};W[I.holdVolEnv]={min:-12e3,max:5e3,def:-12e3};W[I.decayVolEnv]={min:-12e3,max:8e3,def:-12e3};W[I.sustainVolEnv]={min:0,max:1440,def:0};W[I.releaseVolEnv]={min:-7200,max:8e3,def:-12e3};W[I.keyNumToVolEnvHold]={min:-1200,max:1200,def:0};W[I.keyNumToVolEnvDecay]={min:-1200,max:1200,def:0};W[I.startloopAddrsCoarseOffset]={min:-32768,max:32768,def:0};W[I.keyNum]={min:-1,max:127,def:-1};W[I.velocity]={min:-1,max:127,def:-1};W[I.initialAttenuation]={min:-250,max:1440,def:0};W[I.endloopAddrsCoarseOffset]={min:-32768,max:32768,def:0};W[I.coarseTune]={min:-120,max:120,def:0};W[I.fineTune]={min:-12700,max:12700,def:0};W[I.scaleTuning]={min:0,max:1200,def:100};W[I.exclusiveClass]={min:0,max:99999,def:0};W[I.overridingRootKey]={min:-1,max:127,def:-1};W[I.sampleModes]={min:0,max:3,def:0};var q=class{generatorType=I.INVALID;generatorValue=0;constructor(e=I.INVALID,t=0,o=!0){if(this.generatorType=e,t===void 0)throw new Error("No value provided.");if(this.generatorValue=Math.round(t),o){let n=W[e];n!==void 0&&(this.generatorValue=Math.max(n.min,Math.min(n.max,this.generatorValue)))}}};var de={noController:0,noteOnVelocity:2,noteOnKeyNum:3,polyPressure:10,channelPressure:13,pitchWheel:14,pitchWheelRange:16,link:127},qe={linear:0,concave:1,convex:2,switch:3},X=class i{currentValue=0;constructor(e){this.sourceEnum=e.srcEnum,this.modulatorDestination=e.dest,this.secondarySourceEnum=e.secSrcEnum,this.transformAmount=e.amt,this.transformType=e.transform,this.modulatorDestination>58&&(this.modulatorDestination=I.INVALID),this.sourcePolarity=this.sourceEnum>>9&1,this.sourceDirection=this.sourceEnum>>8&1,this.sourceUsesCC=this.sourceEnum>>7&1,this.sourceIndex=this.sourceEnum&127,this.sourceCurveType=this.sourceEnum>>10&3,this.secSrcPolarity=this.secondarySourceEnum>>9&1,this.secSrcDirection=this.secondarySourceEnum>>8&1,this.secSrcUsesCC=this.secondarySourceEnum>>7&1,this.secSrcIndex=this.secondarySourceEnum&127,this.secSrcCurveType=this.secondarySourceEnum>>10&3,this.isEffectModulator=(this.sourceEnum===219||this.sourceEnum===221)&&this.secondarySourceEnum===0&&(this.modulatorDestination===I.reverbEffectsSend||this.modulatorDestination===I.chorusEffectsSend)}static copy(e){return new i({srcEnum:e.sourceEnum,secSrcEnum:e.secondarySourceEnum,transform:e.transformType,amt:e.transformAmount,dest:e.modulatorDestination})}static isIdentical(e,t,o=!1){return e.sourceEnum===t.sourceEnum&&e.modulatorDestination===t.modulatorDestination&&e.secondarySourceEnum===t.secondarySourceEnum&&e.transformType===t.transformType&&(!o||e.transformAmount===t.transformAmount)}sumTransform(e){return new i({srcEnum:this.sourceEnum,secSrcEnum:this.secondarySourceEnum,dest:this.modulatorDestination,transform:this.transformType,amt:this.transformAmount+e.transformAmount})}debugString(){function e(n,s){return Object.keys(n).find(r=>n[r]===s)}let t=e(qe,this.sourceCurveType);t+=this.sourcePolarity===0?" unipolar ":" bipolar ",t+=this.sourceDirection===0?"forwards ":"backwards ",this.sourceUsesCC?t+=e(R,this.sourceIndex):t+=e(de,this.sourceIndex);let o=e(qe,this.secSrcCurveType);return o+=this.secSrcPolarity===0?" unipolar ":" bipolar ",o+=this.secSrcCurveType===0?"forwards ":"backwards ",this.secSrcUsesCC?o+=e(R,this.secSrcIndex):o+=e(de,this.secSrcIndex),`Modulator:
        Source: ${t}
        Secondary source: ${o}
        Destination: ${e(I,this.modulatorDestination)}
        Trasform amount: ${this.transformAmount}
        Transform type: ${this.transformType}
        

`}},Ti=960,Ni=qe.concave;function je(i,e,t,o,n){return i<<10|e<<9|t<<8|o<<7|n}var ha=[new X({srcEnum:je(Ni,0,1,0,de.noteOnVelocity),dest:I.initialAttenuation,amt:Ti,secSrcEnum:0,transform:0}),new X({srcEnum:129,dest:I.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new X({srcEnum:je(Ni,0,1,1,R.mainVolume),dest:I.initialAttenuation,amt:Ti,secSrcEnum:0,transform:0}),new X({srcEnum:13,dest:I.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new X({srcEnum:526,dest:I.fineTune,amt:12700,secSrcEnum:16,transform:0}),new X({srcEnum:650,dest:I.pan,amt:500,secSrcEnum:0,transform:0}),new X({srcEnum:je(Ni,0,1,1,R.expressionController),dest:I.initialAttenuation,amt:Ti,secSrcEnum:0,transform:0}),new X({srcEnum:219,dest:I.reverbEffectsSend,amt:200,secSrcEnum:0,transform:0}),new X({srcEnum:221,dest:I.chorusEffectsSend,amt:200,secSrcEnum:0,transform:0})],Ia=[new X({srcEnum:je(qe.linear,0,0,0,de.polyPressure),dest:I.vibLfoToPitch,amt:50,secSrcEnum:0,transform:0}),new X({srcEnum:je(qe.linear,0,0,1,R.tremoloDepth),dest:I.modLfoToVolume,amt:24,secSrcEnum:0,transform:0}),new X({srcEnum:je(qe.convex,1,0,1,R.attackTime),dest:I.attackVolEnv,amt:6e3,secSrcEnum:0,transform:0}),new X({srcEnum:je(qe.linear,1,0,1,R.releaseTime),dest:I.releaseVolEnv,amt:3600,secSrcEnum:0,transform:0}),new X({srcEnum:je(qe.linear,1,0,1,R.brightness),dest:I.initialFilterFc,amt:6e3,secSrcEnum:0,transform:0}),new X({srcEnum:je(qe.linear,1,0,1,R.filterResonance),dest:I.initialFilterQ,amt:250,secSrcEnum:0,transform:0})],Ho=ha.concat(Ia);var Tt=128,ua=147,Rn=new Int16Array(ua).fill(0),Me=(i,e)=>Rn[i]=e<<7;Me(R.mainVolume,100);Me(R.balance,64);Me(R.expressionController,127);Me(R.pan,64);Me(R.portamentoOnOff,127);Me(R.filterResonance,64);Me(R.releaseTime,64);Me(R.attackTime,64);Me(R.brightness,64);Me(R.soundController6,64);Me(R.soundController7,64);Me(R.soundController8,64);Me(R.soundController9,64);Me(R.generalPurposeController6,64);Me(R.generalPurposeController8,64);Rn[R.portamentoControl]=1;Me(Tt+de.pitchWheel,64);Me(Tt+de.pitchWheelRange,2);var Po={channelTuning:0,channelTransposeFine:1,modulationMultiplier:2,masterTuning:3,channelTuningSemitones:4},ma=Object.keys(Po).length,pa=new Float32Array(ma);pa[Po.modulationMultiplier]=1;var Ln={velocityOverride:128};var Ca="spessasynth-worklet-system",Ui=350,Je=9,Ea=16;var Wt=class{constructor(e,t,o=!0,n=void 0,s=Fn){x("%cInitializing SpessaSynth synthesizer...",B.info),this.context=e.context,this.targetNode=e;let r=n?.oneOutput===!0;this.eventHandler=new To,this._voiceCap=Ui,this._destroyed=!1,this._outputsAmount=Ea,this.channelsAmount=this._outputsAmount,this.resolveWhenReady=void 0,this.isReady=new Promise(d=>this.resolveWhenReady=d),this.channelProperties=[];for(let d=0;d<this.channelsAmount;d++)this.addNewChannel(!1);this.channelProperties[Je].isDrum=!0,this._voicesAmount=0,this._highPerformanceMode=!1;let a=Array(this._outputsAmount+2).fill(2),A=this._outputsAmount+2;r&&(A=1,a=[32]),n?.snapshot?.effectsConfig!==void 0?(this.effectsConfig=n.snapshot.effectsConfig,delete n.snapshot.effectsConfig):this.effectsConfig=s;try{let d=s?.audioNodeCreators?.worklet;d||(d=(u,l,g)=>new AudioWorkletNode(u,l,g)),this.worklet=d(this.context,Ca,{outputChannelCount:a,numberOfOutputs:A,processorOptions:{midiChannels:this._outputsAmount,soundfont:t,enableEventSystem:o,startRenderingData:n}})}catch(d){throw console.error(d),new Error("Could not create the audioWorklet. Did you forget to addModule()?")}if(this.worklet.port.onmessage=d=>this.handleMessage(d.data),this.soundfontManager=new No(this),this.keyModifierManager=new _o(this),this._snapshotCallback=void 0,this.sequencerCallbackFunction=void 0,r)this.worklet.connect(e,0);else{let d=this.effectsConfig?.reverbEnabled??!0,u=this.effectsConfig?.chorusEnabled??!0;d&&(this.reverbProcessor=Mn(this.context,this.effectsConfig.reverbImpulseResponse),this.reverbProcessor.connect(e),this.worklet.connect(this.reverbProcessor,0)),u&&(this.chorusProcessor=new ao(e,this.effectsConfig.chorusConfig),this.worklet.connect(this.chorusProcessor.input,1));for(let l=2;l<this.channelsAmount+2;l++)this.worklet.connect(e,l)}this.eventHandler.addEvent("newchannel","synth-new-channel",()=>{this.channelsAmount++})}get voiceCap(){return this._voiceCap}set voiceCap(e){this._setMasterParam(lo.voicesCap,e),this._voiceCap=e}get highPerformanceMode(){return this._highPerformanceMode}set highPerformanceMode(e){this._highPerformanceMode=e,this.post({messageType:ce.highPerformanceMode,messageData:e})}get currentTime(){return this.context.currentTime}get voicesAmount(){return this._voicesAmount}setLogLevel(e,t,o,n){this.post({channelNumber:Fe,messageType:ce.setLogLevel,messageData:[e,t,o,n]})}_setMasterParam(e,t){this.post({channelNumber:Fe,messageType:ce.setMasterParameter,messageData:[e,t]})}setInterpolationType(e){this._setMasterParam(lo.interpolationType,e)}handleMessage(e){let t=e.messageData;switch(e.messageType){case Gt.channelProperties:this.channelProperties=t,this._voicesAmount=this.channelProperties.reduce((o,n)=>o+n.voicesAmount,0);break;case Gt.eventCall:this.eventHandler.callEvent(t.eventName,t.eventData);break;case Gt.sequencerSpecific:this.sequencerCallbackFunction&&this.sequencerCallbackFunction(t.messageType,t.messageData);break;case Gt.synthesizerSnapshot:this._snapshotCallback&&this._snapshotCallback(t);break;case Gt.ready:this.resolveWhenReady();break;case Gt.soundfontError:Z(new Error(t)),this.eventHandler.callEvent("soundfonterror",t);break}}async getSynthesizerSnapshot(){return new Promise(e=>{this._snapshotCallback=t=>{this._snapshotCallback=void 0,t.effectsConfig=this.effectsConfig,e(t)},this.post({messageType:ce.requestSynthesizerSnapshot,messageData:void 0,channelNumber:Fe})})}addNewChannel(e=!0){this.channelProperties.push({voicesAmount:0,pitchBend:0,pitchBendRangeSemitones:0,isMuted:!1,isDrum:!1}),e&&this.post({channelNumber:0,messageType:ce.addNewChannel,messageData:null})}setVibrato(e,t){this.post({channelNumber:e,messageType:ce.setChannelVibrato,messageData:t})}connectIndividualOutputs(e){if(e.length!==this._outputsAmount)throw new Error(`input nodes amount differs from the system's outputs amount!
            Expected ${this._outputsAmount} got ${e.length}`);for(let t=0;t<this._outputsAmount;t++)this.worklet.connect(e[t],t+2)}disableGSNRPparams(){this.setVibrato(Fe,{depth:0,rate:-1,delay:0})}debugMessage(){x(this),this.post({channelNumber:0,messageType:ce.debugMessage,messageData:void 0})}noteOn(e,t,o,n=!1){this.post({channelNumber:e,messageType:ce.noteOn,messageData:[t,o,n]})}noteOff(e,t,o=!1){o?this.post({channelNumber:e,messageType:ce.killNote,messageData:t}):this.post({channelNumber:e,messageType:ce.noteOff,messageData:t})}stopAll(e=!1){this.post({channelNumber:Fe,messageType:ce.stopAll,messageData:e?1:0})}controllerChange(e,t,o,n=!1){if(t>127||t<0)throw new Error(`Invalid controller number: ${t}`);o=Math.floor(o),t=Math.floor(t),this.post({channelNumber:e,messageType:ce.ccChange,messageData:[t,o,n]})}resetControllers(){this.post({channelNumber:Fe,messageType:ce.ccReset,messageData:void 0})}channelPressure(e,t){this.post({channelNumber:e,messageType:ce.channelPressure,messageData:t})}polyPressure(e,t,o){this.post({channelNumber:e,messageType:ce.polyPressure,messageData:[t,o]})}post(e){if(this._destroyed)throw new Error("This synthesizer instance has been destroyed!");this.worklet.port.postMessage(e)}pitchWheel(e,t,o){this.post({channelNumber:e,messageType:ce.pitchWheel,messageData:[t,o]})}transpose(e){this.transposeChannel(Fe,e,!1)}transposeChannel(e,t,o=!1){this.post({channelNumber:e,messageType:ce.transpose,messageData:[t,o]})}setMainVolume(e){this._setMasterParam(lo.mainVolume,e)}setMasterPan(e){this._setMasterParam(lo.masterPan,e)}setPitchBendRange(e,t){this.controllerChange(e,R.RPNMsb,0),this.controllerChange(e,R.dataEntryMsb,t),this.controllerChange(e,R.RPNMsb,127),this.controllerChange(e,R.RPNLsb,127),this.controllerChange(e,R.dataEntryMsb,0)}programChange(e,t,o=!1){this.post({channelNumber:e,messageType:ce.programChange,messageData:[t,o]})}velocityOverride(e,t){this.post({channelNumber:e,messageType:ce.ccChange,messageData:[Ln.velocityOverride,t,!0]})}lockController(e,t,o){this.post({channelNumber:e,messageType:ce.lockController,messageData:[t,o]})}muteChannel(e,t){this.post({channelNumber:e,messageType:ce.muteChannel,messageData:t})}async reloadSoundFont(e){Z("reloadSoundFont is deprecated. Please use the soundfontManager property instead."),await this.soundfontManager.reloadManager(e)}systemExclusive(e,t=0){this.post({channelNumber:Fe,messageType:ce.systemExclusive,messageData:[Array.from(e),t]})}tuneKeys(e,t){if(t.length>127)throw new Error("Too many tunings. Maximum allowed is 127.");let o=[127,16,8,2,e,t.length];for(let n of t)if(o.push(n.sourceKey),n.targetPitch===-1)o.push(127,127,127);else{let s=Math.floor(n.targetPitch),r=Math.floor((n.targetPitch-s)/61e-6);o.push(s,r>>7&127,r&127)}o.push(247),this.systemExclusive(o)}setDrums(e,t){this.post({channelNumber:e,messageType:ce.setDrums,messageData:t})}sendMessage(e,t=0){let o=xn(e[0]);switch(o.channel+=t,o.status){case G.noteOn:let n=e[2];n>0?this.noteOn(o.channel,e[1],n):this.noteOff(o.channel,e[1]);break;case G.noteOff:this.noteOff(o.channel,e[1]);break;case G.pitchBend:this.pitchWheel(o.channel,e[2],e[1]);break;case G.controllerChange:this.controllerChange(o.channel,e[1],e[2]);break;case G.programChange:this.programChange(o.channel,e[1]);break;case G.polyPressure:this.polyPressure(o.channel,e[0],e[1]);break;case G.channelPressure:this.channelPressure(o.channel,e[1]);break;case G.systemExclusive:this.systemExclusive(new L(e.slice(1)));break;case G.reset:this.stopAll(!0),this.resetControllers();break;default:break}}setReverbResponse(e){this.reverbProcessor.buffer=e,this.effectsConfig.reverbImpulseResponse=e}setChorusConfig(e){this.worklet.disconnect(this.chorusProcessor.input),this.chorusProcessor.delete(),delete this.chorusProcessor,this.chorusProcessor=new ao(this.targetNode,e),this.worklet.connect(this.chorusProcessor.input,1),this.effectsConfig.chorusConfig=e}setEffectsGain(e,t){this.post({messageType:ce.setEffectsGain,messageData:[e,t]})}destroy(){this.reverbProcessor.disconnect(),this.chorusProcessor.delete(),this.post({messageType:ce.destroyWorklet,messageData:void 0}),this.worklet.disconnect(),delete this.worklet,delete this.reverbProcessor,delete this.chorusProcessor,this._destroyed=!0}reverbateEverythingBecauseWhyNot(){for(let e=0;e<this.channelsAmount;e++)this.controllerChange(e,R.reverbDepth,127),this.lockController(e,R.reverbDepth,!0);return"That's the spirit!"}};function Ba(){let i=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i}var _e=Ba();function Gn(){let i=o=>{this.pressedKeys.delete(o),this.releaseNote(o,this.channel),this.synth.noteOff(this.channel,o)},e=(o,n)=>{let s;if(_e)s=127;else{let a=this.keys[0].getBoundingClientRect();if(this.keyboard.classList.contains("sideways")){let A=n.clientX-a.left,d=a.width;s=Math.floor((d-A)/d*127)}else{let A=n.clientY-a.top,d=a.height;s=Math.floor(A/d*127)}}this.onNotePressed&&this.onNotePressed(o,s),this.synth.noteOn(this.channel,o,s,this.enableDebugging)},t=o=>{let n=o.touches?Array.from(o.touches):[o],s=new Set;n.forEach(r=>{let a=document.elementFromPoint(r.clientX,r.clientY),A=parseInt(a.id.replace("note",""));s.add(A),!(isNaN(A)||A<0||this.pressedKeys.has(A))&&(this.pressedKeys.add(A),e(A,r))}),this.pressedKeys.forEach(r=>{s.has(r)||i(r)})};_e||(document.addEventListener("mousedown",o=>{this.mouseHeld=!0,t(o)}),document.addEventListener("mouseup",()=>{this.mouseHeld=!1,this.pressedKeys.forEach(o=>{i(o)})}),this.keyboard.onmousemove=o=>{this.mouseHeld&&t(o)},this.keyboard.onmouseleave=()=>{this.pressedKeys.forEach(o=>{i(o)})}),this.keyboard.ontouchstart=t.bind(this),this.keyboard.ontouchend=t.bind(this),this.keyboard.ontouchmove=t.bind(this)}var Tn=20,go=class{onNotePressed=void 0;constructor(e,t){this.mouseHeld=!1,this.pressedKeys=new Set,this.mode="light",this.enableDebugging=!1,this.sizeChangeAnimationId=-1,this.modeChangeAnimationId=-1,this._keyRange={min:0,max:127},this.synth=t,this.channel=0,this.channelColors=e,this._shown=!0,this._createKeyboard(),this.synth.eventHandler.addEvent("noteon","keyboard-note-on",o=>{this.pressNote(o.midiNote,o.channel,o.velocity)}),this.synth.eventHandler.addEvent("noteoff","keyboard-note-off",o=>{this.releaseNote(o.midiNote,o.channel)}),this.synth.eventHandler.addEvent("stopall","keyboard-stop-all",()=>{this.clearNotes()}),this.synth.eventHandler.addEvent("mutechannel","keyboard-mute-channel",o=>{if(o.isMuted)for(let n=0;n<128;n++)this.releaseNote(n,o.channel)})}get shown(){return this._shown}set shown(e){e===!0?this.keyboard.style.display="":this.keyboard.style.display="none",this._shown=e}get keyRange(){return this._keyRange}set keyRange(e){if(e.max===void 0||e.min===void 0)throw new TypeError("No min or max property!");if(e.min>e.max){let t=e.min;e.min=e.max,e.max=t}e.min=Math.max(0,e.min),e.max=Math.min(127,e.max),this.setKeyRange(e,!0)}setHoldPedal(e){e?(this.synth.controllerChange(this.channel,R.sustainPedal,127),this.keyboard.style.filter="brightness(0.5)"):(this.synth.controllerChange(this.channel,R.sustainPedal,0),this.keyboard.style.filter="")}_createKeyboard(){this.keyboard=document.getElementById("keyboard"),this.keyboard.innerHTML="",this.keys=[],this.keyColors=[];for(let e=this._keyRange.min;e<this._keyRange.max+1;e++){let t=this._createKey(e);this.keyColors.push([]),this.keyboard.appendChild(t),this.keys.push(t)}this._handlePointers(),this.mode==="dark"&&(this.mode="light",this.toggleMode(!1))}_createKey(e){function t(s){let r=s%12;return r===1||r===3||r===6||r===8||r===10}let o=document.createElement("div");if(o.classList.add("key"),o.id=`note${e}`,t(e))o.classList.add("sharp_key");else{o.classList.add("flat_key");let s=!1,r=!1;e>=0&&(s=t(e-1)),e<127&&(r=t(e+1)),r&&s?o.classList.add("between_sharps"):s?o.classList.add("left_sharp"):r&&o.classList.add("right_sharp")}return o}toggleMode(e=!0){if(this.mode==="light"?this.mode="dark":this.mode="light",!e){this.keys.forEach(o=>{o.classList.contains("flat_key")&&o.classList.toggle("flat_dark_key")});return}this.modeChangeAnimationId&&clearTimeout(this.modeChangeAnimationId),this.keyboard.classList.add("mode_transform"),document.body.scrollHeight<=window.innerHeight&&document.body.classList.add("no_scroll"),this.modeChangeAnimationId=setTimeout(()=>{this.keys.forEach(o=>{o.classList.contains("flat_key")&&o.classList.toggle("flat_dark_key")}),this.keyboard.classList.remove("mode_transform"),setTimeout(()=>document.body.classList.remove("no_scroll"),500)},500)}setKeyRange(e,t=!0){Math.abs(e.max-e.min)<12&&(e.min-=6,e.max=e.min+12);let n=900/(e.max-e.min+5),s=document.styleSheets[0].cssRules,r;for(let a of s)if(a.selectorText==="#keyboard .key"){r=a;break}if(r.style.setProperty("--pressed-transform-skew",`${8e-4/(n/7)}`),t){this.sizeChangeAnimationId&&clearTimeout(this.sizeChangeAnimationId);let a=getComputedStyle(this.keyboard),A=parseFloat(a.getPropertyValue("--current-min-height").replace(/[^\d.]+/g,"")),d=this.keyboard.getBoundingClientRect().height,u=n/A,l=d*u-d,g=(this._keyRange.min+this._keyRange.max)/2,h=(e.min+e.max)/2;this._keyRange=e;let C=this.keys.find(S=>S.classList.contains("sharp_key")).getBoundingClientRect().width,p=(g-h)*C,f=parseFloat(a.getPropertyValue("--key-border-radius").replace(/[^\d.]+/g,""));this.keyboard.style.marginTop=`${l}px`,this.keyboard.style.transition="",this.keyboard.style.transform=`scale(${u}) translateX(${p}px)`,this.keyboard.style.setProperty("--key-border-radius",`${f/u}vmin`),this.sizeChangeAnimationId=setTimeout(()=>{this.keyboard.style.setProperty("--current-min-height",`${n}`),this.keyboard.style.transition="none",this.keyboard.style.transform="",this.keyboard.style.marginTop="",this.keyboard.style.setProperty("--key-border-radius",""),this._createKeyboard(),setTimeout(()=>this.keyboard.style.transition="",75)},500)}else this.keyboard.style.setProperty("--current-min-height",`${n}`),this._keyRange=e,this._createKeyboard()}selectChannel(e){this.channel=e}pressNote(e,t,o){let n=this.keys[e-this._keyRange.min];if(n===void 0)return;n.classList.add("pressed");let s=n.classList.contains("sharp_key"),r=o/127,a=this.channelColors[t%16].match(/\d+(\.\d+)?/g).map(parseFloat),A;if(!s&&this.mode==="light"?A=`rgba(${a.slice(0,3).map(u=>255-(255-u)*r).join(", ")}, ${a[3]})`:A=`rgba(${a.slice(0,3).map(u=>u*r).join(", ")}, ${a[3]})`,n.style.background=A,this.mode==="dark"){let d=Tn*r;n.style.boxShadow=`${A} 0px 0px ${d}px ${d/5}px`}this.keyColors[e-this._keyRange.min].push(this.channelColors[t%16])}releaseNote(e,t){let o=e-this._keyRange.min,n=this.keys[o];if(n===void 0)return;t%=this.channelColors.length;let s=this.keyColors[o];if(!s)return;let r=this.channelColors[t];for(let A=0;A<s.length;A++)s[A]===r&&(s.splice(A,1),A--);let a=s[s.length-1]||"";n.style.background=a,this.mode==="dark"&&a!==""&&(n.style.boxShadow=`0px 0px ${Tn}px ${a}`),s.length<1&&(n.classList.remove("pressed"),n.style.background="",n.style.boxShadow="")}clearNotes(){this.keys.forEach((e,t)=>{e.classList.remove("pressed"),e.style.background="",e.style.boxShadow="",this.keyColors[t]=[]})}};go.prototype._handlePointers=Gn;function Nt(i,e){let t=i.replace(/[^\d,]/g,"").split(",");return`rgb(${e(parseInt(t[0]))}, ${e(parseInt(t[1]))}, ${e(parseInt(t[2]))})`}var fa="#000";function Nn(i,e,t){i.forEach(o=>{if(o.pressedProgress===0)return;e.fillStyle=o.color;let n=o.pressedProgress*o.velocity;if(e.globalAlpha=.5*n,t){e.fillRect(o.xPos,o.yPos-o.height*n,o.width,o.height*(n*2+1)),e.globalAlpha=1;return}e.fillRect(o.xPos-o.width*n,o.yPos,o.width*(n*2+1),o.height),e.globalAlpha=1}),i.forEach(o=>{e.fillStyle=o.color,e.save(),e.translate(o.xPos,o.yPos),e.fillRect(0,0,o.width,o.height),e.restore(),e.strokeStyle=fa,e.lineWidth=o.stroke,e.strokeRect(o.xPos,o.yPos,o.width,o.height)})}var qi=!1;function Un(i=!0,e=!1){let t=(this.seq===void 0||this?.seq?.paused===!0)&&this.synth.voicesAmount===0&&!e,o=!1;if(!this.renderBool||t)if(qi){i&&requestAnimationFrame(this.render.bind(this));return}else qi=!0,o=!0;else qi=!1;if(i&&this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderAnalysers&&!this.synth.highPerformanceMode&&this.renderWaveforms(o),this.renderNotes&&this.noteTimes){let r=this.computeNotePositions(this.synth.highPerformanceMode);this.synth.highPerformanceMode||Nn(r,this.drawingContext,this.sideways)}let n=performance.now()-this.frameTimeStart;this.frameTimeStart=performance.now();let s=1e3/n;this.drawingContext.textBaseline="hanging",this.drawingContext.textAlign="end",this.drawingContext.font=`${Zt}px monospace`,this.drawingContext.fillStyle="white",this.drawingContext.strokeStyle="white",this.drawingContext.fillText(Math.round(s).toString()+" FPS",this.canvas.width,Zt*2+5),this.drawingContext.fillText(this.version,this.canvas.width,5),this.drawingContext.fillText(`${this.notesOnScreen} notes`,this.canvas.width,Zt+5),this.noteTimes&&(this.drawingContext.textAlign="start",this.drawingContext.fillText(Math.round(this.seq.currentTempo*this.seq.playbackRate*100)/100+"BPM",0,5),this.drawingContext.fillText(this.currentTimeSignature,0,Zt+5)),this.showHoldPedal&&(this.drawingContext.font=`${Zt*3}px monospace`,this.drawingContext.textAlign="center",this.drawingContext.fillText(this.holdPedalIsDownText,this.canvas.width/2,this.canvas.height/4)),this.onRender&&this.onRender(),i&&requestAnimationFrame(this.render.bind(this))}function qn(i=!1){this.notesOnScreen=0;let e=this.sideways?this.canvas.height:this.canvas.width,t=this.sideways?this.canvas.width:this.canvas.height,o=this.keyRange.max-this.keyRange.min,n=e/(o+1),s=n-qt*2,r=this.noteFallingTimeMs/1e3,a=this.noteAfterTriggerTimeMs/1e3,A=this.seq.currentHighResolutionTime-this.timeOffset,d=A-a,u=r+a,l=d+u,g=Hn/u,h=[];this.synth.channelProperties.forEach(p=>{if(this.showVisualPitch){let f=p.pitchBend-8192+this.visualPitchBendOffset;h.push(p.pitchBendRangeSemitones*(f/8192*n))}else h.push(0)});let C=[];return this.noteTimes.forEach((p,f)=>{if(p.renderStartIndex>=p.notes.length||!this.renderChannels[f])return;let S=p.renderStartIndex,M=p.notes,y=M[S],k=-1;for(;y.start<=l&&(S++,!(this.notesOnScreen>Pn));){let w=y.start+y.length;if(w>d&&y.length>0){let c=y.length/u*t-qt*2;if(this.notesOnScreen<1e3||c>g){k===-1&&(k=S-1);let b=(y.start-d)/u*t,D;if(this._notesFall?D=t-c-b+qt:D=b+qt,y.midiNote<this.keyRange.min||y.midiNote>this.keyRange.max){if(S>=M.length)break;y=M[S];continue}let Y=y.midiNote-this.keyRange.min,K=n*Y+qt,U,J,ee,N;if(this.sideways?(U=D,J=K,N=s,ee=c):(J=D,U=K,ee=s,N=c),this.notesOnScreen++,i)this.drawingContext.fillStyle=this.plainColors[f],this.drawingContext.fillRect(U+Ut+qt,J+Ut,ee-Ut*2,N-Ut*2);else{let H;if(y.start>A||w<A)this.sideways?this.drawActiveNotes?H=this.sidewaysDarkerColors[f]:H=this.sidewaysChannelColors[f]:this.drawActiveNotes?H=this.darkerColors[f]:H=this.channelColors[f],C.push({xPos:U,yPos:J,height:N,width:ee,stroke:Ut,pressedProgress:0,velocity:y.velocity,color:H});else{this.sideways?(this.showVisualPitch&&(J+=h[f]),H=this.sidewaysChannelColors[f]):(this.showVisualPitch&&(U+=h[f]),H=this.channelColors[f]);let ne;this.drawActiveNotes?ne=1+(y.start-A)/(y.length*_n):ne=0,C.push({xPos:U,yPos:J,height:N,width:ee,stroke:Ut,pressedProgress:ne,velocity:y.velocity,color:H})}}}}if(S>=M.length)break;y=M[S]}k>-1&&(p.renderStartIndex=k)}),C.sort((p,f)=>f.height-p.height),C}function On(i=!1){let e=this.canvas.width/4,t=this.canvas.height/4;this.channelAnalysers.forEach((o,n)=>{let s=n%4,r=Math.floor(n/4),a=()=>{let h=this.canvas.width/4,C=this.canvas.height/4,p=h*s,f=C*r+C/2;this.drawingContext.lineWidth=this.lineThickness,this.drawingContext.strokeStyle=this.channelColors[n],this.drawingContext.beginPath(),this.drawingContext.moveTo(p,f),this.drawingContext.lineTo(p+h,f),this.drawingContext.stroke()};if(i){a();return}let A=new Float32Array(o.frequencyBinCount);if(o.getFloatTimeDomainData(A),!A.some(h=>h!==0)){a();return}let u=e*s,l=t*r+t/2,g=this.waveMultiplier*t;if(this.drawingContext.lineWidth=this.lineThickness,this.drawingContext.strokeStyle=this.channelColors[n],this.drawingContext.beginPath(),this._stabilizeWaveforms){let h=A.length/4,C=e/h,p=Math.floor(h/2),f=A.length-p;for(let k=f;k>=1;k--)if(A[k-1]<0&&A[k]>=0){f=k;break}let S=u,M=f-p,y=f+p;for(let k=M;k<y;k++)this.drawingContext.lineTo(S,l+A[k]*g),S+=C}else{let h=e/A.length,C=u;for(let p=0;p<A.length;p++)this.drawingContext.lineTo(C,l+A[p]*g),C+=h}this.drawingContext.stroke(),n++})}function Jn(i){for(let e of this.channelAnalysers)e.disconnect(),this.channelAnalysers.splice(0,1);this.channelAnalysers=[];for(let e=0;e<i.channelsAmount;e++){let t=new AnalyserNode(i.context,{fftSize:this._normalAnalyserFft,smoothingTimeConstant:.4});this.channelAnalysers.push(t)}i.eventHandler.addEvent("mutechannel","renderer-mute-channel",e=>{this.renderChannels[e.channel]=!e.isMuted}),this.updateFftSize()}function zn(){for(let i=0;i<this.channelAnalysers.length;i++){let e=this.synth.channelProperties[i].isDrum,t=e?this._drumAnalyserFft:this._normalAnalyserFft,o=e?4/2:4;this.channelAnalysers[i].fftSize=Math.min(32768,this._stabilizeWaveforms?t*o:t)}}function Vn(i){i.connectIndividualOutputs(this.channelAnalysers),i.eventHandler.addEvent("drumchange","renderer-drum-change",()=>{setTimeout(this.updateFftSize.bind(this),100)})}function Kn(){for(let i of this.channelAnalysers)i.disconnect();x("%cAnalysers disconnected!",B.recognized)}function Wn(i){this.seq=i,this.seq.addOnTimeChangeEvent(()=>this.resetIndexes(),"renderer-time-change"),this.seq.addOnSongChangeEvent(async e=>{if(this.calculateNoteTimes(await this.seq.getMIDI()),this.resetIndexes(),e.RMIDInfo?.IPIC!==void 0){let t=new Blob([e.RMIDInfo?.IPIC.buffer]),o=URL.createObjectURL(t),n=this.canvas.classList.contains("light_mode")?0:.9;this.canvas.style.background=`linear-gradient(rgba(0, 0, 0, ${n}), rgba(0, 0, 0, ${n})), center center / cover url("${o}")`}else this.canvas.style.background=""},"renderer-song-change"),this.seq.addOnMetaEvent(e=>{let[t,o]=e;t===G.timeSignature&&(this.currentTimeSignature=`${o[0]}/${Math.pow(2,o[1])}`)},"renderer-meta-event")}function Zn(){this.noteTimes&&this.noteTimes.forEach(i=>i.renderStartIndex=0)}function _t(i,e){let t=0;for(let o=8*(e-1);o>=0;o-=8)t|=i[i.currentIndex++]<<o;return t>>>0}function ho(i,e){let t=new Array(e).fill(0);for(let o=e-1;o>=0;o--)t[o]=i&255,i>>=8;return t}var Oo=.02;function jn(i){function e(l){return l.messageData=new L(l.messageData.buffer),l.messageData.currentIndex=0,6e7/_t(l.messageData,3)}let t=[],n=i.tracks.flat();n.sort((l,g)=>l.ticks-g.ticks);for(let l=0;l<16;l++)t.push({renderStartIndex:0,notes:[]});let s=0,r=60/(120*i.timeDivision),a=0,A=0,d=[];for(let l=0;l<16;l++)d.push([]);let u=(l,g)=>{let h=d[g].findIndex(p=>p.midiNote===l),C=d[g][h];if(C){let p=s-C.start;C.length=p<Oo&&g===Je?Oo:p,d[g].splice(h,1)}A--};for(;a<n.length;){let l=n[a],g=l.messageStatusByte>>4,h=l.messageStatusByte&15;if(g===8)u(l.messageData[0],h);else if(g===9)if(l.messageData[1]===0)u(l.messageData[0],h);else{u(l.messageData[0],h);let C={midiNote:l.messageData[0],start:s,length:-1,velocity:l.messageData[1]/127};t[h].notes.push(C),d[h].push(C),A++}else l.messageStatusByte===81&&(r=60/(e(l)*i.timeDivision));if(++a>=n.length)break;s+=r*(n[a].ticks-l.ticks)}A>0&&d.forEach((l,g)=>{l.forEach(h=>{let C=s-h.start;h.length=C<Oo&&g===Je?Oo:C})}),this.noteTimes=t,x("%cFinished loading note times and ready to render the sequence!",B.info)}var Qa=1024,ya=4096,Sa=2,wa=2,Yo=.6,Jo=.5,Ut=1,qt=1,Zt=12,_n=.6,Hn=2,Pn=81572,He=class{onRender;constructor(e,t,o,n,s=""){this.noteFallingTimeMs=1e3,this.noteAfterTriggerTimeMs=0,this._keyRange={min:0,max:127},this.version="v"+s,this.visualPitchBendOffset=0,this.lineThickness=wa,this._normalAnalyserFft=Qa,this._drumAnalyserFft=ya,this.waveMultiplier=Sa,this.holdPedalIsDownText="",n.bindObjectProperty(this,"holdPedalIsDownText","locale.synthesizerController.holdPedalDown"),this.showHoldPedal=!1,this._notesFall=!0,this.sideways=!1,this.currentTimeSignature="4/4",this._renderBool=!0,this.renderAnalysers=!0,this.renderNotes=!0,this.drawActiveNotes=!0,this.showVisualPitch=!0,this._stabilizeWaveforms=!0,this.renderChannels=Array(16).fill(!0),this.canvas=o,this.drawingContext=this.canvas.getContext("2d"),this.plainColors=e,this.computeColors(),this.synth=t,this.notesOnScreen=0,this.timeOffset=0,this.channelAnalysers=[],this.createChannelAnalysers(t),this.connectChannelAnalysers(t)}get stabilizeWaveforms(){return this._stabilizeWaveforms}set stabilizeWaveforms(e){this._stabilizeWaveforms=e,this.updateFftSize()}get direction(){return this._notesFall?"down":"up"}set direction(e){this._notesFall=e==="down"}get normalAnalyserFft(){return this._normalAnalyserFft}set normalAnalyserFft(e){this._normalAnalyserFft=e,this.updateFftSize()}get drumAnalyserFft(){return this._drumAnalyserFft}set drumAnalyserFft(e){this._drumAnalyserFft=e,this.updateFftSize()}get renderBool(){return this._renderBool}set renderBool(e){this._renderBool=e,e===!0?this.connectChannelAnalysers(this.synth):this.disconnectChannelAnalysers()}get keyRange(){return this._keyRange}set keyRange(e){if(e.max===void 0||e.min===void 0)throw new TypeError("No min or max property!");if(e.min>e.max){let t=e.min;e.min=e.max,e.max=t}e.min=Math.max(0,e.min),e.max=Math.min(127,e.max),this._keyRange=e}toggleDarkMode(){this.canvas.classList.toggle("light_mode")}computeColors(){this.channelColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,this.canvas.width/128,0);return t.addColorStop(0,Nt(e,o=>o*Jo)),t.addColorStop(1,e),t}),this.darkerColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,this.canvas.width/128,0);return t.addColorStop(0,Nt(e,o=>o*Jo*Yo)),t.addColorStop(1,Nt(e,o=>o*Yo)),t}),this.sidewaysChannelColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,0,this.canvas.width/128);return t.addColorStop(0,Nt(e,o=>o*Jo)),t.addColorStop(1,e),t}),this.sidewaysDarkerColors=this.plainColors.map(e=>{let t=this.drawingContext.createLinearGradient(0,0,0,this.canvas.width/128);return t.addColorStop(0,Nt(e,o=>o*Jo*Yo)),t.addColorStop(1,Nt(e,o=>o*Yo)),t})}};He.prototype.render=Un;He.prototype.computeNotePositions=qn;He.prototype.createChannelAnalysers=Jn;He.prototype.updateFftSize=zn;He.prototype.connectChannelAnalysers=Vn;He.prototype.disconnectChannelAnalysers=Kn;He.prototype.connectSequencer=Wn;He.prototype.calculateNoteTimes=jn;He.prototype.resetIndexes=Zn;He.prototype.renderWaveforms=On;function T(i,e){let t=0;for(let o=0;o<e;o++)t|=i[i.currentIndex++]<<o*8;return t>>>0}function xe(i,e,t){for(let o=0;o<t;o++)i[i.currentIndex++]=e>>o*8&255}function _(i,e){i[i.currentIndex++]=e&255,i[i.currentIndex++]=e>>8}function $(i,e){xe(i,e,4)}function Ct(i,e){let t=e<<8|i;return t>32767?t-65536:t}function Xn(i){return i>127?i-256:i}function ae(i,e,t=void 0,o=!0){if(t){let n=i.slice(i.currentIndex,i.currentIndex+e);return i.currentIndex+=e,new TextDecoder(t.replace(/[^\x20-\x7E]/g,"")).decode(n.buffer)}else{let n=!1,s="";for(let r=0;r<e;r++){let a=i[i.currentIndex++];if(!n){if((a<32||a>127)&&a!==10){if(o){n=!0;continue}else if(a===0){n=!0;continue}}s+=String.fromCharCode(a)}}return s}}function Et(i,e=0){let t=i.length;e>0&&(t=e);let o=new L(t);return Se(o,i,e),o}function at(i){return Et(i,i.length+1)}function Se(i,e,t=0){t>0&&e.length>t&&(e=e.slice(0,t));for(let o=0;o<e.length;o++)i[i.currentIndex++]=e.charCodeAt(o);if(t>e.length)for(let o=0;o<t-e.length;o++)i[i.currentIndex++]=0;return i}var ge=class{constructor(e,t,o){this.header=e,this.size=t,this.chunkData=o}};function Ae(i,e=!0,t=!1){let o=ae(i,4),n=T(i,4),s;return e&&(s=new L(i.buffer.slice(i.currentIndex,i.currentIndex+n))),(e||t)&&(i.currentIndex+=n),n%2!==0&&i[i.currentIndex]===0&&i.currentIndex++,new ge(o,n,s)}function Ie(i,e=void 0){let t=8+i.size;i.size%2!==0&&t++,e&&(t+=e.length);let o=new L(t);return e&&(o.set(e,o.currentIndex),o.currentIndex+=e.length),Se(o,i.header),$(o,t-8-(e?.length||0)),o.set(i.chunkData,o.currentIndex),o}function z(i,e,t=!1,o=!1){if(t){let d=new Uint8Array(e.length+1);d.set(e),e=d}let n=8,s=n+e.length,r=e.length;s%2!==0&&s++;let a=i;o&&(s+=4,r+=4,n+=4,a="LIST");let A=new L(s);return Se(A,a),$(A,r),o&&Se(A,i),A.set(e,n),A}function Pe(i,e){return i.find(t=>t.header!=="LIST"?!1:(t.chunkData.currentIndex=0,ae(t.chunkData,4)===e))}function zo(i){let e=[i&127];for(i>>=7;i>0;)e.unshift(i&127|128),i>>=7;return e}function Vo(i){if(!i.tracks)throw new Error("MIDI has no tracks!");let e=[];for(let n of i.tracks){let s=[],r=0,a;for(let A of n){let d=A.ticks-r,u;A.messageStatusByte<=G.keySignature||A.messageStatusByte===G.sequenceSpecific?u=[255,A.messageStatusByte,...zo(A.messageData.length),...A.messageData]:A.messageStatusByte===G.systemExclusive?u=[240,...zo(A.messageData.length),...A.messageData]:(u=[],a!==A.messageStatusByte&&(a=A.messageStatusByte,u.push(A.messageStatusByte)),u.push(...A.messageData)),s.push(...zo(d)),s.push(...u),r+=d}e.push(new Uint8Array(s))}function t(n,s){for(let r=0;r<n.length;r++)s.push(n.charCodeAt(r))}let o=[];t("MThd",o),o.push(...ho(6,4)),o.push(0,i.format),o.push(...ho(i.tracksAmount,2)),o.push(...ho(i.timeDivision,2));for(let n of e)t("MTrk",o),o.push(...ho(n.length,4)),o.push(...n);return new Uint8Array(o)}function _i(i){return new et(i,G.systemExclusive,new L([65,16,66,18,64,0,127,0,65,247]))}function Ht(i,e,t,o){return new et(o,G.controllerChange|i%16,new L([e,t]))}function Da(i,e){let t=16|[1,2,3,4,5,6,7,8,0,9,10,11,12,13,14,15][i%16],o=[65,16,66,18,64,t,21,1],s=128-(64+t+21+1)%128;return new et(e,G.systemExclusive,new L([...o,s,247]))}function ka(i,e=[],t=[],o=[],n=[]){fe("%cApplying changes to the MIDI file...",B.info);let s=new Set;e.forEach(y=>{s.add(y.channel)});let r="gs",a=!1,A=Array(i.tracks.length).fill(0),d=i.tracks.length;function u(){let y=0,k=1/0;return i.tracks.forEach((w,c)=>{A[c]>=w.length||w[A[c]].ticks<k&&(y=c,k=w[A[c]].ticks)}),y}let l=i.midiPorts.slice(),g={},h=0;function C(y,k){i.usedChannelsOnTrack[y].size!==0&&(h===0&&(h+=16,g[k]=0),g[k]===void 0&&(g[k]=h,h+=16),l[y]=k)}i.midiPorts.forEach((y,k)=>{C(k,y)});let p=h,f=Array(p).fill(!0),S=Array(p).fill(0),M=Array(p).fill(0);for(n.forEach(y=>{let k=Math.trunc(y.keyShift),w=y.keyShift-k;S[y.channel]=k,M[y.channel]=w});d>0;){let y=u(),k=i.tracks[y];if(A[y]>=k.length){d--;continue}let w=A[y]++,c=k[w],b=()=>{k.splice(w,1),A[y]--},D=(ee,N=0)=>{k.splice(w+N,0,ee),A[y]++},Y=g[l[y]]||0;if(c.messageStatusByte===G.midiPort){C(y,c.messageData[0]);continue}if(c.messageStatusByte<=G.sequenceSpecific&&c.messageStatusByte>=G.sequenceNumber)continue;let K=c.messageStatusByte&240,U=c.messageStatusByte&15,J=U+Y;if(o.indexOf(J)!==-1){b();continue}switch(K){case G.noteOn:if(f[J]){f[J]=!1,t.filter(ne=>ne.channel===J).forEach(ne=>{let we=Ht(U,ne.controllerNumber,ne.controllerValue,c.ticks);D(we)});let H=M[J];if(H!==0){let ne=H*64+64,we=Ht(U,R.RPNMsb,0,c.ticks),Ce=Ht(U,R.RPNLsb,1,c.ticks),nt=Ht(J,R.dataEntryMsb,ne,c.ticks),Ne=Ht(U,R.lsbForControl6DataEntry,0,c.ticks);D(Ne),D(nt),D(Ce),D(we)}if(s.has(J)){let ne=e.find(st=>st.channel===J),we=ne.bank,Ce=ne.program;x(`%cSetting %c${ne.channel}%c to %c${we}:${Ce}%c. Track num: %c${y}`,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized);let nt=new et(c.ticks,G.programChange|U,new L([Ce]));if(D(nt),!ne.isDrum&&r==="xg"){let st=Ht(U,R.lsbForControl0BankSelect,we,c.ticks);D(st)}let Ne=Ht(U,R.bankSelect,we,c.ticks);D(Ne),ne.isDrum&&(r==="gs"&&U!==Je?(x(`%cAdding GS Drum change on track %c${y}`,B.recognized,B.value),D(Da(U,c.ticks))):r==="xg"&&(x(`%cAdding XG Drum change on track %c${y}`,B.recognized,B.value),we=127))}}c.messageData[0]+=S[J];break;case G.noteOff:c.messageData[0]+=S[J];break;case G.programChange:if(s.has(J)){b();continue}break;case G.controllerChange:let ee=c.messageData[0];if(t.find(H=>H.channel===J&&ee===H.controllerNumber)!==void 0){b();continue}if((ee===R.bankSelect||ee===R.lsbForControl0BankSelect)&&s.has(J)){b();continue}break;case G.systemExclusive:if(c.messageData[0]===67&&c.messageData[2]===76&&c.messageData[5]===126&&c.messageData[6]===0)x("%cXG system on detected",B.info),r="xg",a=!0;else if(c.messageData[0]===67&&c.messageData[2]===76&&c.messageData[3]===8&&c.messageData[5]===3)s.has(c.messageData[4]+Y)&&b();else if(c.messageData[0]===65&&c.messageData[2]===66&&c.messageData[6]===127){a=!0,x("%cGS on detected!",B.recognized);break}else c.messageData[0]===126&&c.messageData[2]===9&&(x("%cGM/2 on detected, removing!",B.info),b(),a=!1)}}if(!a){let y=0;i.tracks[0][0].messageStatusByte===G.trackName&&y++,i.tracks[0].splice(y,0,_i(0)),x("%cGS on not detected. Adding it.",B.info)}j()}function Bt(i,e){let t=[],o=[],n=[],s=[];e.channelSnapshots.forEach((r,a)=>{if(r.isMuted){o.push(a);return}let A=r.channelTransposeKeyShift+r.customControllers[Po.channelTransposeFine]/100;A!==0&&t.push({channel:a,keyShift:A}),r.lockPreset&&n.push({channel:a,program:r.program,bank:r.bank,isDrum:r.drumChannel}),r.lockedControllers.forEach((d,u)=>{if(!d||u>127||u===R.bankSelect)return;let l=r.midiControllers[u]>>7;s.push({channel:a,controllerNumber:u,controllerValue:l})})}),ka(i,n,s,o,t)}var ye={name:"INAM",album:"IPRD",album2:"IALB",artist:"IART",genre:"IGNR",picture:"IPIC",copyright:"ICOP",creationDate:"ICRD",comment:"ICMT",engineer:"IENG",software:"ISFT",encoding:"IENC",midiEncoding:"MENC",bankOffset:"DBNK"},ft="utf-8",ba="Created using SpessaSynth";function Ko(i,e,t,o=0,n="Shift_JIS",s={},r=!0){if(Re("%cWriting the RMIDI File...",B.info),x(`%cConfiguration: Bank offset: %c${o}%c, encoding: %c${n}`,B.info,B.value,B.info,B.value),x("metadata",s),x("Initial bank offset",e.bankOffset),r){let S=function(){let w=0,c=1/0;return e.tracks.forEach((b,D)=>{p[D]>=b.length||b[p[D]].ticks<c&&(w=D,c=b[p[D]].ticks)}),w},h="gm",C=[],p=Array(e.tracks.length).fill(0),f=e.tracks.length,M=Array(e.tracks.length).fill(0),y=16+e.midiPortChannelOffsets.reduce((w,c)=>c>w?c:w),k=[];for(let w=0;w<y;w++)k.push({program:0,drums:w%16===Je,lastBank:void 0,hasBankSelect:!1});for(;f>0;){let w=S(),c=e.tracks[w];if(p[w]>=c.length){f--;continue}let b=c[p[w]];p[w]++;let D=e.midiPortChannelOffsets[M[w]];if(b.messageStatusByte===G.midiPort){M[w]=b.messageData[0];continue}let Y=b.messageStatusByte&240;if(Y!==G.controllerChange&&Y!==G.programChange&&Y!==G.systemExclusive)continue;if(Y===G.systemExclusive){if(b.messageData[0]!==65||b.messageData[2]!==66||b.messageData[3]!==18||b.messageData[4]!==64||(b.messageData[5]&16)===0||b.messageData[6]!==21){b.messageData[0]===67&&b.messageData[2]===76&&b.messageData[5]===126&&b.messageData[6]===0?h="xg":b.messageData[0]===65&&b.messageData[2]===66&&b.messageData[6]===127?h="gs":b.messageData[0]===126&&b.messageData[2]===9&&(h="gm",C.push({tNum:w,e:b}));continue}let J=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][b.messageData[5]&15]+D;k[J].drums=!!(b.messageData[7]>0&&b.messageData[5]>>4);continue}let K=(b.messageStatusByte&15)+D,U=k[K];if(Y===G.programChange){U.drums?t.presets.findIndex(N=>N.program===b.messageData[0]&&N.bank===128)===-1&&(b.messageData[0]=t.presets.find(N=>N.bank===128)?.program||0):t.presets.findIndex(N=>N.program===b.messageData[0]&&N.bank!==128)===-1&&(b.messageData[0]=t.presets.find(N=>N.bank!==128)?.program||0),U.program=b.messageData[0];let J=Math.max(0,U.lastBank?.messageData[1]-e.bankOffset),ee=U.drums?128:J;if(U.lastBank===void 0)continue;if(h==="xg"&&U.drums&&(k[K].lastBank.messageData[1]=127),t.presets.findIndex(N=>N.bank===ee&&N.program===b.messageData[0])===-1){let N=t.presets.find(H=>H.program===b.messageData[0])?.bank+o||o;U.lastBank.messageData[1]=N,x(`%cNo preset %c${ee}:${b.messageData[0]}%c. Changing bank to ${N}.`,B.info,B.recognized,B.info)}else{let H=(ee===128?h==="xg"?127:0:J)+o;U.lastBank.messageData[1]=H,x(`%cPreset %c${ee}:${b.messageData[0]}%c exists. Changing bank to ${H}.`,B.info,B.recognized,B.info)}continue}b.messageData[0]===R.bankSelect&&(U.hasBankSelect=!0,h==="xg"&&(U.drums=b.messageData[1]===120||b.messageData[1]===126||b.messageData[1]===127),U.lastBank=b)}if(k.forEach((w,c)=>{if(w.hasBankSelect===!0)return;let b=c%16,D=G.programChange|b,Y=Math.floor(c/16)*16,K=e.midiPortChannelOffsets.indexOf(Y),U=e.tracks.find((H,ne)=>e.midiPorts[ne]===K&&e.usedChannelsOnTrack[ne].has(b));if(U===void 0)return;let J=U.findIndex(H=>H.messageStatusByte===D);if(J===-1){let H=U.findIndex(Ce=>Ce.messageStatusByte>128&&Ce.messageStatusByte<240&&(Ce.messageStatusByte&15)===b);if(H===-1)return;let ne=U[H].ticks,we=t.getPreset(0,0).program;U.splice(H,0,new et(ne,G.programChange|b,new L([we]))),J=H}x(`%cAdding bank select for %c${c}`,B.info,B.recognized);let ee=U[J].ticks,N=t.getPreset(0,w.program)?.bank+o||o;U.splice(J,0,new et(ee,G.controllerChange|b,new L([R.bankSelect,N])))}),h!=="gs"&&h!=="xg"){for(let c of C)e.tracks[c.tNum].splice(e.tracks[c.tNum].indexOf(c.e),1);let w=0;e.tracks[0][0].messageStatusByte===G.trackName&&w++,e.tracks[0].splice(w,0,_i(0))}}let a=new L(Vo(e).buffer),A=[Et("INFO")],d=new TextEncoder;if(A.push(z(ye.software,d.encode("SpessaSynth"),!0)),s.name!==void 0?(A.push(z(ye.name,d.encode(s.name),!0)),n=ft):A.push(z(ye.name,e.rawMidiName,!0)),s.creationDate!==void 0)n=ft,A.push(z(ye.creationDate,d.encode(s.creationDate),!0));else{let h=new Date().toLocaleString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});A.push(z(ye.creationDate,at(h),!0))}if(s.comment!==void 0&&(n=ft,A.push(z(ye.comment,d.encode(s.comment)))),s.engineer!==void 0&&A.push(z(ye.engineer,d.encode(s.engineer),!0)),s.album!==void 0&&(n=ft,A.push(z(ye.album,d.encode(s.album),!0)),A.push(z(ye.album2,d.encode(s.album),!0))),s.artist!==void 0&&(n=ft,A.push(z(ye.artist,d.encode(s.artist),!0))),s.genre!==void 0&&(n=ft,A.push(z(ye.genre,d.encode(s.genre),!0))),s.picture!==void 0&&A.push(z(ye.picture,new Uint8Array(s.picture))),s.copyright!==void 0)n=ft,A.push(z(ye.copyright,d.encode(s.copyright),!0));else{let h=e.copyright.length>0?e.copyright:ba;A.push(z(ye.copyright,at(h)))}let u=new L(2);xe(u,o,2),A.push(z(ye.bankOffset,u)),s.midiEncoding!==void 0&&(A.push(z(ye.midiEncoding,d.encode(s.midiEncoding))),n=ft),A.push(z(ye.encoding,at(n)));let l=ue(A),g=ue([Et("RMID"),z("data",a),z("LIST",l),i]);return x("%cFinished!",B.info),j(),z("RIFF",g)}var Io=class{timeDivision=0;duration=0;tempoChanges=[{ticks:0,tempo:120}];copyright="";tracksAmount=0;lyrics=[];lyricsTicks=[];firstNoteOn=0;keyRange={min:0,max:127};lastVoiceEventTick=0;midiPorts=[0];midiPortChannelOffsets=[0];usedChannelsOnTrack=[];loop={start:0,end:0};midiName="";midiNameUsesFileName=!1;fileName="";rawMidiName=void 0;format=0;RMIDInfo={};bankOffset=0;isKaraokeFile=!1};var uo=class i extends Io{embeddedSoundFont=void 0;tracks=[];isDLSRMIDI=!1;static copyFrom(e){let t=new i;return t.midiName=e.midiName,t.midiNameUsesFileName=e.midiNameUsesFileName,t.fileName=e.fileName,t.timeDivision=e.timeDivision,t.duration=e.duration,t.copyright=e.copyright,t.tracksAmount=e.tracksAmount,t.firstNoteOn=e.firstNoteOn,t.keyRange={...e.keyRange},t.lastVoiceEventTick=e.lastVoiceEventTick,t.loop={...e.loop},t.format=e.format,t.bankOffset=e.bankOffset,t.isKaraokeFile=e.isKaraokeFile,t.isDLSRMIDI=e.isDLSRMIDI,t.tempoChanges=[...e.tempoChanges],t.lyrics=e.lyrics.map(o=>new Uint8Array(o)),t.lyricsTicks=[...e.lyricsTicks],t.midiPorts=[...e.midiPorts],t.midiPortChannelOffsets=[...e.midiPortChannelOffsets],t.usedChannelsOnTrack=e.usedChannelsOnTrack.map(o=>new Set(o)),t.rawMidiName=e.rawMidiName?new Uint8Array(e.rawMidiName):void 0,t.embeddedSoundFont=e.embeddedSoundFont?e.embeddedSoundFont.slice(0):void 0,t.RMIDInfo={...e.RMIDInfo},t.tracks=e.tracks.map(o=>[...o]),t}_parseInternal(){Re("%cInterpreting MIDI events...",B.info);let e=!1,t=0;this.midiPorts=[],this.midiPortChannelOffsets=[],this.keyRange={max:0,min:127};let o=[],n=!1;typeof this.RMIDInfo.ICOP<"u"&&(n=!0);let s=!1;typeof this.RMIDInfo.INAM<"u"&&(s=!0);let r=null,a=null;for(let l=0;l<this.tracks.length;l++){let g=this.tracks[l],h=new Set;this.midiPorts.push(-1);let C=!1;for(let p of g){if(p.messageStatusByte>=128&&p.messageStatusByte<240){C=!0;for(let S=0;S<p.messageData.length;S++)p.messageData[S]=Math.min(127,p.messageData[S]);switch(p.ticks>this.lastVoiceEventTick&&(this.lastVoiceEventTick=p.ticks),p.messageStatusByte&240){case G.controllerChange:switch(p.messageData[0]){case 2:case 116:r=p.ticks;break;case 4:case 117:a===null?a=p.ticks:a=0;break;case 0:this.isDLSRMIDI&&p.messageData[1]!==0&&p.messageData[1]!==127&&(x("%cDLS RMIDI with offset 1 detected!",B.recognized),this.bankOffset=1)}break;case G.noteOn:h.add(p.messageStatusByte&15);let S=p.messageData[0];this.keyRange.min=Math.min(this.keyRange.min,S),this.keyRange.max=Math.max(this.keyRange.max,S);break}}p.messageData.currentIndex=0;let f=ae(p.messageData,p.messageData.length);switch(p.messageData.currentIndex=0,p.messageStatusByte){case G.setTempo:p.messageData.currentIndex=0,this.tempoChanges.push({ticks:p.ticks,tempo:6e7/_t(p.messageData,3)}),p.messageData.currentIndex=0;break;case G.marker:switch(f.trim().toLowerCase()){default:break;case"start":case"loopstart":r=p.ticks;break;case"loopend":a=p.ticks}p.messageData.currentIndex=0;break;case G.midiPort:let M=p.messageData[0];this.midiPorts[l]=M,this.midiPortChannelOffsets[M]===void 0&&(this.midiPortChannelOffsets[M]=t,t+=16);break;case G.copyright:n||(p.messageData.currentIndex=0,o.push(ae(p.messageData,p.messageData.length,void 0,!1)),p.messageData.currentIndex=0);break;case G.lyric:if(f.trim().startsWith("@KMIDI KARAOKE FILE")&&(this.isKaraokeFile=!0,x("%cKaraoke MIDI detected!",B.recognized)),this.isKaraokeFile)p.messageStatusByte=G.text;else{this.lyrics.push(p.messageData),this.lyricsTicks.push(p.ticks);break}case G.text:let y=f.trim();y.startsWith("@KMIDI KARAOKE FILE")?(this.isKaraokeFile=!0,x("%cKaraoke MIDI detected!",B.recognized)):this.isKaraokeFile&&(y.startsWith("@T")||y.startsWith("@A")?e?o.push(y.substring(2).trim()):(this.midiName=y.substring(2).trim(),e=!0,s=!0,this.rawMidiName=Et(this.midiName)):y[0]!=="@"&&(this.lyrics.push(vn(p.messageData)),this.lyricsTicks.push(p.ticks)));break}}if(this.usedChannelsOnTrack.push(h),!C){let p=g.find(f=>f.messageStatusByte===G.trackName);if(p){p.messageData.currentIndex=0;let f=ae(p.messageData,p.messageData.length);o.push(f)}}}this.tempoChanges.reverse(),x("%cCorrecting loops, ports and detecting notes...",B.info);let A=[];for(let l of this.tracks){let g=l.find(h=>(h.messageStatusByte&240)===G.noteOn);g&&A.push(g.ticks)}this.firstNoteOn=Math.min(...A),x(`%cFirst note-on detected at: %c${this.firstNoteOn}%c ticks!`,B.info,B.recognized,B.info),r!==null&&a===null?(r=this.firstNoteOn,a=this.lastVoiceEventTick):(r===null&&(r=this.firstNoteOn),(a===null||a===0)&&(a=this.lastVoiceEventTick)),this.loop={start:r,end:a},x(`%cLoop points: start: %c${this.loop.start}%c end: %c${this.loop.end}`,B.info,B.recognized,B.info,B.recognized);let d=0;for(let l of this.midiPorts)if(l!==-1){d=l;break}if(this.midiPorts=this.midiPorts.map(l=>l===-1?d:l),this.midiPortChannelOffsets.length===0&&(this.midiPortChannelOffsets=[0]),this.midiPortChannelOffsets.length<2?x("%cNo additional MIDI Ports detected.",B.info):x("%cMIDI Ports detected!",B.recognized),!s)if(this.tracks.length>1){if(this.tracks[0].find(l=>l.messageStatusByte>=G.noteOn&&l.messageStatusByte<G.polyPressure)===void 0){let l=this.tracks[0].find(g=>g.messageStatusByte===G.trackName);l&&(this.rawMidiName=l.messageData,l.messageData.currentIndex=0,this.midiName=ae(l.messageData,l.messageData.length,void 0,!1))}}else{let l=this.tracks[0].find(g=>g.messageStatusByte===G.trackName);l&&(this.rawMidiName=l.messageData,l.messageData.currentIndex=0,this.midiName=ae(l.messageData,l.messageData.length,void 0,!1))}if(n||(this.copyright=o.map(l=>l.trim().replace(/(\r?\n)+/g,`
`)).filter(l=>l.length>0).join(`
`)||""),this.midiName=this.midiName.trim(),this.midiNameUsesFileName=!1,this.midiName.length===0){x("%cNo name detected. Using the alt name!",B.info),this.midiName=ro(this.fileName),this.midiNameUsesFileName=!0,this.rawMidiName=new Uint8Array(this.midiName.length);for(let l=0;l<this.midiName.length;l++)this.rawMidiName[l]=this.midiName.charCodeAt(l)}else x(`%cMIDI Name detected! %c"${this.midiName}"`,B.info,B.recognized);let u=!0;for(let l of this.lyrics)if(l[0]===32||l[l.length-1]===32){u=!1;break}u&&(this.lyrics=this.lyrics.map(l=>{if(l[l.length-1]===45)return l;let g=new Uint8Array(l.length+1);return g.set(l,0),g[l.length]=32,g})),this.duration=mo(this.lastVoiceEventTick,this),x("%cSuccess!",B.recognized),j()}flush(){for(let e of this.tracks)e.sort((t,o)=>t.ticks-o.ticks);this._parseInternal()}};function mo(i,e){let t=0;for(;i>0;){let o=e.tempoChanges.find(s=>s.ticks<i),n=i-o.ticks;t+=n*60/(o.tempo*e.timeDivision),i-=n}return t}var po={backwards:0,forwards:1,shuffleOn:2,shuffleOff:3},De={loadNewSongList:0,pause:1,stop:2,play:3,setTime:4,changeMIDIMessageSending:5,setPlaybackRate:6,setLoop:7,changeSong:8,getMIDI:9,setSkipToFirstNote:10,setPreservePlaybackState:11},lt={midiEvent:0,songChange:1,textEvent:2,timeChange:3,pause:4,getMIDI:5,midiError:6,metaEvent:7,loopCountChange:8};var $n={duration:99999,firstNoteOn:0,loop:{start:0,end:123456},lastVoiceEventTick:123456,lyrics:[],copyright:"",midiPorts:[],midiPortChannelOffsets:[],tracksAmount:0,tempoChanges:[{ticks:0,tempo:120}],fileName:"NOT_LOADED.mid",midiName:"Loading...",rawMidiName:new Uint8Array([76,111,97,100,105,110,103,46,46,46]),usedChannelsOnTrack:[],timeDivision:0,keyRange:{min:0,max:127},isEmbedded:!1,RMIDInfo:{},bankOffset:0,midiNameUsesFileName:!1,format:0};var va={skipToFirstNoteOn:!0,autoPlay:!0,preservePlaybackState:!1},Wo=class{onError;onTextEvent;midiData;onSongChange={};onTimeChange={};onSongEnded={};onTempoChange={};onMetaEvent={};currentTempo=120;songIndex=0;_getMIDIResolve=void 0;hasDummyData=!0;isFinished=!1;duration=0;pausedTime=void 0;constructor(e,t,o=va){this.ignoreEvents=!1,this.synth=t,this.highResTimeOffset=0,this.absoluteStartTime=this.synth.currentTime,this.synth.sequencerCallbackFunction=this._handleMessage.bind(this),this._skipToFirstNoteOn=o?.skipToFirstNoteOn??!0,this._preservePlaybackState=o?.preservePlaybackState??!1,this._skipToFirstNoteOn===!1&&this._sendMessage(De.setSkipToFirstNote,!1),this._preservePlaybackState===!0&&this._sendMessage(De.setPreservePlaybackState,!0),this.loadNewSongList(e,o?.autoPlay??!0),window.addEventListener("beforeunload",this.resetMIDIOut.bind(this))}_loop=!0;get loop(){return this._loop}set loop(e){this._sendMessage(De.setLoop,[e,this._loopsRemaining]),this._loop=e}_loopsRemaining=-1;get loopsRemaining(){return this._loopsRemaining}set loopsRemaining(e){this._loopsRemaining=e,this._sendMessage(De.setLoop,[this._loop,e])}_playbackRate=1;get playbackRate(){return this._playbackRate}set playbackRate(e){this._sendMessage(De.setPlaybackRate,e),this.highResTimeOffset*=e/this._playbackRate,this._playbackRate=e}_shuffleSongs=!1;get shuffleSongs(){return this._shuffleSongs}set shuffleSongs(e){this._shuffleSongs=e,e?this._sendMessage(De.changeSong,po.shuffleOn):this._sendMessage(De.changeSong,po.shuffleOff)}get skipToFirstNoteOn(){return this._skipToFirstNoteOn}set skipToFirstNoteOn(e){this._skipToFirstNoteOn=e,this._sendMessage(De.setSkipToFirstNote,this._skipToFirstNoteOn)}get preservePlaybackState(){return this._preservePlaybackState}set preservePlaybackState(e){this._preservePlaybackState=e,this._sendMessage(De.setPreservePlaybackState,e)}get currentTime(){return this.pausedTime!==void 0?this.pausedTime:(this.synth.currentTime-this.absoluteStartTime)*this._playbackRate}set currentTime(e){this._preservePlaybackState||this.unpause(),this._sendMessage(De.setTime,e)}get currentHighResolutionTime(){if(this.pausedTime!==void 0)return this.pausedTime;let e=this.highResTimeOffset,t=this.absoluteStartTime,o=(performance.now()/1e3-t)*this._playbackRate,n=e+o,s=this.currentTime,r=.01*this._playbackRate,a=s-n;return this.highResTimeOffset+=a*r,n=this.highResTimeOffset+o,n}get paused(){return this.pausedTime!==void 0}addOnSongChangeEvent(e,t){this.onSongChange[t]=e}addOnSongEndedEvent(e,t){this.onSongEnded[t]=e}addOnTimeChangeEvent(e,t){this.onTimeChange[t]=e}addOnTempoChangeEvent(e,t){this.onTempoChange[t]=e}addOnMetaEvent(e,t){this.onMetaEvent[t]=e}resetMIDIOut(){if(this.MIDIout){for(let e=0;e<16;e++)this.MIDIout.send([G.controllerChange|e,120,0]),this.MIDIout.send([G.controllerChange|e,123,0]);this.MIDIout.send([G.reset])}}_sendMessage(e,t=void 0){this.synth.post({channelNumber:-1,messageType:ce.sequencerSpecific,messageData:{messageType:e,messageData:t}})}nextSong(){this._sendMessage(De.changeSong,po.forwards)}previousSong(){this._sendMessage(De.changeSong,po.backwards)}_callEvents(e,t){for(let o in e){let n=e[o];try{n(t)}catch(s){Z(`Failed to execute callback for ${n[0]}:`,s)}}}_handleMessage(e,t){if(!this.ignoreEvents)switch(e){case lt.midiEvent:let o=t;if(this.MIDIout&&o[0]>=128){this.MIDIout.send(o);return}break;case lt.songChange:let n=t[0];this.songIndex=t[1],this.midiData=n,this.hasDummyData=!1,this.absoluteStartTime=0,this.duration=this.midiData.duration,this._callEvents(this.onSongChange,n),t[2]===!0&&this.unpause();break;case lt.textEvent:this.onTextEvent&&this.onTextEvent(...t);break;case lt.timeChange:let s=this.synth.currentTime-t;this._callEvents(this.onTimeChange,s),this._recalculateStartTime(s),this.paused&&this._preservePlaybackState?this.pausedTime=s:this.unpause();break;case lt.pause:this.pausedTime=this.currentTime,this.isFinished=t,this.isFinished&&this._callEvents(this.onSongEnded,void 0);break;case lt.midiError:if(this.onError)this.onError(t);else throw new Error("Sequencer error: "+t);return;case lt.getMIDI:this._getMIDIResolve&&this._getMIDIResolve(uo.copyFrom(t));break;case lt.metaEvent:if(t[0]===G.setTempo){let a=new L(t[1]),A=6e7/_t(a,3);this.currentTempo=Math.round(A*100)/100,this.onTempoChange&&this._callEvents(this.onTempoChange,this.currentTempo)}this._callEvents(this.onMetaEvent,t);break;case lt.loopCountChange:this._loopsRemaining=t,this._loopsRemaining===0&&(this._loop=!1);break;default:break}}_recalculateStartTime(e){this.absoluteStartTime=this.synth.currentTime-e/this._playbackRate,this.highResTimeOffset=(this.synth.currentTime-performance.now()/1e3)*this._playbackRate}async getMIDI(){return new Promise(e=>{this._getMIDIResolve=e,this._sendMessage(De.getMIDI,void 0)})}loadNewSongList(e,t=!0){this.pause(),this.midiData=$n,this.hasDummyData=!0,this.duration=99999,this._sendMessage(De.loadNewSongList,[e,t]),this.songIndex=0,this.songsAmount=e.length,this.songsAmount>1&&(this.loop=!1),t===!1&&(this.pausedTime=this.currentTime)}connectMidiOutput(e){this.resetMIDIOut(),this.MIDIout=e,this._sendMessage(De.changeMIDIMessageSending,e!==void 0),this.currentTime-=.1}pause(){if(this.paused){Z("Already paused");return}this.pausedTime=this.currentTime,this._sendMessage(De.pause)}unpause(){this.pausedTime=void 0,this.isFinished=!1}play(e=!1){this.isFinished&&(e=!0),this._recalculateStartTime(this.pausedTime||0),this.unpause(),this._sendMessage(De.play,e)}stop(){this._sendMessage(De.stop)}};var Co=["Shift_JIS","windows-1250","utf-8","utf-16","utf-16le","utf-16be","latin1","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","EUC-JP","ISO-2022-JP","EUC-KR","Big5","GB18030"];function es(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' viewBox='0 0 16 16'>
        <path d='m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z'/>
    </svg>`}function Pt(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor'  viewBox='0 0 16 16'>
        <path d='M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z'/>
    </svg>`}function ts(i){return`<svg fill='currentColor' xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' viewBox='0 0 100 100'>
	<path d='M83.729,23.57c-0.007-0.562-0.32-1.084-0.825-1.337c-0.503-0.259-1.107-0.212-1.568,0.114l-5.944,4.262l-0.468,0.336
		c-6.405-6.391-15.196-10.389-24.938-10.389c-13.284,0-24.878,7.354-30.941,18.201l0.024,0.013
		c-0.548,1.183-0.124,2.607,1.026,3.271c0.001,0,0.001,0,0.002,0.001l8.136,4.697c1.218,0.704,2.777,0.287,3.48-0.932
		c0.006-0.011,0.009-0.023,0.015-0.034c3.591-6.404,10.438-10.747,18.289-10.747c4.879,0,9.352,1.696,12.914,4.5l-1.001,0.719
		l-5.948,4.262c-0.455,0.327-0.696,0.89-0.611,1.447c0.081,0.558,0.471,1.028,1.008,1.208l25.447,8.669
		c0.461,0.162,0.966,0.084,1.367-0.203c0.399-0.29,0.629-0.746,0.627-1.23L83.729,23.57z'/>
	<path d='M79.904,61.958c0,0-0.001,0-0.002-0.001l-8.136-4.697c-1.218-0.704-2.777-0.287-3.48,0.932
		c-0.006,0.011-0.009,0.023-0.015,0.034c-3.591,6.404-10.438,10.747-18.289,10.747c-4.879,0-9.352-1.696-12.914-4.5l1.001-0.719
		l5.948-4.262c0.455-0.327,0.696-0.89,0.611-1.447c-0.081-0.558-0.471-1.028-1.008-1.208l-25.447-8.669
		c-0.461-0.162-0.966-0.084-1.367,0.203c-0.399,0.29-0.629,0.746-0.627,1.23l0.092,26.828c0.007,0.562,0.32,1.084,0.825,1.337
		c0.503,0.259,1.107,0.212,1.568-0.114l5.944-4.262l0.468-0.336c6.405,6.391,15.196,10.389,24.938,10.389
		c13.284,0,24.878-7.354,30.941-18.201L80.93,65.23C81.478,64.046,81.055,62.623,79.904,61.958z'/>
</svg>`}function os(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-text-center' viewBox='0 0 16 16'>
  <path fill-rule='evenodd' d='M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z'/>
</svg>`}function is(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-skip-end-fill' viewBox='0 0 16 16'>
  <path d='M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0V4z'/>
</svg>`}function ns(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-skip-start-fill' viewBox='0 0 16 16'>
  <path d='M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0V4z'/>
</svg>`}function Eo(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-volume-up-fill' viewBox='0 0 16 16'>
  <path d='M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z'/>
  <path d='M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z'/>
  <path d='M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z'/>
</svg>`}function jt(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i*.8}' height='${i*.8}' fill='currentColor' class='bi bi-mic' viewBox='0 0 16 16'>
  <path d='M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5'/>
  <path d='M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3'/>
</svg>`}function ss(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i*.9}' height='${i*.9}' fill='currentColor' class='bi bi-mic-fill' viewBox='0 0 16 16'>
  <path d='M5 3a3 3 0 0 1 6 0v5a3 3 0 0 1-6 0z'/>
  <path d='M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5'/>
</svg>`}function As(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' style='color: red;' class='bi bi-volume-mute-fill' viewBox='0 0 16 16'>
  <path style='color: red;' fill='currentColor' d='M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z'/>
</svg>`}function Zo(i){return`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' width='${i}' height='${i}' class='bi bi-drum-fill' fill='currentColor'>
    <path d='M494,12L258.3,123.8c-6.8-4.6-15.1-7.3-24-7.3c-23.6,0-42.6,19.1-42.6,42.6s19.1,42.6,42.6,42.6
    		c22.4,0,40.9-17.3,42.6-39.3l129.2-61.3c38.7,16.3,62.6,37.6,62.6,57.9c0,40.2-91.1,85.2-213.1,85.2s-213.1-45-213.1-85.2
    		s91.1-85.2,213.1-85.2c3.7,0,7-0.1,10.7,0l75.2-35.3c-26.7-4.5-55.3-7.3-85.9-7.3C109.9,31.3,0,86.2,0,159.1v213.1
    		c0,21.1,9.5,40.4,24,55.9c14.5,15.6,34.2,28.1,57.3,38.6c46.1,21,107.1,33.3,174.4,33.3s128.3-12.3,174.4-33.3
    		c23.1-10.5,42.8-23.1,57.3-38.6c14.5-15.6,24-34.9,24-55.9V159.1c0-31.5-20.8-59.4-55.9-81.2L512,50.6L494,12z M42.6,231.7
    		c21.6,16.3,50.7,29.7,85.2,39.3v168.4c-10.7-3.3-20.4-7.2-29.3-11.3c-19.3-8.8-34-19.4-43.3-29.3c-9.2-9.9-12.7-18.2-12.7-26.6
    		V231.7z M468.7,231.7v140.5c0,8.4-3.4,16.7-12.7,26.6c-9.2,9.9-24,20.5-43.3,29.3c-8.9,4.1-18.6,8-29.3,11.3V271
    		C418,261.4,447.1,248,468.7,231.7z M170.4,280.3c26.5,4.4,55,6.7,85.2,6.7s58.8-2.2,85.2-6.7v169.1c-26.2,4.9-54.9,8-85.2,8
    		s-59-3.1-85.2-8V280.3z'/>
   </svg>`}function jo(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-music-note' viewBox='0 0 16 16'>
  <path d='M9 13c0 1.105-1.12 2-2.5 2S4 14.105 4 13s1.12-2 2.5-2 2.5.895 2.5 2z'/>
  <path fill-rule='evenodd' d='M9 3v10H8V3h1z'/>
  <path d='M8 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 13 2.22V4L8 5V2.82z'/>
</svg>`}function rs(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-gear-fill' viewBox='0 0 16 16'>
  <path d='M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z'/>
</svg>`}function as(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-music-note-beamed' viewBox='0 0 16 16'>
  <path d='M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13s1.12-2 2.5-2 2.5.896 2.5 2m9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2'/>
  <path fill-rule='evenodd' d='M14 11V2h1v9zM6 3v10H5V3z'/>
  <path d='M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4z'/>
</svg>`}function ls(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-chevron-down' viewBox='0 0 16 16'>
  <path fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708'/>
</svg>`}function Bo(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i*.8}' height='${i*.8}' fill='currentColor' class='bi bi-lock-fill' viewBox='0 0 16 16'>
  <path d='M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2'/>
</svg>`}function Hi(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i*.8}' height='${i*.8}' fill='currentColor' class='bi bi-unlock-fill' viewBox='0 0 16 16'>
  <path d='M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2'/>
</svg>`}function cs(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-hourglass' viewBox='0 0 16 16'>
      <path d='M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5m2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702c0 .7-.478 1.235-1.011 1.491A3.5 3.5 0 0 0 4.5 13v1h7v-1a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351v-.702c0-.7.478-1.235 1.011-1.491A3.5 3.5 0 0 0 11.5 3V2z'/>
    </svg>`}function fo(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-exclamation-triangle' viewBox='0 0 16 16'>
  <path d='M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z'/>
  <path d='M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z'/>
</svg>`}function Pi(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-check2' viewBox='0 0 16 16'>
  <path d='M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0'/>
</svg>`}function gs(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='none' class='bi bi-shuffle' viewBox='-3 -3 22 22'>
    <path d='M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.6 9.6 0 0 0 7.556 8a9.6 9.6 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.6 10.6 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.6 9.6 0 0 0 6.444 8a9.6 9.6 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/>
    <path d='M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192' stroke-width='1.7' stroke-linecap='round' stroke-linejoin='round'/></svg>
`}function ds(i){return`<svg xmlns='http://www.w3.org/2000/svg' width='${i}' height='${i}' fill='currentColor' class='bi bi-speedometer' viewBox='-1 -1 18 18'>
  <path d='M8 2a.5.5 0 0 1 .5.5V4a.5.5 0 0 1-1 0V2.5A.5.5 0 0 1 8 2M3.732 3.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707M2 8a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8m9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5m.754-4.246a.39.39 0 0 0-.527-.02L7.547 7.31A.91.91 0 1 0 8.85 8.569l3.434-4.297a.39.39 0 0 0-.029-.518z'/>
  <path fill-rule='evenodd' d='M6.664 15.889A8 8 0 1 1 9.336.11a8 8 0 0 1-2.672 15.78zm-4.665-4.283A11.95 11.95 0 0 1 8 10c2.186 0 4.236.585 6.001 1.606a7 7 0 1 0-12.002 0'/>
</svg>`}function Qt(i,e){let t=document.createElement("div");return t.classList.add("control_buttons"),t.title=i,t.innerHTML=e,t}var Ee={synthesizerUIShow:"s",settingsShow:"r",blackMidiMode:"b",midiPanic:"backspace",playPause:" ",toggleLoop:"l",toggleLyrics:"t",seekBackwards:"arrowleft",seekForwards:"arrowright",previousSong:"[",nextSong:"]",toggleSubtitles:"escape",sustainPedal:"shift",cinematicMode:"c",videoMode:"v"};function hs(){navigator.mediaSession&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.currentSongTitle,artist:"SpessaSynth"}),navigator.mediaSession.setActionHandler("play",()=>{this.seqPlay()}),navigator.mediaSession.setActionHandler("pause",()=>{this.seqPause()}),navigator.mediaSession.setActionHandler("stop",()=>{this.seq.currentTime=0,this.seqPause()}),navigator.mediaSession.setActionHandler("seekbackward",i=>{this.seq.currentTime-=i.seekOffset||10}),navigator.mediaSession.setActionHandler("seekforward",i=>{this.seq.currentTime+=i.seekOffset||10}),navigator.mediaSession.setActionHandler("seekto",i=>{this.seq.currentTime=i.seekTime}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.switchToPreviousSong()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.switchToNextSong()}),navigator.mediaSession.playbackState="playing")}function Is(i=!0){if(this.seq?.hasDummyData===!0)this.currentSongTitle=this.locale.getLocaleString("locale.synthInit.genericLoading");else if(this.seq.midiData.midiNameUsesFileName)this.currentSongTitle=ro(this.seq.midiData.fileName);else{let e=this.infoDecoder.decode(this.seq.midiData.rawMidiName.buffer).replace(/\0$/,"");this.currentSongTitle=ro(e)}if(this.seq.midiData&&(this.loadLyricData(),this.setLyricsText(this.lyricsIndex),i&&(this.rawOtherTextEvents=[])),this.synthDisplayMode.enabled===!1?this.mainTitleMessageDisplay.innerText=this.currentSongTitle:this.mainTitleMessageDisplay.innerText=this.decodeTextFix(this.synthDisplayMode.currentEncodedText.buffer),document.title=this.currentSongTitle+" - SpessaSynth",this.musicModeUI.setTitle(this.currentSongTitle),!!navigator.mediaSession)try{navigator.mediaSession.setPositionState({duration:this.seq.duration,playbackRate:this.seq.playbackRate,position:this.seq.currentTime})}catch{}}function xa(i){let e=[],t="",o=!1;for(let n=0;n<i.length;n++){let s=i[n];s==="{"?(t&&(e.push(t),t=""),o=!0,t+=s):s==="}"?(t+=s,e.push(t),t="",o=!1):t+=s}return t&&e.push(t),e}function us(i){let e=i.slice(2),t=255-parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16);return`rgba(${parseInt(e.slice(6),16)}, ${n}, ${o}, ${t/255})`}var Xo=class{text=[];textClean="";layer=0;startSeconds=0;endSeconds=0;styleName="";styleData={};marginLeft=0;marginRight=0;marginVertical=0;element=void 0;primaryColor;secondaryColor;constructor(e,t,o,n,s,r,a,A,d){this.text=xa(e);let u=[];this.text.forEach(l=>{l.startsWith("{")||u.push(l)}),this.textClean=u.join(""),this.startSeconds=o,this.endSeconds=n,this.styleName=s,this.styleData=d.find(l=>l.Name===this.styleName),this.marginLeft=r||parseInt(this.styleData.MarginL),this.marginRight=a||parseInt(this.styleData.MarginR),this.marginVertical=A||parseInt(this.styleData.MarginV),this.primaryColor=us(this.styleData.PrimaryColour),this.secondaryColor=us(this.styleData.SecondaryColour)}hide(){this.element!==void 0&&this.element.remove(),this.element=void 0}updateHighlights(e){let t=0,o=0,n=0,s=e-this.startSeconds,r=!1,a=0;for(let A of this.text)if(A.startsWith("{")){let d=A.startsWith("{\\K")||A.startsWith("{\\kf");if(!d&&!A.startsWith("{\\k"))continue;let u=parseInt(A.slice(3,-1))/100;d?(a=u,r=!0):t+=u,o=u}else{let d=this.textChunks[n];if(r){if(r=!1,t>s)d.style.cssText="",d.style.backgroundImage="",d.style.backgroundClip="",d.style.color=this.secondaryColor;else{let u=s-t,l=Math.min(100,u/a*100);d.style.color="transparent",d.style.backgroundImage=`linear-gradient(90deg, ${this.primaryColor} 50%, ${this.secondaryColor} 50%)`,d.style.backgroundPosition=`${100-l}%`,d.style.backgroundSize="200% 100%",d.style.backgroundClip="text"}t+=a}else d.style.backgroundImage="",d.style.backgroundClip="",t-o>s?d.style.color=this.secondaryColor:d.style.color=this.primaryColor;n++}}show(e,t,o,n,s){if(this.element!==void 0){this.updateHighlights(n);return}this.element=document.createElement("div"),this.element.classList.add("ass_renderer_element");let r=parseInt(this.styleData.Alignment);if(this.text[0].startsWith("{\\an"))r=parseInt(this.text[0][4]);else if(this.text[0].startsWith("{\\a"))switch(parseInt(this.text[0][3])){case 1:r=1;break;case 2:r=2;break;case 3:r=3;break;case 5:r=7;break;case 6:r=8;break;case 7:r=9;break;case 9:r=4;break;case 10:r=5;break;case 11:r=6;break;default:r=5;break}let a=this.marginLeft/e*100,A=this.marginRight/e*100,d=this.marginVertical/t*100;switch(r){case 1:this.element.style.left=`${a}%`,this.element.style.bottom=`${d}%`;break;case 2:this.element.style.left=`calc(50% + ${a}% - ${A}%)`,this.element.style.bottom=`${d}%`,this.element.style.transform="translateX(-50%)";break;case 3:this.element.style.right=`${A}%`,this.element.style.bottom=`${d}%`;break;case 4:this.element.style.left=`${a}%`,this.element.style.top=`calc(50% + ${d}% - ${d}%)`,this.element.style.transform="translateY(-50%)";break;case 5:this.element.style.left=`calc(50% + ${a}% - ${A}%)`,this.element.style.top=`calc(50% + ${d}% - ${d}%)`,this.element.style.transform="translate(-50%, -50%)";break;case 6:this.element.style.right=`${A}%`,this.element.style.top=`calc(50% + ${d}% - ${d}%)`,this.element.style.transform="translateY(-50%)";break;case 7:this.element.style.left=`${a}%`,this.element.style.top=`${d}%`;break;case 8:this.element.style.left=`calc(50% + ${a}% - ${A}%)`,this.element.style.top=`${d}%`,this.element.style.transform="translateX(-50%)";break;case 9:this.element.style.right=`${A}%`,this.element.style.top=`${d}%`;break;default:this.element.style.left=`${a}%`,this.element.style.bottom=`${d}%`;break}this.element.style.color=this.secondaryColor,this.element.style.zIndex=(this.layer+99999).toString();let u=`${this.styleData.Fontname}, "${s}", sans-serif`,l=this.styleData.Fontsize;this.text[0].startsWith("{\\fs")&&(l=this.text[0].slice(4,-1)),this.element.style.fontFamily=u,this.element.style.fontSize=`${parseFloat(l)/t*.8*window.screen.height}px`,this.styleData.Bold==="1"&&(this.element.style.fontWeight="bold"),this.styleData.Italic==="1"&&(this.element.style.fontStyle="italic"),this.styleData.Underline==="1"&&(this.element.style.textDecoration="underline"),this.styleData.StrikeOut==="1"&&(this.element.style.textDecoration="line-through"),this.textChunks=[];for(let h of this.text)if(!h.startsWith("{")){let C=document.createElement("span");C.textContent=h.replaceAll("\\N",`
`).replaceAll("\\h"," ").replaceAll("\\n",`
`),C.style.color=this.secondaryColor,this.element.appendChild(C),this.textChunks.push(C)}o.appendChild(this.element),this.updateHighlights(n),this.element.offsetHeight;let g=this.element.getBoundingClientRect();for(let h of o.children){if(h===this.element)continue;let C=h.getBoundingClientRect(),p=o.getBoundingClientRect();g.top<C.bottom&&g.bottom>C.top&&(C.top-p.top>g.height?(this.element.style.top="",this.element.style.bottom=`${p.bottom-C.top}px`):(this.element.style.top=`${C.top+C.height}px`,this.element.style.bottom=""))}}};var Oi=384,Yi=288;function ms(i){let[e,t,o]=i.split(":"),[n,s]=o.split(".");return parseInt(e)*3600+parseInt(t)*60+parseInt(n)+parseInt(s)/100}var Ji=class{type;data},$o=class{type;contents=[];constructor(e,t){this.type=e,this.contents=t}getContent(e,t=""){return this.contents.find(o=>o.type===e)?.data||t}},ei=class{visible;subData=[];resolutionX=Oi;resolutionY=Yi;kerning=!0;styles=[];events=[];fonts=[];timer=1;constructor(e,t,o){this.seq=e,this.screen=t,this.init(),o.onRender=this.tick.bind(this),document.addEventListener("keydown",n=>{n.key.toLowerCase()===Ee.toggleSubtitles&&this.setVisibility(!this.visible)})}tick(){if(!this.visible){for(let t of this.events)t.hide();return}let e=this.seq.currentTime*this.timer;for(let t of this.events)(t.startSeconds>e||t.endSeconds<=e)&&t.hide();this.screen.offsetHeight;for(let t of this.events)t.startSeconds<=e&&t.endSeconds>e&&t.show(this.resolutionX,this.resolutionY,this.screen,e,this.firstEmbeddedFontName)}init(){this.visible=!1,this.subData=[],this.resolutionX=Oi,this.resolutionY=Yi,this.kerning=!0,this.styles=[],this.events=[],this.fonts=[],this.screen.innerHTML=""}setVisibility(e){this.visible=e,this.tick(),setTimeout(()=>this.tick(),10)}_getSection(e,t=!1){let o=e.toLowerCase(),n=this.subData.find(s=>s.type.toLowerCase()===o);if(!n&&t)throw new Error(`Section ${e} not found!`);return n}loadASSSubtitles(e){this.init();let t=e.replaceAll(`\r
`,`
`).split(`
`),o=!1,n="",s="",r=[];for(let g of t)if(g.startsWith("[")&&!o)n=g,o=!0;else if(g.length===0&&o)o=!1,this.subData.push(new $o(n,r)),r=[];else if(n==="[Fonts]")if(!g.startsWith("fontname: "))this.fonts.find(h=>h.name===s).data+=g;else{let h=g.split(/: (.*)/s)[1];this.fonts.push({name:h,data:"",dataDecoded:void 0}),s=h}else if(!g.startsWith("!")&&!g.startsWith(";")){let h=g.split(/: (.*)/s),C=new Ji;C.type=h[0],C.data=h[1],r.push(C)}o&&this.subData.push(new $o(n,r));let a=this._getSection("[Script Info]",!0);this.resolutionX=parseInt(a.getContent("PlayResX",Oi.toString())),this.resolutionY=parseInt(a.getContent("PlayResY",Yi.toString())),this.kerning=a.getContent("Kerning","yes")==="yes",this.timer=parseFloat(a.getContent("Timer","100"))/100;let A=this._getSection("[V4+ Styles]",!0),d=A.getContent("Format","").split(", ");for(let g of A.contents){if(g.type!=="Style")continue;let h=g.data.split(",");if(h.length!==d.length)throw new Error(`Format and style data counts do not match. Expected ${d.length} got ${h.length}`);let C={};for(let p=0;p<h.length;p++)C[d[p]]=h[p];this.styles.push(C)}let u=this._getSection("[Events]",!0),l=u.getContent("Format","").split(", ");for(let g of u.contents){if(g.type!=="Dialogue")continue;let h=[],C=g.data;for(let S=0;S<l.length-1;S++){let M=C.indexOf(",");h.push(C.substring(0,M)),C=C.substring(M+1)}if(h.push(C),h.length!==l.length)throw new Error(`Format and dialogue data counts do not match. Expected ${l.length} got ${h.length}`);let p={};for(let S=0;S<h.length;S++)p[l[S]]=h[S];let f=new Xo(p.Text||"",parseInt(p.Layer)||0,p.Start?ms(p.Start):0,p.End?ms(p.End):0,p.Style||"",parseInt(p.MarginL)||0,parseInt(p.MarginR)||0,parseInt(p.MarginV)||0,this.styles);this.events.push(f)}for(let g of this.fonts){let h=g.data,C=[];for(let M=0;M<h.length;M+=4){let k=h.slice(M,M+4).split("").map(D=>D.charCodeAt(0)-33),w=k[0]<<2|k[1]>>4,c=(k[1]&15)<<4|k[2]>>2,b=(k[2]&3)<<6|k[3];M+1<h.length&&C.push(w),M+2<h.length&&C.push(c),M+3<h.length&&C.push(b)}g.dataDecoded=new Uint8Array(C);let p=new Blob([g.dataDecoded]),f=URL.createObjectURL(p),S=document.createElement("style");S.innerHTML=`@font-face {
                font-family: "${g.name}";
                src: url("${f}");
            }`,document.head.appendChild(S)}this.firstEmbeddedFontName=this.fonts[0]?.name||"sans-serif",x("Subtitles:",this.styles,this.events,this.fonts),this.screen.style.fontKerning=this.kerning?"normal":"none"}};function ps(){this.lyricsElement={};let i=document.createElement("div");i.classList.add("lyrics");let e=document.createElement("div");e.classList.add("lyrics_title_wrapper"),i.append(e),this.lyricsElement.titleWrapper=e;let t=document.createElement("h2");this.locale.bindObjectProperty(t,"textContent","locale.sequencerController.lyrics.title"),t.classList.add("lyrics_title"),e.appendChild(t),this.lyricsElement.title=t;let o=document.createElement("select");Co.forEach(u=>{let l=document.createElement("option");l.innerText=u,l.value=u,o.appendChild(l)}),o.value=this.encoding,o.onchange=()=>this.changeEncoding(o.value),o.classList.add("lyrics_selector"),this.encodingSelector=o,e.appendChild(o);let n=document.createElement("p");n.classList.add("lyrics_text"),i.appendChild(n);let s=document.createElement("details"),r=document.createElement("summary");this.locale.bindObjectProperty(r,"textContent","locale.sequencerController.lyrics.otherText.title"),s.appendChild(r);let a=document.createElement("div");a.innerText="",s.appendChild(a),i.appendChild(s),this.subtitleManager=new ei(this.seq,document.getElementsByClassName("ass_renderer_field")[0],this.renderer);let A=document.createElement("input");A.type="file",A.accept=".ass",A.id="subtitle_upload",A.classList.add("hidden"),i.appendChild(A),A.onchange=async()=>{if(A.files[0]===void 0)return;let u=A.files[0];this.subtitleManager.loadASSSubtitles(await u.text()),this.subtitleManager.setVisibility(!0),this.toggleLyrics()};let d=document.createElement("label");d.htmlFor="subtitle_upload",d.classList.add("general_button"),this.locale.bindObjectProperty(d,"textContent","locale.sequencerController.lyrics.subtitles.title"),this.locale.bindObjectProperty(d,"title","locale.sequencerController.lyrics.subtitles.description"),i.appendChild(d),this.lyricsElement.text={main:n,other:a,subtitleButton:d,separateLyrics:[]},this.lyricsElement.mainDiv=i,this.lyricsElement.selector=o,this.controls.appendChild(i),this.requiresTextUpdate=!0}function Cs(i){if(!(this.currentLyricsString.length<2||i<0||i>this.currentLyricsString.length)){this.lyricsIndex=i;for(let e=0;e<=i;e++)this.lyricsElement.text.separateLyrics[e].classList.remove("lyrics_text_gray"),this.lyricsElement.text.separateLyrics[e].classList.add("lyrics_text_highlight");if(i<this.currentLyricsString.length){for(let e=i+1;e<this.lyricsElement.text.separateLyrics.length;e++)this.lyricsElement.text.separateLyrics[e].classList.remove("lyrics_text_highlight"),this.lyricsElement.text.separateLyrics[e].classList.add("lyrics_text_gray");this.lyricsElement.text.separateLyrics[i].scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}}function Es(){let i="";for(let e of this.rawOtherTextEvents)i+=`<span><pre>${Object.keys(G).find(t=>G[t]===e.type).replace(/([a-z])([A-Z])/g,"$1 $2")}:</pre> <i>${this.decodeTextFix(e.data.buffer)}</i></span><br>`;this.lyricsElement.text.other.innerHTML=i}function Xe(i){return i.parentElement.nextElementSibling}function Bs(i){let e=i.getElementsByTagName("spessarange");for(let t of e)t.parentElement.insertBefore(Qo(t,!0),t);for(;e.length>0;)e[0].parentNode.removeChild(e[0])}function Qo(i,e=!0){let t=document.createElement("div");t.classList.add("settings_slider_wrapper");let o=i.getAttribute("min"),n=i.getAttribute("max"),s=i.value,r=i.getAttribute("units"),a=i.getAttribute("input_id"),A=document.createElement("input");A.classList.add("settings_slider"),A.type="range",A.id=a,A.min=o,A.max=n,A.value=s;let d;e&&(d=document.createElement("span"),d.textContent=s+r);let u=document.createElement("div");u.classList.add("settings_visual_wrapper");let l=document.createElement("div");l.classList.add("settings_slider_progress"),u.appendChild(l);let g=document.createElement("div");return g.classList.add("settings_slider_thumb"),u.appendChild(g),u.appendChild(A),A.addEventListener("input",()=>{let h=parseInt(u.style.getPropertyValue("--visual-width").replace("%","")),C=Math.round((A.value-A.min)/(A.max-A.min)*100);Math.abs((h-C)/100)>.05?u.classList.add("settings_slider_transition"):u.classList.remove("settings_slider_transition"),u.style.setProperty("--visual-width",`${C}%`)}),u.style.setProperty("--visual-width",`${(A.value-A.min)/(A.max-A.min)*100}%`),t.appendChild(u),e&&t.appendChild(d),t}var ze=32,fs="#ccc",Qs="#555",Ma="#333",Fa="#ddd",Ra="Shift_JIS",ht=class{constructor(e,t,o,n){this.iconColor=fs,this.iconDisabledColor=Qs,this.controls=e,this.encoding=Ra,this.decoder=new TextDecoder(this.encoding),this.infoDecoder=new TextDecoder(this.encoding),this.hasInfoDecoding=!1,this.lyricsIndex=-1,this.requiresTextUpdate=!1,this.lastTimeUpdate=0,this.rawOtherTextEvents=[],this.mode="dark",this.locale=t,this.currentSongTitle="",this.currentLyrics=[],this.currentLyricsString=[],this.musicModeUI=o,this.renderer=n,this.mainTitleMessageDisplay=document.getElementById("title"),this.synthDisplayMode={enabled:!1,currentEncodedText:new Uint8Array(0)};let s=null;n.synth.eventHandler.addEvent("synthdisplay","sequi-synth-display",r=>{if(r.displayType===0||r.displayType===1){this.mainTitleMessageDisplay.classList.add("sysex_display"),this.mainTitleMessageDisplay.classList.remove("xg_sysex_display");let a=r.displayData;r.displayType===1&&(a=a.slice(1));let A=this.decodeTextFix(a.buffer);if(r.displayType===1){let d=r.displayData[0];this.mainTitleMessageDisplay.classList.add("xg_sysex_display");let u=d&15;for(let l=0;l<u;l++)A=" "+A;A.length>=16&&(A=A.slice(0,16)+`
`+A.slice(16)),(d&16)>1&&(A=`
`+A)}A.trim().length===0?this.mainTitleMessageDisplay.innerText="\u200E ":this.mainTitleMessageDisplay.innerText=A,this.synthDisplayMode.enabled=!0,this.synthDisplayMode.currentEncodedText=a,s!==null&&clearTimeout(s),s=setTimeout(()=>{this.synthDisplayMode.enabled=!1,this.restoreDisplay()},5e3)}})}toggleDarkMode(){if(this.mode==="dark"?(this.mode="light",this.iconColor=Ma,this.iconDisabledColor=Fa):(this.mode="dark",this.iconColor=fs,this.iconDisabledColor=Qs),!this.seq){this.requiresThemeUpdate=!0;return}this.progressBar.classList.toggle("note_progress_light"),this.progressBarBackground.classList.toggle("note_progress_background_light"),this.lyricsElement.mainDiv.classList.toggle("lyrics_light"),this.lyricsElement.titleWrapper.classList.toggle("lyrics_light"),this.lyricsElement.selector.classList.toggle("lyrics_light")}seqPlay(e=!0){e&&this.seq.play(),this.lyricsIndex=-1,this.playPause.innerHTML=Pt(ze),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),navigator.mediaSession&&(navigator.mediaSession.playbackState="playing")}seqPause(e=!0){e&&this.seq.pause(),this.playPause.innerHTML=es(ze),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),navigator.mediaSession&&(navigator.mediaSession.playbackState="paused")}switchToNextSong(){this.seq.nextSong(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus()}switchToPreviousSong(){this.seq.previousSong(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus()}decodeTextFix(e){let t=0;for(;;)try{return this.decoder.decode(e)}catch{t++,this.changeEncoding(Co[t]),this.encodingSelector.value=Co[t]}}connectSequencer(e){this.seq=e,this.createControls(),this.setSliderInterval(),this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),this.seq.onTextEvent=(t,o,n)=>{switch(o){default:return;case G.text:case G.copyright:case G.cuePoint:case G.trackName:case G.instrumentName:case G.programName:case G.marker:this.rawOtherTextEvents.push({type:o,data:t}),this.requiresTextUpdate=!0;return;case G.lyric:this.setLyricsText(n);break}},this.seq.addOnTimeChangeEvent(()=>{this.seqPlay(!1)},"sequi-time-change"),this.seq.addOnSongChangeEvent(t=>{if(this.synthDisplayMode.enabled=!1,this.lyricsIndex=-1,this.createNavigatorHandler(),this.updateTitleAndMediaStatus(),this.seqPlay(!1),this.seq.songsAmount>1&&(this.seq.loop=!1,this.loopButton.firstElementChild.setAttribute("fill",this.iconDisabledColor)),this.restoreDisplay(),this.hasInfoDecoding=this.seq.midiData.RMIDInfo?.[ye.encoding]!==void 0,t.isEmbedded){let o=(a,A,d,u="")=>this.seq.midiData.RMIDInfo?.[a]===void 0?A:u+d.decode(this.seq.midiData.RMIDInfo?.[a]).replace(/\0$/,""),n=new TextDecoder,s=o(ye.midiEncoding,this.encoding,n),r=o(ye.encoding,"utf-8",n);this.infoDecoder=new TextDecoder(r),this.changeEncoding(s)}},"sequi-song-change"),this.requiresThemeUpdate&&this.mode==="light"&&(this.mode="dark",this.toggleDarkMode())}restoreDisplay(){let e=this.currentSongTitle;this.seq||(e=this.locale.getLocaleString("locale.titleMessage")),this.mainTitleMessageDisplay.innerText=e,this.mainTitleMessageDisplay.classList.remove("sysex_display"),this.mainTitleMessageDisplay.classList.remove("xg_sysex_display")}changeEncoding(e){this.encoding=e,this.decoder=new TextDecoder(e),this.hasInfoDecoding||(this.infoDecoder=new TextDecoder(e)),this.updateOtherTextEvents(),this.lyricsElement.text.separateLyrics.forEach((t,o)=>{this.currentLyrics[o]!==void 0&&(t.innerText=this.decodeTextFix(this.currentLyrics[o].buffer))}),this.lyricsElement.selector.value=e,this.updateTitleAndMediaStatus(!1),this.setLyricsText(this.lyricsIndex)}createControls(){this.progressTime=document.createElement("p"),this.progressTime.id="note_time",this.progressTime.onclick=w=>{w.preventDefault();let c=e.getBoundingClientRect(),b=w.clientX-c.left,D=c.width;this.seq.currentTime=b/D*this.seq.duration,o.innerHTML=Pt(ze)},this.createLyrics();let e=document.createElement("div");e.id="note_progress_background",this.progressBarBackground=e,this.progressBar=document.createElement("div"),this.progressBar.id="note_progress",this.progressBar.min="0",this.progressBar.max=this.seq.duration.toString();let t=document.createElement("div");t.classList.add("control_buttons_wrapper");let o=Qt("Play/Pause",Pt(ze));this.playPause=o,this.locale.bindObjectProperty(o,"title","locale.sequencerController.playPause");let n=()=>{this.seq.paused?this.seqPlay():this.seqPause()};o.onclick=n;let s=Qt("Previous song",ns(ze));this.locale.bindObjectProperty(s,"title","locale.sequencerController.previousSong"),s.onclick=()=>this.switchToPreviousSong();let r=Qt("Next song",is(ze));this.locale.bindObjectProperty(r,"title","locale.sequencerController.nextSong"),r.onclick=()=>this.switchToNextSong();let a=Qt("Loop this",ts(ze));this.locale.bindObjectProperty(a,"title","locale.sequencerController.loopThis");let A=()=>{this.seq.loop?this.seq.loop=!1:(this.seq.loop=!0,this.seq.currentTime>=this.seq.duration&&(this.seq.currentTime=0)),a.firstElementChild.setAttribute("fill",this.seq.loop?this.iconColor:this.iconDisabledColor)};a.onclick=A,this.loopButton=a;let d=Qt("Shuffle songs",gs(ze));this.locale.bindObjectProperty(d,"title","locale.sequencerController.shuffle"),d.onclick=()=>{this.seq.shuffleSongs=!this.seq.shuffleSongs,d.firstElementChild.setAttribute("fill",this.seq.shuffleSongs?this.iconColor:this.iconDisabledColor),d.firstElementChild.setAttribute("stroke",this.seq.shuffleSongs?this.iconColor:this.iconDisabledColor)},d.firstElementChild.setAttribute("fill",this.iconDisabledColor),d.firstElementChild.setAttribute("stroke",this.iconDisabledColor);let u=Qt("Playback speed",ds(ze));this.locale.bindObjectProperty(u,"title","locale.sequencerController.playbackRate");let l=document.createElement("input");l.type="number",l.id="playback_rate_slider";let g=1,h=60;l.min=g.toString(),l.max=h.toString(),l.value="20";let C=Qo(l,!0),p=document.createElement("div");p.classList.add("playback_rate_slider_wrapper"),p.appendChild(C);let f=C.firstElementChild.lastElementChild,S=C.lastElementChild;S.contentEditable="true",S.textContent=`${this.seq.playbackRate*100}%`,f.oninput=()=>{let w=parseInt(f.value),c=w>20?(w-20)*10+100:w*5;this.seq.playbackRate=c/100,S.textContent=`${Math.round(c)}%`},S.onkeydown=w=>{w.stopPropagation(),w.stopImmediatePropagation()},S.oninput=w=>{w.stopImmediatePropagation();let c=parseInt(S.textContent),b=isNaN(c)?100:c;b<1&&(b=100),this.seq.playbackRate=b/100;let D=Math.max(g,Math.min(h,b>100?(b-100)/10+20:b/5));f.value=D.toString(),C.querySelector(".settings_visual_wrapper").style.setProperty("--visual-width",`${(D-g)/(h-g)*100}%`)},S.onblur=()=>{S.textContent=`${Math.round(this.seq.playbackRate*100)}%`},p.classList.add("hidden");let M=!1;u.onclick=()=>{M=!M,p.classList.toggle("hidden"),u.firstElementChild.setAttribute("fill",M?this.iconColor:this.iconDisabledColor)},u.firstElementChild.setAttribute("fill",this.iconDisabledColor);let y=Qt("Show lyrics",os(ze));this.locale.bindObjectProperty(y,"title","locale.sequencerController.lyrics.show"),y.firstElementChild.setAttribute("fill",this.iconDisabledColor);let k=()=>{this.lyricsElement.mainDiv.classList.toggle("lyrics_show"),y.firstElementChild.setAttribute("fill",this.lyricsElement.mainDiv.classList.contains("lyrics_show")?this.iconColor:this.iconDisabledColor)};this.toggleLyrics=k,y.onclick=k,t.appendChild(s),t.appendChild(a),t.appendChild(d),t.appendChild(o),t.appendChild(y),t.appendChild(u),t.appendChild(r),this.controls.appendChild(e),e.appendChild(this.progressBar),this.controls.appendChild(this.progressTime),this.controls.appendChild(p),this.controls.appendChild(t),document.addEventListener("keydown",w=>{switch(w.key.toLowerCase()){case Ee.playPause:w.preventDefault(),n();break;case Ee.toggleLoop:w.preventDefault(),A();break;case Ee.toggleLyrics:w.preventDefault(),k();break;case Ee.seekBackwards:w.preventDefault(),this.seq.currentTime-=5,o.innerHTML=Pt(ze);break;case Ee.seekForwards:w.preventDefault(),this.seq.currentTime+=5,o.innerHTML=Pt(ze);break;case Ee.previousSong:this.switchToPreviousSong();break;case Ee.nextSong:this.switchToNextSong();break;default:if(!isNaN(parseFloat(w.key))){w.preventDefault();let c=parseInt(w.key);0<=c&&c<=9&&(this.seq.currentTime=this.seq.duration*(c/10),o.innerHTML=Pt(ze))}break}})}_updateInterval(){let e=this.seq.currentTime;if(this.lastTimeUpdate===e)return;this.lastTimeUpdate=e,this.progressBar.style.width=`${e/this.seq.duration*100}%`;let t=Lt(e),o=Lt(this.seq.duration);this.progressTime.innerText=`${t.time} / ${o.time}`,this.requiresTextUpdate&&(this.updateOtherTextEvents(),this.requiresTextUpdate=!1)}setSliderInterval(){setInterval(this._updateInterval.bind(this),100)}loadLyricData(){if(this.currentLyrics=this.seq.midiData.lyrics,this.currentLyricsString=this.currentLyrics.map(e=>this.decodeTextFix(e.buffer)),this.currentLyrics.length===0)this.currentLyricsString=[this.locale.getLocaleString("locale.sequencerController.lyrics.noLyrics")];else{let e=!0;for(let t=1;t<this.currentLyricsString.length-1;t+=2){let o=this.currentLyricsString[t],n=this.currentLyricsString[t+1];if(o.trim()===""||n.trim()===""){t-=1;continue}if(o.trim()!==n.trim()){e=!1;break}}if(e)for(let t=0;t<this.currentLyricsString.length;t+=2){if(this.currentLyricsString[t]===`
`){t-=1;continue}this.currentLyricsString[t]=""}}this.currentLyricsString=this.currentLyricsString.map(e=>e.replace("/",`
`)),this.lyricsElement.text.main.innerHTML="",this.lyricsElement.text.separateLyrics=[];for(let e of this.currentLyricsString){let t=document.createElement("span");t.innerText=e,t.classList.add("lyrics_text_gray"),this.lyricsElement.text.main.appendChild(t),this.lyricsElement.text.separateLyrics.push(t)}}};ht.prototype.createNavigatorHandler=hs;ht.prototype.updateTitleAndMediaStatus=Is;ht.prototype.createLyrics=ps;ht.prototype.setLyricsText=Cs;ht.prototype.updateOtherTextEvents=Es;function ys(){this.controllers.forEach(i=>{i.voiceMeter.hide(),i.pitchWheel.hide();for(let e of Object.values(i.controllerMeters))e.hide();i.transpose.hide()})}function Ss(){this.controllers.forEach(i=>{i.voiceMeter.show(),i.pitchWheel.show();for(let e of Object.values(i.controllerMeters))e.show();i.transpose.show()})}function ws(){this.mainControllerDiv.classList.toggle("synthui_controller_light"),this.mainButtons.forEach(i=>{i.classList.toggle("synthui_button"),i.classList.toggle("synthui_button_light")}),this.mainMeters.forEach(i=>{i.toggleMode(!0)}),this.controllers.forEach(i=>{i.voiceMeter.toggleMode(),i.pitchWheel.toggleMode(),i.pan.toggleMode(),i.expression.toggleMode(),i.volume.toggleMode(),i.mod.toggleMode(),i.chorus.toggleMode(),i.reverb.toggleMode(),i.brightness.toggleMode(),i.preset.toggleMode(),i.drumsToggle.classList.toggle("mute_button_light"),i.muteButton.classList.toggle("mute_button_light")})}var $e=class{constructor(e="none",t,o,n,s=0,r=100,a,A=!1,d=void 0,u=void 0,l=void 0){if(this.meterText="",o.bindObjectProperty(this,"meterText",t+".title"),this.min=s,this.max=r,this.currentValue=-1,this.isShown=!0,this.isVisualValueSet=!0,this.isLocked=!1,this.lockCallback=u,this.unlockCallback=l,this.defaultValue=a,this.div=document.createElement("div"),this.div.classList.add("voice_meter"),this.div.classList.add("controller_element"),e!=="none"&&e!==""&&(this.div.style.borderColor=e),o.bindObjectProperty(this.div,"title",t+".description",n),this.bar=document.createElement("div"),this.bar.classList.add("voice_meter_bar"),this.bar.style.background=e,this.div.appendChild(this.bar),this.text=document.createElement("p"),this.text.classList.add("voice_meter_text"),this.div.appendChild(this.text),this.isActive=!1,A){if(d===void 0)throw new Error("No editable function given!");this.div.onmousedown=g=>{g.preventDefault(),g.button===0?this.isActive=!0:this.lockMeter()},this.div.onmousemove=g=>{if(!this.isActive)return;let h=g.currentTarget.getBoundingClientRect(),C=h.left,p=h.width,f=g.clientX-C,S=Math.max(0,Math.min(1,f/p));d(S*(r-s)+s)},this.div.onmouseup=()=>this.isActive=!1,this.div.onmouseleave=g=>{this.div.onmousemove(g),this.isActive=!1},this.text.oncontextmenu=g=>{g.preventDefault()},this.div.onclick=g=>{g.preventDefault(),this.isActive=!0,this.div.onmousemove(g),this.isActive=!1,_e&&this.lockMeter()},this.div.classList.add("editable")}this.update(a)}lockMeter(){this.lockCallback!==void 0&&(this.isLocked?(this.text.classList.remove("locked_meter"),this.unlockCallback()):(this.text.classList.add("locked_meter"),this.lockCallback()),this.isLocked=!this.isLocked)}toggleMode(e=!1){e&&(this.bar.classList.toggle("voice_meter_light_color"),this.div.classList.toggle("voice_meter_light_color")),this.text.classList.toggle("voice_meter_text_light")}show(){if(this.isShown=!0,!this.isVisualValueSet){let e=Math.max(0,Math.min((this.currentValue-this.min)/(this.max-this.min),1));this.bar.style.width=`${e*100}%`,this.text.textContent=this.meterText+(Math.round(this.currentValue*100)/100).toString(),this.isVisualValueSet=!0}}hide(){this.isShown=!1}update(e,t=!1){if(!(e===this.currentValue&&t===!1))if(this.currentValue=e,this.isShown){let o=Math.max(0,Math.min((e-this.min)/(this.max-this.min),1));this.bar.style.width=`${o*100}%`,this.text.textContent=this.meterText+(Math.round(e*100)/100).toString(),this.isVisualValueSet=!0}else this.isVisualValueSet=!1}};var Ds=["Acoustic Grand Piano","Bright Acoustic Piano","Electric Grand Piano","Honky-tonk Piano","Electric Piano 1","Electric Piano 2","Harpsichord","Clavi","Celesta","Glockenspiel","Music Box","Vibraphone","Marimba","Xylophone","Tubular Bells","Dulcimer","Drawbar Organ","Percussive Organ","Rock Organ","Church Organ","Reed Organ","Accordion","Harmonica","Tango Accordion","Acoustic Guitar (nylon)","Acoustic Guitar (steel)","Electric Guitar (jazz)","Electric Guitar (clean)","Electric Guitar (muted)","Overdriven Guitar","Distortion Guitar","Guitar Harmonics","Acoustic Bass","Electric Bass (finger)","Electric Bass (pick)","Fretless Bass","Slap Bass 1","Slap Bass 2","Synth Bass 1","Synth Bass 2","Violin","Viola","Cello","Contrabass","Tremolo Strings","Pizzicato Strings","Orchestral Harp","Timpani","String Ensemble 1","String Ensemble 2","Synth Strings 1","Synth Strings 2","Choir Aahs","VoiceGroup Oohs","Synth Choir","Orchestra Hit","Trumpet","Trombone","Tuba","Muted Trumpet","French Horn","Brass Section","Synth Brass 1","Synth Brass 2","Soprano Sax","Alto Sax","Tenor Sax","Baritone Sax","Oboe","English Horn","Bassoon","Clarinet","Piccolo","Flute","Recorder","Pan Flute","Blown Bottle","Shakuhachi","Whistle","Ocarina","Lead 1 (square)","Lead 2 (sawtooth)","Lead 3 (calliope)","Lead 4 (chiff)","Lead 5 (charang)","Lead 6 (voice)","Lead 7 (fifths)","Lead 8 (bass + lead)","Pad 1 (new age)","Pad 2 (warm)","Pad 3 (polysynth)","Pad 4 (choir)","Pad 5 (bowed)","Pad 6 (metallic)","Pad 7 (halo)","Pad 8 (sweep)","FX 1 (rain)","FX 2 (soundtrack)","FX 3 (crystal)","FX 4 (atmosphere)","FX 5 (brightness)","FX 6 (goblins)","FX 7 (echoes)","FX 8 (sci-fi)","Sitar","Banjo","Shamisen","Koto","Kalimba","Bagpipe","Fiddle","Shanai","Tinkle Bell","Agogo","Steel Drums","Woodblock","Taiko Drum","Melodic Tom","Synth Drum","Reverse Cymbal","Guitar Fret Noise","Breath Noise","Seashore","Bird Tweet","Telephone Ring","Attack Helicopter","Applause","Gunshot"];var ti=class{constructor(e,t,o,n,s=void 0,r=void 0){this.elements=e.map(a=>({name:a.name,program:a.program,bank:a.bank,stringified:`${a.bank.toString().padStart(3,"0")}:${a.program.toString().padStart(3,"0")} ${a.name}`})),this.elements.length>0?this.value=`${this.elements[0].bank}:${this.elements[0].program}`:this.value="",this.mainButton=document.createElement("button"),this.mainButton.classList.add("voice_selector"),this.mainButton.classList.add("controller_element"),t.bindObjectProperty(this.mainButton,"title",o+".description",n),this.locale=t,this.localePath=o,this.localeArgs=n,this.reload(),this.mainButton.onclick=()=>{this.showSelectionMenu()},this.editCallback=s,this.selectionMenu=void 0,this.lockCallback=r,this.locked=!1,this.isWindowShown=!1}showSelectionMenu(){this.selectionMenu=document.createElement("div"),this.selectionMenu.classList.add("voice_selector_wrapper"),document.getElementsByClassName("spessasynth_main")[0].appendChild(this.selectionMenu);let e=document.createElement("div");e.classList.add("voice_selector_window");let t=document.createElement("h2");this.locale.bindObjectProperty(t,"textContent",this.localePath+".selectionPrompt",this.localeArgs),e.appendChild(t);let o=document.createElement("div");o.classList.add("voice_selector_search_wrapper"),e.appendChild(o);let n=document.createElement("input");n.type="text",this.locale.bindObjectProperty(n,"placeholder",this.localePath+".searchPrompt"),o.appendChild(n),n.onkeydown=d=>d.stopPropagation();let s=document.createElement("div");s.innerHTML=this.locked?Bo(ke):Hi(ke),this.locale.bindObjectProperty(s,"title",le+"channelController.presetReset.description",this.localeArgs),s.classList.add("voice_reset"),this.mainButton.classList.contains("voice_selector_light")&&s.classList.add("voice_reset_light"),s.onclick=()=>{this.locked=!this.locked,this.lockCallback(this.locked),this.mainButton.classList.toggle("locked_selector"),this.locked?s.innerHTML=Bo(ke):s.innerHTML=Hi(ke)},o.appendChild(s),this.presetLock=s;let r=document.createElement("div");r.classList.add("voice_selector_table_wrapper"),e.appendChild(r);let A=this.generateTable(r,this.elements).querySelector(".voice_selector_selected");n.oninput=d=>{d.stopPropagation();let u=n.value,l=this.elements.filter(p=>p.stringified.search(new RegExp(u,"i"))>=0);if(l.length===this.elements.length||l.length===0)return;r.replaceChildren();let g=this.generateTable(r,l),h=g.querySelector(".voice_selector_selected");if(h){A=h;return}let C=g.querySelector(".voice_selector_option");C.classList.add("voice_selector_selected"),A=C},n.addEventListener("keydown",d=>{switch(d.key){case"Enter":let u=A.getAttribute("bank"),l=A.getAttribute("program"),g=`${u}:${l}`;if(this.value===g){this.hideSelectionMenu();return}this.editCallback(g),this.locked=!0,this.presetLock.innerHTML=Bo(ke),this.hideSelectionMenu();break;case"ArrowDown":let h=A.nextElementSibling;for(;h;){if(h.classList.contains("voice_selector_option")){A.classList.remove("voice_selector_selected"),h.classList.add("voice_selector_selected"),A=h;return}h=h.nextElementSibling}break;case"ArrowUp":let C=A.previousElementSibling;for(;C;){if(C.classList.contains("voice_selector_option")){A.classList.remove("voice_selector_selected"),C.classList.add("voice_selector_selected"),A=C;return}C=C.previousElementSibling}break}}),e.onclick=d=>{d.stopPropagation()},this.selectionMenu.appendChild(e),this.selectionMenu.onclick=d=>{d.stopPropagation(),this.hideSelectionMenu()},this.isWindowShown=!0,_e||n.focus()}generateTable(e,t){let o=document.createElement("table");o.classList.add("voice_selector_table");let n=parseInt(this.value.split(":")[0]),s=parseInt(this.value.split(":")[1]),r=-20;for(let a of t){let A=document.createElement("tr"),d=a.program;if(A.classList.add("voice_selector_option"),A.setAttribute("program",d.toString()),A.setAttribute("bank",a.bank.toString()),d===s&&a.bank===n&&(A.classList.add("voice_selector_selected"),setTimeout(()=>{A.scrollIntoView({behavior:"instant",block:"center",inline:"center"})},20)),A.onclick=()=>{let p=`${a.bank}:${d}`;if(this.value===p){this.hideSelectionMenu();return}this.editCallback(p),this.locked=!0,this.presetLock.innerHTML=Bo(ke),this.hideSelectionMenu()},d!==r&&(r=d,a.bank!==128)){let p=document.createElement("tr"),f=document.createElement("th");f.colSpan=3,f.textContent=Ds[r],p.appendChild(f),o.appendChild(p)}let u=`${a.program.toString().padStart(3,"0")}`,l=`${a.bank.toString().padStart(3,"0")}`,g=document.createElement("td");g.classList.add("voice_selector_preset_name"),g.textContent=a.name;let h=document.createElement("td");g.classList.add("voice_selector_preset_program"),h.textContent=u;let C=document.createElement("td");g.classList.add("voice_selector_preset_program"),C.textContent=l,A.appendChild(C),A.appendChild(h),A.appendChild(g),o.appendChild(A)}return e.appendChild(o),o}hideSelectionMenu(){document.getElementsByClassName("spessasynth_main")[0].removeChild(this.selectionMenu),this.selectionMenu=void 0,this.isWindowShown=!1}toggleMode(){this.mainButton.classList.toggle("voice_selector_light")}reload(e=this.elements){if(this.elements=e.map(t=>({name:t.name,program:t.program,bank:t.bank,stringified:`${t.bank.toString().padStart(3,"0")}:${t.program.toString().padStart(3,"0")} ${t.name}`})),this.elements.length>0){let t=this.elements[0],o=t.bank,n=parseInt(this.value.split(":")[1]),s=n;this.elements.find(r=>r.program===n)===void 0&&(s=t.program),this.mainButton.textContent=this.getString(`${o}:${s}`)}}set(e){if(this.value=e,this.reload(),this.mainButton.textContent=this.getString(this.value),this.isWindowShown){let t=this.selectionMenu.getElementsByClassName("voice_selector_selected")[0];t!==void 0&&t.classList.remove("voice_selector_selected");let o=this.selectionMenu.getElementsByClassName("voice_selector_table")[0],n=parseInt(this.value.split(":")[0]),s=parseInt(this.value.split(":")[1]);for(let r of o.rows){if(r.cells.length===1)continue;let a=parseInt(r.cells[0].textContent),A=parseInt(r.cells[1].textContent);a===n&&A===s&&(r.classList.add("voice_selector_selected"),r.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}))}}}getString(e){let t=e.split(":"),o=parseInt(t[0]),n=parseInt(t[1]),s=this.elements.find(r=>r.bank===o&&r.program===n);return s?o===128||this.elements.filter(r=>r.program===n&&r.bank!==128).length<2?`${n}. ${s.name}`:`${o}:${n} ${s.name}`:""}};var ke=32;function ks(i){this.soloChannels=new Set;let e=document.createElement("div");e.classList.add("channel_controller");let t={};t.controllerMeters={},t.controller=e;let o=new $e(this.channelColors[i%this.channelColors.length],le+"channelController.voiceMeter",this.locale,[i+1],0,100,0);o.bar.classList.add("voice_meter_bar_smooth"),e.appendChild(o.div),t.voiceMeter=o;let n=new $e(this.channelColors[i%this.channelColors.length],le+"channelController.pitchBendMeter",this.locale,[i+1],-8192,8191,0,!0,D=>{let Y=n.isLocked;Y&&this.synth.lockController(i,Tt+de.pitchWheel,!1),D=Math.round(D)+8192;let K=D>>7,U=D&127;this.synth.pitchWheel(i,K,U),Y&&this.synth.lockController(i,Tt+de.pitchWheel,!0)},()=>this.synth.lockController(i,Tt+de.pitchWheel,!0),()=>this.synth.lockController(i,Tt+de.pitchWheel,!1));e.appendChild(n.div),t.pitchWheel=n;let s=(D,Y,K)=>{K.isLocked?(this.synth.lockController(i,D,!1),this.synth.controllerChange(i,D,Y),this.synth.lockController(i,D,!0)):this.synth.controllerChange(i,D,Y)},r=(D,Y,K)=>{let U=new $e(this.channelColors[i%this.channelColors.length],le+Y,this.locale,[i+1],0,127,K,!0,J=>s(D,Math.round(J),U),()=>this.synth.lockController(i,D,!0),()=>this.synth.lockController(i,D,!1));return t.controllerMeters[D]=U,U},a=r(R.pan,"channelController.panMeter",64);e.appendChild(a.div);let A=r(R.expressionController,"channelController.expressionMeter",127);e.appendChild(A.div);let d=r(R.mainVolume,"channelController.volumeMeter",100);e.appendChild(d.div);let u=r(R.modulationWheel,"channelController.modulationWheelMeter",0);e.appendChild(u.div);let l=r(R.chorusDepth,"channelController.chorusMeter",0);e.appendChild(l.div);let g=r(R.reverbDepth,"channelController.reverbMeter",0);e.appendChild(g.div);let h=r(R.brightness,"channelController.filterMeter",64);e.appendChild(h.div);let C=r(R.attackTime,"channelController.attackMeter",64);e.appendChild(C.div);let p=r(R.releaseTime,"channelController.releaseMeter",64);e.appendChild(p.div);let f=r(R.portamentoTime,"channelController.portamentoTimeMeter",0);e.appendChild(f.div);let S=r(R.portamentoControl,"channelController.portamentoControlMeter",60);e.appendChild(S.div);let M=r(R.filterResonance,"channelController.resonanceMeter",64);e.appendChild(M.div);let y=new $e(this.channelColors[i%this.channelColors.length],le+"channelController.transposeMeter",this.locale,[i+1],-36,36,0,!0,D=>{D=Math.round(D),this.synth.transposeChannel(i,D,!0),y.update(D)});e.appendChild(y.div),t.transpose=y;let k=new ti([],this.locale,le+"channelController.presetSelector",[i+1],async D=>{let Y=D.split(":");this.synth.lockController(i,Fe,!1),this.synth.controllerChange(i,R.bankSelect,parseInt(Y[0]),!0),this.synth.programChange(i,parseInt(Y[1]),!0),k.mainButton.classList.add("locked_selector"),this.synth.lockController(i,Fe,!0)},D=>this.synth.lockController(i,Fe,D));e.appendChild(k.mainButton),t.preset=k;let w=document.createElement("div");w.innerHTML=jt(ke),this.locale.bindObjectProperty(w,"title",le+"channelController.soloButton.description",[i+1]),w.classList.add("controller_element"),w.classList.add("mute_button"),w.onclick=()=>{if(this.soloChannels.has(i)?this.soloChannels.delete(i):this.soloChannels.add(i),this.soloChannels.size===0||this.soloChannels.size>=this.synth.channelsAmount){for(let D=0;D<this.synth.channelsAmount;D++)this.controllers[D].soloButton.innerHTML=jt(ke),this.synth.muteChannel(D,this.controllers[D].muteButton.hasAttribute("is_muted"));this.soloChannels.size>=this.synth.channelsAmount&&this.soloChannels.clear();return}for(let D=0;D<this.synth.channelsAmount;D++)this.soloChannels.has(D)?(this.controllers[D].soloButton.innerHTML=ss(ke),this.synth.muteChannel(D,this.controllers[D].muteButton.hasAttribute("is_muted"))):(this.controllers[D].soloButton.innerHTML=jt(ke),this.synth.muteChannel(D,!0))},e.appendChild(w),t.soloButton=w;let c=document.createElement("div");c.innerHTML=Eo(ke),this.locale.bindObjectProperty(c,"title",le+"channelController.muteButton.description",[i+1]),c.classList.add("controller_element"),c.classList.add("mute_button"),c.onclick=()=>{if(c.hasAttribute("is_muted")){c.removeAttribute("is_muted");let D=this.soloChannels.size===0||this.soloChannels.has(i);this.synth.muteChannel(i,!D),c.innerHTML=Eo(ke)}else this.synth.muteChannel(i,!0),c.setAttribute("is_muted","true"),c.innerHTML=As(ke)},e.appendChild(c),t.muteButton=c;let b=document.createElement("div");return b.innerHTML=i===Je?Zo(ke):jo(ke),this.locale.bindObjectProperty(b,"title",le+"channelController.drumToggleButton.description",[i+1]),b.classList.add("controller_element"),b.classList.add("mute_button"),b.onclick=()=>{k.mainButton.classList.contains("locked_selector")&&(this.synth.lockController(i,Fe,!1),k.mainButton.classList.remove("locked_selector")),this.synth.setDrums(i,!this.synth.channelProperties[i].isDrum)},e.appendChild(b),t.drumsToggle=b,t}function bs(){let i=this.uiDiv.getElementsByClassName("synthui_controller")[0];this.controllers=[];for(let e=0;e<this.synth.channelsAmount;e++){let t=this.createChannelController(e);this.controllers.push(t),i.appendChild(t.controller)}this.setEventListeners(),setInterval(this.updateVoicesAmount.bind(this),100),this.hideControllers()}function It(i,e,t){if(e.textContent&&(i.textContent=e.textContent),e.translatePathTitle){if(!t)throw new Error("Translate path title provided but no locale provided.");t.bindObjectProperty(i,"textContent",e.translatePathTitle+".title",e?.translatePathTitleProps),t.bindObjectProperty(i,"title",e.translatePathTitle+".description",e?.translatePathTitleProps)}}function vs(i,e){switch(i.type){case"button":let t=document.createElement("button");return It(t,i,e),yt(i,[t]),t;case"text":let o=document.createElement("p");return It(o,i,e),yt(i,[o]),o;case"input":let n=document.createElement("div");n.classList.add("notification_input_wrapper");let s=document.createElement("input");It(s,i,e),s.addEventListener("keydown",k=>k.stopPropagation());let r=document.createElement("label");return It(r,i,e),yt(i,[s,r]),n.append(r),n.appendChild(s),n;case"select":let a=document.createElement("div");a.classList.add("notification_input_wrapper");let A=document.createElement("select");if(i.selectOptions===void 0)throw new Error("Select but no options given?");for(let k of Object.entries(i.selectOptions)){let w=document.createElement("option");w.value=k[0],w.textContent=k[1],A.appendChild(w)}let d=document.createElement("label");return It(d,i,e),yt(i,[A,d]),a.appendChild(d),a.appendChild(A),a;case"file":let u=document.createElement("label");u.classList.add("notification_input_wrapper");let l=document.createElement("input");l.type="file";let g=document.createElement("label");g.classList.add("notification_file_button"),It(g,i,e);let h=document.createElement("label");return It(h,i,e),yt(i,[g,l,h]),g.appendChild(l),u.append(h),u.appendChild(g),u;case"progress":let C=document.createElement("div");C.classList.add("notification_progress_background");let p=document.createElement("div");return p.classList.add("notification_progress"),yt(i,[p,C]),C.appendChild(p),C;case"toggle":return La(i,e);case"range":let f=document.createElement("input");f.type="range";let S=document.createElement("label");yt(i,[f,S]),It(S,i,e);let M=Qo(f,!1),y=document.createElement("div");return y.classList.add("notification_slider_wrapper"),y.appendChild(S),y.appendChild(M),y}}function yt(i,e){if(i.attributes)for(let[t,o]of Object.entries(i.attributes))for(let n of e)t.startsWith("onchange")?n[t]=o:n.setAttribute(t,o);if(i.listeners)for(let[t,o]of Object.entries(i.listeners))for(let n of e)n.addEventListener(t,o)}function La(i,e){let t=document.createElement("label");t.classList.add("notification_switch_wrapper");let o=document.createElement("label");It(o,i,e);let n=document.createElement("input");n.type="checkbox",yt(i,[o,n]);let s=document.createElement("div");s.classList.add("notification_switch"),s.appendChild(n);let r=document.createElement("div");return r.classList.add("notification_switch_slider"),s.appendChild(r),t.appendChild(o),t.appendChild(s),t}var Ga=13,Ta=0,yo={};function re(i,e,t=Ga,o=!0,n=void 0,s=void 0,r=void 0){let a=document.createElement("div"),A=Ta++;a.classList.add("notification"),a.innerHTML=`
    <div class='top'>
        <h2 class='notification_title'>${i}</h2>
        <span class='close_btn'>\xD7</span>
    </div>`;let d=document.createElement("div");if(d.classList.add("notification_content"),s)for(let[l,g]of Object.entries(s))d.style[l]=g;a.appendChild(d);for(let l of e){let g=vs(l,n);l.onClick&&(g.onclick=()=>l.onClick({div:a,id:A},g)),d.appendChild(g)}o?a.getElementsByClassName("close_btn")[0].onclick=()=>{ie(A)}:a.getElementsByClassName("close_btn")[0].style.display="none",setTimeout(()=>{a.classList.add("drop")},75);let u=setTimeout(()=>{ie(A)},t*1e3+75);return document.getElementsByClassName("notification_field")[0].appendChild(a),yo[A]={div:a,timeout:u,onclose:r},{div:a,id:A}}function ie(i){if(yo[i]===void 0)return;let e=yo[i],t=e.div;clearTimeout(yo[i].timeout),t.classList.remove("drop"),setTimeout(()=>t.parentElement.removeChild(t),500),e.onclose&&e.onclose(),yo[i]=void 0}var Le={nodesAmount:tt.nodesAmount,defaultDelay:tt.defaultDelay,delayVariation:tt.delayVariation,stereoDifference:tt.stereoDifference,oscillatorFrequency:tt.oscillatorFrequency,oscillatorFrequencyVariation:tt.oscillatorFrequencyVariation,oscillatorGain:tt.oscillatorGain};function xs(i,e,t){let o=e+"effectsConfig.",n=re(i.getLocaleString(o+"button.title"),[{type:"button",translatePathTitle:e+"disableCustomVibrato",onClick:(s,r)=>{t.disableGSNRPparams(),r.parentNode.removeChild(r)}},{type:"text",translatePathTitle:o+"reverbConfig",attributes:{style:"margin-bottom: -0.5rem"}},{type:"file",translatePathTitle:o+"reverbConfig.impulseResponse",attributes:{accept:"audio/*"},listeners:{input:async s=>{if(s.target.files.length===0)return;s.stopImmediatePropagation(),s.preventDefault();let r=s.target.parentElement.parentElement;r.textContent=i.getLocaleString("locale.synthInit.genericLoading");let a=await t.context.decodeAudioData(await s.target.files[0].arrayBuffer());t.setReverbResponse(a),r.textContent=i.getLocaleString("locale.synthInit.done"),x("%cReverb response set!",B.info)}}},{type:"text",translatePathTitle:o+"chorusConfig",attributes:{style:"margin-bottom: -0.5rem"}},{type:"input",translatePathTitle:o+"chorusConfig.nodesAmount",attributes:{type:"number",min:"0",value:Le.nodesAmount,setting:"nodes"}},{type:"input",translatePathTitle:o+"chorusConfig.defaultDelay",attributes:{type:"number",min:"0",value:Le.defaultDelay,setting:"delay"}},{type:"input",translatePathTitle:o+"chorusConfig.delayVariation",attributes:{type:"number",min:"0",value:Le.delayVariation,setting:"delay-var"}},{type:"input",translatePathTitle:o+"chorusConfig.stereoDifference",attributes:{type:"number",min:"0",value:Le.stereoDifference,setting:"stereo"}},{type:"input",translatePathTitle:o+"chorusConfig.oscillatorFrequency",attributes:{type:"number",min:"0",value:Le.oscillatorFrequency,setting:"osc-freq"}},{type:"input",translatePathTitle:o+"chorusConfig.frequencyVariation",attributes:{type:"number",min:"0",value:Le.oscillatorFrequencyVariation,setting:"freq-var"}},{type:"input",translatePathTitle:o+"chorusConfig.oscillatorGain",attributes:{type:"number",min:"0",value:Le.oscillatorGain,setting:"osc-gain"}},{type:"button",translatePathTitle:o+"chorusConfig.apply",onClick:s=>{Le.nodesAmount=parseFloat(s.div.querySelector("input[setting='nodes']").value),Le.defaultDelay=parseFloat(s.div.querySelector("input[setting='delay']").value),Le.delayVariation=parseFloat(s.div.querySelector("input[setting='delay-var']").value),Le.stereoDifference=parseFloat(s.div.querySelector("input[setting='stereo']").value),Le.oscillatorFrequency=parseFloat(s.div.querySelector("input[setting='osc-freq']").value),Le.defaultDelay=parseFloat(s.div.querySelector("input[setting='delay']").value),Le.oscillatorFrequencyVariation=parseFloat(s.div.querySelector("input[setting='freq-var']").value),Le.oscillatorGain=parseFloat(s.div.querySelector("input[setting='osc-gain']").value),t.setChorusConfig(Le)}}],999999,!0,i);return n.div.onclick=s=>s.stopImmediatePropagation(),n}var Be="locale.synthesizerController.keyModifiers.";async function Ms(i,e){return new Promise(t=>{let o=re(i.getLocaleString(Be+"selectKey.title"),[{type:"text",textContent:i.getLocaleString(Be+"selectKey.prompt")}],999999,!1,i);e.onNotePressed=n=>{ie(o.id),e.onNotePressed=void 0,t(n)}})}async function Fs(i,e,t,o){let n=await Ms(e,t),s=(g,h,C,p)=>{let f={type:"number",min:h.toString(),max:C.toString(),value:p.toString()};return f[g]="true",f},r={};r.unchanged=e.getLocaleString(Be+"modifyKey.preset.unchanged");for(let g of o.toSorted((h,C)=>h.presetName<C.presetName?-1:h.presetName>C.presetName?1:0))r[g.presetName]=g.presetName;let a=i.keyModifierManager.getModifier(t.channel,n),A=a?.velocity??-1,d=re(e.getLocaleString(Be+"modifyKey.title"),[{type:"text",translatePathTitle:Be+"selectedKey",translatePathTitleProps:[n.toString()]},{type:"button",textContent:e.getLocaleString(Be+"selectKey.change"),onClick:async g=>{ie(g.id),await Fs(i,e,t,o)}},{type:"input",translatePathTitle:Be+"selectedChannel",attributes:s("chan",0,(i.channelsAmount-1).toString(),t.channel.toString())},{type:"input",translatePathTitle:Be+"modifyKey.velocity",attributes:s("vel",0,127,A)},{type:"select",translatePathTitle:Be+"modifyKey.preset",attributes:{"preset-selector":"true"},selectOptions:r},{type:"button",translatePathTitle:Be+"modifyKey.apply",onClick:g=>{let h=parseInt(g.div.querySelector("input[chan]").value)??-1,C=parseInt(g.div.querySelector("input[vel]").value)??-1,p=g.div.querySelector("select[preset-selector]").value,f=-1,S=-1;if(p!=="unchanged"){let M=o.find(y=>y.presetName===p);f=M.bank,S=M.program}i.keyModifierManager.addModifier(h,n,{velocity:C,patch:{program:S,bank:f}}),ie(g.id)}}],99999,!0,e),u=a?.patch?.program??-1,l=a?.patch?.bank??-1;l!==-1&&u!==-1&&(d.div.querySelector("select[preset-selector]").value=o.find(g=>g.bank===l&&g.program===u).presetName)}async function Rs(i,e,t){let o=await Ms(e,t);re(e.getLocaleString(Be+"removeModification.title"),[{type:"text",translatePathTitle:Be+"selectedKey",translatePathTitleProps:[o.toString()]},{type:"button",textContent:e.getLocaleString(Be+"selectKey.change"),onClick:async n=>{ie(n.id),await Rs(i,e,t)}},{type:"input",translatePathTitle:Be+"selectedChannel",attributes:{chan:"true",type:"number",value:t.channel.toString(),min:"0",max:(i.channelsAmount-1).toString()}},{type:"button",translatePathTitle:Be+"removeModification.remove",onClick:n=>{let s=parseInt(n.div.querySelector("input[chan]").value)??-1;i.keyModifierManager.deleteModifier(s,o),ie(n.id)}}],99999,!0,e)}function Ls(i,e,t,o){re(e.getLocaleString(Be+"mainTitle"),[{type:"text",textContent:e.getLocaleString(Be+"detailedDescription"),attributes:{style:"white-space: pre; font-style: italic;"}},{type:"text",textContent:e.getLocaleString(Be+"prompt")},{type:"button",translatePathTitle:Be+"modifyKey",onClick:n=>{ie(n.id),Fs(i,e,t,o).then()}},{type:"button",translatePathTitle:Be+"removeModification",onClick:n=>{ie(n.id),Rs(i,e,t).then()}},{type:"button",translatePathTitle:Be+"resetModifications",onClick:n=>{ie(n.id),re(e.getLocaleString(Be+"resetModifications.confirmation.title"),[{type:"text",textContent:e.getLocaleString(Be+"resetModifications.confirmation.description")},{type:"button",textContent:e.getLocaleString("locale.yes"),onClick:s=>{ie(s.id),i.keyModifierManager.clearModifiers()}},{type:"button",textContent:e.getLocaleString("locale.no"),onClick:s=>{ie(s.id)}}],99999,!0,e)}}],9999999,!0,e)}function Gs(){this.hideOnDocClick=!1;let i=this.synth.highPerformanceMode?{checked:"checked"}:{};re(this.locale.getLocaleString(le+"advancedConfiguration.title"),[{type:"button",translatePathTitle:le+"effectsConfig.button",onClick:e=>{if(ie(e.id),this.effectsConfigWindow!==void 0){ie(this.effectsConfigWindow),this.effectsConfigWindow=void 0;return}this.effectsConfigWindow=xs(this.locale,le,this.synth).id}},{type:"button",translatePathTitle:le+"keyModifiers.button",onClick:e=>{ie(e.id),Ls(this.synth,this.locale,this.keyboard,this.presetList)}},{type:"input",translatePathTitle:le+"voiceCap",listeners:{input:e=>{this.synth.voiceCap=parseInt(e.target.value)||100}},attributes:{type:"number",min:"1",max:"1000",value:this.synth.voiceCap.toString()}},{type:"toggle",translatePathTitle:le+"blackMidiMode",attributes:i,listeners:{input:e=>this.synth.highPerformanceMode=e.target.checked}}],99999999,!0,this.locale)}function Ts(){let i=document.createElement("div");i.classList.add("controls_wrapper"),this.voiceMeter=new $e("",le+"mainVoiceMeter",this.locale,[],0,Ui,0),this.voiceMeter.bar.classList.add("voice_meter_bar_smooth"),this.voiceMeter.div.classList.add("main_controller_element"),this.volumeController=new $e("",le+"mainVolumeMeter",this.locale,[],0,200,100,!0,A=>{this.synth.setMainVolume(Math.round(A)/100),this.volumeController.update(A)}),this.volumeController.bar.classList.add("voice_meter_bar_smooth"),this.volumeController.div.classList.add("main_controller_element"),this.panController=new $e("",le+"mainPanMeter",this.locale,[],-1,1,0,!0,A=>{this.synth.setMasterPan(A),this.panController.update(A)}),this.panController.bar.classList.add("voice_meter_bar_smooth"),this.panController.div.classList.add("main_controller_element"),this.transposeController=new $e("",le+"mainTransposeMeter",this.locale,[],-12,12,0,!0,A=>{this.synth.transpose(Math.round(A*2)/2),this.transposeController.update(Math.round(A*2)/2)}),this.transposeController.bar.classList.add("voice_meter_bar_smooth"),this.transposeController.div.classList.add("main_controller_element");let e=document.createElement("button");this.locale.bindObjectProperty(e,"textContent",le+"midiPanic.title"),this.locale.bindObjectProperty(e,"title",le+"midiPanic.description"),e.classList.add("synthui_button"),e.classList.add("main_controller_element"),e.onclick=()=>this.synth.stopAll(!0);let t=document.createElement("button");this.locale.bindObjectProperty(t,"textContent",le+"systemReset.title"),this.locale.bindObjectProperty(t,"title",le+"systemReset.description"),t.classList.add("synthui_button"),t.classList.add("main_controller_element"),t.onclick=()=>{this.controllers.forEach((A,d)=>{A.pitchWheel.isLocked&&A.pitchWheel.lockMeter();for(let u of Object.values(A.controllerMeters))u.isLocked&&u.lockMeter();A.preset.mainButton.classList.contains("locked_selector")&&(this.synth.lockController(d,Fe,!1),A.preset.mainButton.classList.remove("locked_selector")),this.synth.transposeChannel(d,0,!0),A.transpose.update(0),A.soloButton.innerHTML=jt(ke),A.muteButton.innerHTML=Eo(ke),this.synth.muteChannel(d,!1)}),this.synth.resetControllers()};let o=document.createElement("button");this.locale.bindObjectProperty(o,"textContent",le+"advancedConfiguration.title"),this.locale.bindObjectProperty(o,"title",le+"advancedConfiguration.description"),o.classList.add("synthui_button"),o.classList.add("main_controller_element"),o.onclick=Gs.bind(this);let n=document.createElement("select");n.classList.add("synthui_button"),n.classList.add("main_controller_element"),this.locale.bindObjectProperty(n,"title",le+"channelController.groupSelector.description");for(let A of["effects","volumeEnvelope","filter","portamento"]){let d=document.createElement("option");d.value=A,this.locale.bindObjectProperty(d,"textContent",le+"channelController.groupSelector."+A),n.appendChild(d)}n.onchange=()=>{this.showControllerGroup(n.value)};let s=document.createElement("select");s.classList.add("main_controller_element"),s.classList.add("synthui_button"),this.locale.bindObjectProperty(s,"title",le+"interpolation.description");{let A=document.createElement("option");A.value="0",this.locale.bindObjectProperty(A,"textContent",le+"interpolation.linear"),s.appendChild(A);let d=document.createElement("option");d.value="1",this.locale.bindObjectProperty(d,"textContent",le+"interpolation.nearestNeighbor"),s.appendChild(d);let u=document.createElement("option");u.value="2",u.selected=!0,this.locale.bindObjectProperty(u,"textContent",le+"interpolation.cubic"),s.appendChild(u),s.onchange=()=>{this.synth.setInterpolationType(parseInt(s.value))}}let r=document.createElement("div");r.classList.add("synthui_controller"),this.uiDiv.appendChild(r);let a=document.createElement("button");this.locale.bindObjectProperty(a,"textContent",le+"toggleButton.title"),this.locale.bindObjectProperty(a,"title",le+"toggleButton.description"),a.classList.add("synthui_button"),a.onclick=()=>{this.hideOnDocClick=!1,this.toggleVisibility()},i.appendChild(this.volumeController.div),i.appendChild(this.panController.div),i.appendChild(this.transposeController.div),i.appendChild(e),i.appendChild(t),i.appendChild(o),i.appendChild(n),i.appendChild(s),this.mainMeters=[this.volumeController,this.panController,this.transposeController,this.voiceMeter],this.mainButtons=[e,t,o,a,s],this.uiDiv.appendChild(this.voiceMeter.div),this.uiDiv.appendChild(a),r.appendChild(i),this.mainControllerDiv=r,this.mainControllerDiv.onclick=A=>A.stopPropagation(),document.addEventListener("click",()=>{if(!this.hideOnDocClick){this.hideOnDocClick=!0;return}this.effectsConfigWindow!==void 0&&(ie(this.effectsConfigWindow),this.effectsConfigWindow=void 0),r.classList.remove("synthui_controller_show"),this.isShown=!1,this.hideControllers()})}function Ns(){let i=this.uiDiv.getElementsByClassName("synthui_controller")[0];this.synth.eventHandler.addEvent("programchange","synthui-program-change",e=>{this.controllers[e.channel].preset.set(`${e.bank}:${e.program}`)}),this.synth.eventHandler.addEvent("allcontrollerreset","synthui-all-controller-reset",()=>{for(let e of this.controllers)for(let t of Object.values(e.controllerMeters))t.update(t.defaultValue)}),this.synth.eventHandler.addEvent("controllerchange","synthui-controller-change",e=>{let t=e.controllerNumber,o=e.channel,n=e.controllerValue,s=this.controllers[o];if(s===void 0)return;let r=s.controllerMeters[t];r!==void 0&&r.update(n)}),this.synth.eventHandler.addEvent("pitchwheel","synthui-pitch-wheel",e=>{let t=e.MSB<<7|e.LSB;this.controllers[e.channel].pitchWheel.update(t-8192)}),this.synth.eventHandler.addEvent("drumchange","synthui-drum-change",e=>{this.controllers[e.channel].drumsToggle.innerHTML=e.isDrumChannel?Zo(32):jo(32),this.controllers[e.channel].preset.reload(e.isDrumChannel?this.percussionList:this.instrumentList)}),this.synth.eventHandler.addEvent("newchannel","synthui-new-channel",()=>{let e=this.createChannelController(this.controllers.length);this.controllers.push(e),i.appendChild(e.controller),this.hideControllers()})}var le="locale.synthesizerController.",ot=class{constructor(e,t,o){this.channelColors=e;let n=t;this.uiDiv=document.createElement("div"),this.uiDiv.classList.add("wrapper"),n.appendChild(this.uiDiv),this.uiDiv.style.visibility="visible",this.isShown=!1,this.animationId=-1,this.locale=o,this.hideOnDocClick=!0,this.effectsConfigWindow=void 0}connectKeyboard(e){this.keyboard=e}connectSynth(e){this.synth=e,this.getInstrumentList(),this.createMainSynthController(),this.createChannelControllers(),this.showControllerGroup("effects"),document.addEventListener("keydown",t=>{switch(t.key.toLowerCase()){case Ee.synthesizerUIShow:t.preventDefault(),this.toggleVisibility();break;case Ee.settingsShow:this.isShown=!0,this.toggleVisibility();break;case Ee.blackMidiMode:t.preventDefault(),this.synth.highPerformanceMode=!this.synth.highPerformanceMode;break;case Ee.midiPanic:t.preventDefault(),this.synth.stopAll(!0);break}}),this.locale.onLocaleChanged.push(()=>{this.voiceMeter.update(this.voiceMeter.currentValue,!0),this.volumeController.update(this.volumeController.currentValue,!0),this.panController.update(this.panController.currentValue,!0),this.panController.update(this.panController.currentValue,!0),this.transposeController.update(this.transposeController.currentValue,!0);for(let t of this.controllers){t.voiceMeter.update(t.voiceMeter.currentValue,!0),t.pitchWheel.update(t.pitchWheel.currentValue,!0);for(let o of Object.values(t.controllerMeters))o.update(o.currentValue,!0);t.transpose.update(t.transpose.currentValue,!0)}})}toggleVisibility(){this.animationId!==-1&&clearTimeout(this.animationId);let e=document.getElementsByClassName("synthui_controller")[0];this.isShown=!this.isShown,this.isShown?(e.style.display="block",document.getElementsByClassName("top_part")[0].classList.add("synthui_shown"),this.showControllers(),setTimeout(()=>{e.classList.add("synthui_controller_show")},75)):(this.effectsConfigWindow!==void 0&&(ie(this.effectsConfigWindow),this.effectsConfigWindow=void 0),document.getElementsByClassName("top_part")[0].classList.remove("synthui_shown"),this.hideControllers(),e.classList.remove("synthui_controller_show"),this.animationId=setTimeout(()=>{e.style.display="none"},200))}updateVoicesAmount(){this.voiceMeter.update(this.synth.voicesAmount),this.controllers.forEach((e,t)=>{let o=this.synth.channelProperties[t].voicesAmount;e.voiceMeter.update(o),o<1&&this.synth.voicesAmount>0?e.controller.classList.add("no_voices"):e.controller.classList.remove("no_voices")})}getInstrumentList(){this.synth.eventHandler.addEvent("presetlistchange","synthui-preset-list-change",e=>{let t=e;this.presetList=t,this.instrumentList=t.filter(o=>o.bank!==128).sort((o,n)=>o.program===n.program?o.bank-n.bank:o.program-n.program).map(o=>({name:o.presetName,bank:o.bank,program:o.program})),this.percussionList=t.filter(o=>o.bank===128).sort((o,n)=>o.program-n.program).map(o=>({name:o.presetName,bank:o.bank,program:o.program})),this.percussionList.length===0?this.percussionList=this.instrumentList:this.instrumentList.length===0&&(this.instrumentList=this.percussionList),this.controllers.forEach((o,n)=>{let s=this.synth.channelProperties[n].isDrum?this.percussionList:this.instrumentList;o.preset.reload(s),o.preset.set(`${s[0].bank}:${s[0].program}`)})})}showControllerGroup(e){let t=[R.chorusDepth,R.reverbDepth],o=[R.attackTime,R.releaseTime],n=[R.brightness,R.filterResonance],s=[R.portamentoTime,R.portamentoControl],r=A=>A.forEach(d=>{this.controllers.forEach(u=>{u.controllerMeters[d].div.classList.add("hidden")})}),a=A=>A.forEach(d=>{this.controllers.forEach(u=>{u.controllerMeters[d].div.classList.remove("hidden")})});switch(r(t),r(s),r(n),r(o),e){case"effects":a(t);break;case"volumeEnvelope":a(o);break;case"filter":a(n);break;case"portamento":a(s)}}};ot.prototype.hideControllers=ys;ot.prototype.showControllers=Ss;ot.prototype.toggleDarkMode=ws;ot.prototype.createChannelController=ks;ot.prototype.createChannelControllers=bs;ot.prototype.createMainSynthController=Ts;ot.prototype.setEventListeners=Ns;var So=null,oi=class{constructor(){}async createMIDIDeviceHandler(){if(this.selectedInput=So,this.selectedOutput=So,navigator.requestMIDIAccess)try{let e=await navigator.requestMIDIAccess({sysex:!0,software:!0});return this.inputs=e.inputs,this.outputs=e.outputs,x("%cMIDI handler created!",B.recognized),!0}catch(e){return Z("Could not get MIDI Devices:",e),this.inputs=[],this.outputs=[],!1}else return Z("Web MIDI Api not supported!",B.unrecognized),this.inputs=[],this.outputs=[],!1}connectMIDIOutputToSeq(e,t){this.selectedOutput=e,t.connectMidiOutput(e),x(`%cPlaying MIDI to %c${e.name}`,B.info,B.recognized)}disconnectSeqFromMIDI(e){this.selectedOutput=So,e.connectMidiOutput(void 0),x("%cDisconnected from MIDI out.",B.info)}connectDeviceToSynth(e,t){this.selectedInput=e,e.onmidimessage=o=>{t.sendMessage(o.data)},x(`%cListening for messages on %c${e.name}`,B.info,B.recognized)}disconnectDeviceFromSynth(e){this.selectedInput=So,e.onmidimessage=void 0,x(`%cDisconnected from %c${e.name}`,B.info,B.recognized)}disconnectAllDevicesFromSynth(){this.selectedInput=So;for(let e of this.inputs)e[1].onmidimessage=void 0}};var ii=class{constructor(e){window.addEventListener("message",t=>{if(typeof t.data!="string")return;let o=t.data.split(",");if(o[0]!=="midi")return;o.shift();let n=o.map(s=>parseInt(s,16));e.sendMessage(n)}),x("%cWeb MIDI Link handler created!",B.recognized)}};var St="midi range";function Us(i,e,t){let o=0,n=this.htmlControls.keyboard,s=[],r=[],a,A=g=>{let h=r[g],C=h.drum?128:h.bank,p=a.find(f=>f.bank===C&&f.program===h.program);p||(p=a[0]),s[g].textContent=": "+p.presetName},d=()=>{if(a)for(let g=0;g<s.length;g++)A(g)},u=()=>{let g=document.createElement("option");g.value=o.toString();let h=document.createElement("p");this.locale.bindObjectProperty(h,"textContent","locale.settings.keyboardSettings.selectedChannel.channelOption",[o+1]);let C=document.createElement("p");C.textContent=": not ",s.push(C),r.push({program:0,bank:0,drum:o%16===9}),d(),g.appendChild(h),g.appendChild(C),g.style.background=e.channelColors[o%e.channelColors.length],g.style.color="rgb(0, 0, 0)",n.channelSelector.appendChild(g),o++},l=this.synthui.synth;l.eventHandler.addEvent("presetlistchange","settings-preset-list-change",g=>{a=g,d()}),l.eventHandler.addEvent("newchannel","settings-new-channel",()=>{u()}),l.eventHandler.addEvent("programchange","settings-program-change",g=>{let h=r[g.channel];h.bank=g.bank,h.program=g.program,A(g.channel)}),l.eventHandler.addEvent("drumchange","settings-drum-change",g=>{r[g.channel].drum=g.isDrumChannel,A(g.channel)});for(let g=0;g<e.synth.channelsAmount;g++)u();n.channelSelector.onchange=()=>{i.selectChannel(parseInt(n.channelSelector.value))},n.sizeSelector.onchange=()=>{if(this.musicMode.visible){this.musicMode.setVisibility(!1,document.getElementById("keyboard_canvas_wrapper")),setTimeout(()=>{n.sizeSelector.value===St?(this.autoKeyRange=!0,this?.sequi?.seq&&(i.keyRange=this.sequi.seq.midiData.keyRange,t.keyRange=this.sequi.seq.midiData.keyRange)):(this.autoKeyRange=!1,i.keyRange=this.keyboardSizes[n.sizeSelector.value],t.keyRange=this.keyboardSizes[n.sizeSelector.value]),this._saveSettings()},600);return}n.sizeSelector.value===St?(this.autoKeyRange=!0,this?.sequi?.seq&&(i.keyRange=this.sequi.seq.midiData.keyRange,t.keyRange=this.sequi.seq.midiData.keyRange)):(this.autoKeyRange=!1,i.keyRange=this.keyboardSizes[n.sizeSelector.value],t.keyRange=this.keyboardSizes[n.sizeSelector.value]),this._saveSettings()},this.addSequencer=g=>{g.addOnSongChangeEvent(h=>{this.autoKeyRange&&(i.keyRange=h.keyRange,t.keyRange=h.keyRange),h.RMIDInfo?.IPIC!==void 0&&this.musicMode.visible===!1&&this.toggleMusicPlayerMode().then()},"settings-keyboard-handler-song-change")},e.synth.eventHandler.addEvent("newchannel","settings-new-channel",()=>{u()}),e.synth.eventHandler.addEvent("programchange","settings-keyboard-program-change",g=>{g.userCalled&&(i.selectChannel(g.channel),n.channelSelector.value=g.channel)}),e.synth.eventHandler.addEvent("mutechannel","settings-keuboard-mute-channel",g=>{if(g.isMuted&&g.channel===i.channel){let h=0;for(;e.synth.channelProperties[h].isMuted;)if(h++,e.synth.channelProperties[h]===void 0)return;h<e.synth.channelsAmount&&(i.selectChannel(h),n.channelSelector.value=h)}}),n.modeSelector.onclick=()=>{if(this.musicMode.visible){this.musicMode.setVisibility(!1,document.getElementById("keyboard_canvas_wrapper")),setTimeout(()=>{i.toggleMode(),this._saveSettings()},600);return}i.toggleMode(),this._saveSettings()},n.showSelector.onclick=()=>{i.shown=!i.shown,this._saveSettings()}}var qs=`
<h1 translate-path='locale.settings.mainTitle'></h1>
<div class='settings_groups_parent'>
    <div class='settings_group'>
        <h2 translate-path='locale.settings.rendererSettings.title'></h2>
        <label translate-path-title='locale.settings.rendererSettings.noteFallingTime'></label>
        <spessarange min='1' max='9999' value='1000' class='settings_slider' input_id='note_time_slider' units='ms'></spessarange>
        
        <label translate-path-title='locale.settings.rendererSettings.noteAfterTriggerTime'></label>
        <spessarange min='0' max='9999' value='0' class='settings_slider' input_id='note_after_time_slider' units='ms'></spessarange>
        
        
        <label translate-path-title='locale.settings.rendererSettings.waveformThickness'></label>
        <spessarange min='0' max='10' value='2' class='settings_slider' input_id='analyser_thickness_slider' units='px'></spessarange>
        
        <label 
        translate-path-title='locale.settings.rendererSettings.waveformSampleSize'></label>
        <spessarange min='5' max='15' value='10' class='settings_slider' input_id='analyser_fft_slider' units=''></spessarange>
        
        <label translate-path-title='locale.settings.rendererSettings.waveformAmplifier'></label>
        <spessarange min='-10' max='10' value='2' class='settings_slider' input_id='wave_multiplier_slider' units=''></spessarange>
        
        <div class='switch_label'>
            <label for='analyser_toggler' translate-path-title='locale.settings.rendererSettings.toggleWaveformsRendering'></label>
            <label class='switch'>
                <input type='checkbox' checked id='analyser_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='note_toggler' translate-path-title='locale.settings.rendererSettings.toggleNotesRendering'></label>
            <label class='switch'>
                <input type='checkbox' checked id='note_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='active_note_toggler' translate-path-title='locale.settings.rendererSettings.toggleDrawingActiveNotes'></label>
            <label class='switch'>
                <input type='checkbox' checked id='active_note_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='visual_pitch_toggler' translate-path-title='locale.settings.rendererSettings.toggleDrawingVisualPitch'></label>
            <label class='switch'>
                <input type='checkbox' checked id='visual_pitch_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <div class='switch_label'>
            <label for='stabilize_waveforms_toggler' translate-path-title='locale.settings.rendererSettings.toggleStabilizeWaveforms'></label>
            <label class='switch'>
                <input type='checkbox' checked id='stabilize_waveforms_toggler'>
                <span class='switch_slider'></span>
            </label>
        </div>
    </div>


    <div class='settings_group'>
        <h2 translate-path='locale.settings.keyboardSettings.title'></h2>
        <label for='channel_selector' translate-path-title='locale.settings.keyboardSettings.selectedChannel'></label>
        <select id='channel_selector'>
        </select>
        
        <label for='keyboard_size_selector' translate-path-title='locale.settings.keyboardSettings.keyboardSize'></label>
        <select id='keyboard_size_selector'>
            <option value='full' translate-path='locale.settings.keyboardSettings.keyboardSize.full'></option>
            <option value='piano' translate-path='locale.settings.keyboardSettings.keyboardSize.piano'></option>
            <option value='5 octaves' translate-path='locale.settings.keyboardSettings.keyboardSize.fiveOctaves'></option>
            <option value='two octaves' translate-path='locale.settings.keyboardSettings.keyboardSize.twoOctaves'></option>
            <option value='${St}' translate-path='locale.settings.keyboardSettings.keyboardSize.useSongKeyRange'></option>
        </select>
        
        <div class='switch_label'>
            <label translate-path-title='locale.settings.keyboardSettings.toggleTheme'></label>
            <label class='switch'>
                <input type='checkbox' id='mode_selector'>
                <span class='switch_slider'></span>
            </label>
        </div>
        <div class='switch_label'>
            <label translate-path-title='locale.settings.keyboardSettings.show'></label>
            <label class='switch'>
                <input type='checkbox' checked id='keyboard_show'>
                <span class='switch_slider'></span>
            </label>
        </div>
    </div>
    
    
    <div class='settings_group' id='midi_settings'>
        <h2 translate-path='locale.settings.midiSettings.title'></h2>
        <label for='midi_input_selector' translate-path-title='locale.settings.midiSettings.midiInput'></label>
        <select id='midi_input_selector'>
            <option value='-1' translate-path='locale.settings.midiSettings.midiInput.disabled'></option>
        </select>
        
        <label for='midi_output_selector' translate-path-title='locale.settings.midiSettings.midiOutput'></label>
        <select id='midi_output_selector'>
            <option value='-1' translate-path='locale.settings.midiSettings.midiOutput.disabled'></option>
        </select>
        
        <h4 class='hover_reminder' translate-path-title='locale.settings.midiSettings.reminder'></h4>
    </div>
    
    
    <div class='settings_group'>
        <h2 translate-path='locale.settings.interfaceSettings.title'></h2>
        <div class='switch_label'>
            <label translate-path-title='locale.settings.interfaceSettings.toggleTheme'></label>
            <label class='switch'>
                <input type='checkbox' checked id='toggle_mode_button'>
                <span class='switch_slider'></span>
            </label>
        </div>
        
        <label for='language_selector' translate-path-title='locale.settings.interfaceSettings.selectLanguage'></label>
        <select id='language_selector'>
         <option value='help-translate' translate-path='locale.settings.interfaceSettings.selectLanguage.helpTranslate'></option>
        <!-- will be added via javascript -->
        </select>
        
        <label for='layout_selector' translate-path-title='locale.settings.interfaceSettings.layoutDirection'></label>
        <select id='layout_selector'>
            <option value='downwards' selected translate-path='locale.settings.interfaceSettings.layoutDirection.values.downwards'></option>
            <option value='upwards' translate-path='locale.settings.interfaceSettings.layoutDirection.values.upwards'></option>
            <option value='left' translate-path='locale.settings.interfaceSettings.layoutDirection.values.leftToRight'></option>
            <option value='right' translate-path='locale.settings.interfaceSettings.layoutDirection.values.rightToLeft'></option>
        </select>
        
        <h3><a href='https://github.com/spessasus/SpessaSynth/wiki/How-To-Use-App' target='_blank' translate-path-title='locale.synthesizerController.helpButton'></a></h3>
        
        <h4 class='hover_reminder' translate-path-title='locale.settings.interfaceSettings.reminder'></h4>
        <h4 class='hover_reminder'>
            <span translate-path='locale.settings.interfaceSettings.useFirefox.firefox' style='color: orange;'></span>
            <span translate-path='locale.settings.interfaceSettings.useFirefox.recommended'></span>
        </h4>
    </div>
</div>
`;async function _s(){let i=await window.savedSettings;if(!i.interface)return;x("Loading saved settings...",i);let e=this.htmlControls.renderer,t=this.renderer,o=i.renderer;t.noteFallingTimeMs=o.noteFallingTimeMs??1e3,e.noteTimeSlider.value=o.noteFallingTimeMs,e.noteTimeSlider.dispatchEvent(new Event("input")),Xe(e.noteTimeSlider).innerText=`${o.noteFallingTimeMs}ms`,t.noteAfterTriggerTimeMs=o.noteAfterTriggerTimeMs??0,e.noteAfterTriggerTimeSlider.value=o.noteAfterTriggerTimeMs,e.noteAfterTriggerTimeSlider.dispatchEvent(new Event("input")),Xe(e.noteAfterTriggerTimeSlider).innerText=`${o.noteAfterTriggerTimeMs}ms`,e.analyserThicknessSlider.value=o.waveformThickness??2,e.analyserThicknessSlider.dispatchEvent(new Event("input")),t.lineThickness=o.waveformThickness,Xe(e.analyserThicknessSlider).innerText=`${o.waveformThickness}px`;let n=o.sampleSize??10;e.analyserFftSlider.value=Math.log2(n),e.analyserFftSlider.dispatchEvent(new Event("input")),t.normalAnalyserFft=n,t.drumAnalyserFft=Math.pow(2,Math.min(15,Math.log2(n)+2)),t.updateFftSize(),this.setTimeDelay(n),Xe(e.analyserFftSlider).innerText=`${n}`,t.waveMultiplier=o.amplifier??2,e.waveMultiplierSlizer.value=o.amplifier,e.waveMultiplierSlizer.dispatchEvent(new Event("input")),Xe(e.waveMultiplierSlizer).innerText=o.amplifier.toString();let s=this.htmlControls.renderer;t.renderAnalysers=o.renderWaveforms??!0,s.analyserToggler.checked=o.renderWaveforms??!0,t.renderNotes=o.renderNotes??!0,s.noteToggler.checked=o.renderNotes??!0,t.drawActiveNotes=o.drawActiveNotes??!0,s.activeNoteToggler.checked=o.drawActiveNotes??!0,t.showVisualPitch=o.showVisualPitch??!0,s.visualPitchToggler.checked=o.showVisualPitch??!0,t.stabilizeWaveforms=o.stabilizeWaveforms??!0,s.stabilizeWaveformsToggler.checked=o.stabilizeWaveforms??!0,t.keyRange=o.keyRange??{min:0,max:128};let r=this.htmlControls.keyboard,a=this.midiKeyboard,A=i.keyboard;a.setKeyRange(A.keyRange??{min:0,max:128},!1),A.autoRange?(r.sizeSelector.value=St,this.autoKeyRange=!0):(this.autoKeyRange=!1,r.sizeSelector.value=Object.keys(this.keyboardSizes).find(d=>this.keyboardSizes[d].min===A.keyRange.min&&this.keyboardSizes[d].max===A.keyRange.max)),A.mode==="dark"&&(a.toggleMode(!1),this.htmlControls.keyboard.modeSelector.checked=!0),A.show===!1&&(a.shown=!1,this.htmlControls.keyboard.showSelector.checked=!1),this.locale.changeGlobalLocale(i.interface.language,!0),setTimeout(()=>{this.htmlControls.interface.languageSelector.value=i.interface.language},100),i.interface.mode==="light"?(this._toggleDarkMode(),this.htmlControls.interface.themeSelector.checked=!1):this.htmlControls.interface.themeSelector.checked=!0,this.htmlControls.interface.layoutSelector.value=i.interface.layout||"downwards",this._changeLayout(i.interface.layout||"downwards")}function Hs(){window.saveSettings&&window.saveSettings(this._serializeSettings())}function Ps(){return{renderer:{noteFallingTimeMs:this.renderer.noteFallingTimeMs,noteAfterTriggerTimeMs:this.renderer.noteAfterTriggerTimeMs,waveformThickness:this.renderer.lineThickness,sampleSize:this.renderer.normalAnalyserFft,amplifier:this.renderer.waveMultiplier,renderWaveforms:this.renderer.renderAnalysers,renderNotes:this.renderer.renderNotes,drawActiveNotes:this.renderer.drawActiveNotes,showVisualPitch:this.renderer.showVisualPitch,stabilizeWaveforms:this.renderer.stabilizeWaveforms,keyRange:this.renderer.keyRange},keyboard:{selectedChannel:this.midiKeyboard.channel,keyRange:this.midiKeyboard.keyRange,mode:this.midiKeyboard.mode,autoRange:this.htmlControls.keyboard.sizeSelector.value===St,show:this.htmlControls.keyboard.showSelector.checked===!0},midi:{input:this.midiDeviceHandler.selectedInput===null?null:this.midiDeviceHandler.selectedInput.name,output:this.midiDeviceHandler.selectedOutput===null?null:this.midiDeviceHandler.selectedOutput.name},interface:{mode:this.mode,language:this.htmlControls.interface.languageSelector.value,layout:this.htmlControls.interface.layoutSelector.value}}}function Os(){let i=this.htmlControls.interface.themeSelector;i.onclick=()=>{this._toggleDarkMode(),this._saveSettings()};let e=this.htmlControls.interface.languageSelector;for(let[o,n]of Object.entries(this.locales)){let s=document.createElement("option");s.value=o,s.textContent=n.localeName,e.appendChild(s)}e.value=this.locale.localeCode,e.onchange=()=>{if(e.value==="help-translate"){window.open("https://github.com/spessasus/SpessaSynth/blob/master/src/website/js/locale/locale_files/README.md"),e.value=this.locale.localeCode;return}this.locale.changeGlobalLocale(e.value),this._saveSettings()};let t=this.htmlControls.interface.layoutSelector;t.onchange=()=>{this._changeLayout(t.value),this._saveSettings(),t.blur()}}function Ys(i){let e=document.getElementById("keyboard_canvas_wrapper"),t=document.getElementById("note_canvas"),o=document.getElementById("keyboard");switch(i){case"downwards":e.classList.remove("upwards"),e.classList.remove("left_to_right"),e.classList.remove("right_to_left"),t.classList.remove("sideways"),o.classList.remove("sideways"),this.renderer.direction="down",this.renderer.sideways=!1;break;case"upwards":e.classList.add("upwards"),e.classList.remove("left_to_right"),e.classList.remove("right_to_left"),t.classList.remove("sideways"),o.classList.remove("sideways"),this.renderer.direction="up",this.renderer.sideways=!1;break;case"left":e.classList.remove("upwards"),e.classList.add("left_to_right"),e.classList.remove("right_to_left"),t.classList.add("sideways"),o.classList.add("sideways"),this.renderer.direction="up",this.renderer.sideways=!0;break;case"right":e.classList.remove("upwards"),e.classList.remove("left_to_right"),e.classList.add("right_to_left"),t.classList.add("sideways"),o.classList.add("sideways"),this.renderer.direction="down",this.renderer.sideways=!0}}var ni={start:"#101010",end:"#212121"},si={start:"#bbb",end:"#f0f0f0"},Js="#eee",zs="#333",Ai={start:"#222",end:"#333"},ri={start:"#ccc",end:"#fff"},ct=.2;function Vs(){this.mode==="dark"?(this.mode="light",this.renderer.drawActiveNotes=!1):(this.renderer.drawActiveNotes=!0,this.mode="dark"),this.renderer.toggleDarkMode(),this.synthui.toggleDarkMode(),this.sequi.toggleDarkMode(),this.musicMode.toggleDarkMode(),document.getElementsByClassName("spessasynth_main")[0].classList.toggle("light_mode"),document.getElementsByClassName("top_part")[0].classList.toggle("top_part_light"),this.mainDiv.classList.toggle("settings_menu_light");let i=document.styleSheets[0].cssRules;for(let e of i)if(e.selectorText==="*"){this.mode==="dark"?(gt(zs,Js,ct,e,"--font-color"),gt(ri.start,Ai.start,ct,e,"--top-buttons-color-start"),gt(ri.end,Ai.end,ct,e,"--top-buttons-color-end"),gt(si.start,ni.start,ct,e,"--top-color-start"),gt(si.end,ni.end,ct,e,"--top-color-end")):(gt(Js,zs,ct,e,"--font-color"),gt(Ai.start,ri.start,ct,e,"--top-buttons-color-start"),gt(Ai.end,ri.end,ct,e,"--top-buttons-color-end"),gt(ni.start,si.start,ct,e,"--top-color-start"),gt(ni.end,si.end,ct,e,"--top-color-end"));break}document.body.style.background=this.mode==="dark"?"black":"white"}var Xt={};function gt(i,e,t,o,n){Xt[n]&&(clearInterval(Xt[n]),Xt[n]=void 0);function s(l){l.length===4&&(l=`#${l[1]}${l[1]}${l[2]}${l[2]}${l[3]}${l[3]}`);let g=parseInt(l.slice(1),16);return{r:g>>16&255,g:g>>8&255,b:g&255}}function r(l,g,h){return l+(g-l)*h}let a=s(i),A=s(e),d=performance.now()/1e3;function u(){let g=performance.now()/1e3-d,h=Math.min(g/t,1),C=Math.round(r(a.r,A.r,h)),p=Math.round(r(a.g,A.g,h)),f=Math.round(r(a.b,A.b,h));o.style.setProperty(n,`rgb(${C}, ${p}, ${f})`),h>=1&&(clearInterval(Xt[n]),Xt[n]=void 0)}Xt[n]=setInterval(u,1e3/60)}function Ks(i){let e=this.htmlControls.renderer;e.noteTimeSlider.addEventListener("input",()=>{i.noteFallingTimeMs=e.noteTimeSlider.value,Xe(e.noteTimeSlider).innerText=`${e.noteTimeSlider.value}ms`}),e.noteTimeSlider.onchange=()=>{this._saveSettings()},e.noteAfterTriggerTimeSlider.addEventListener("input",()=>{i.noteAfterTriggerTimeMs=e.noteAfterTriggerTimeSlider.value,Xe(e.noteAfterTriggerTimeSlider).innerText=`${e.noteAfterTriggerTimeSlider.value}ms`}),e.noteAfterTriggerTimeSlider.onchange=()=>{this._saveSettings()},e.analyserThicknessSlider.addEventListener("input",()=>{i.lineThickness=parseInt(e.analyserThicknessSlider.value),Xe(e.analyserThicknessSlider).innerText=`${e.analyserThicknessSlider.value}px`}),e.analyserThicknessSlider.onchange=()=>{this._saveSettings()},e.analyserFftSlider.addEventListener("input",()=>{let t=Math.pow(2,parseInt(e.analyserFftSlider.value));i.normalAnalyserFft=t,i.drumAnalyserFft=Math.pow(2,Math.min(15,parseInt(e.analyserFftSlider.value)+2)),i.updateFftSize(),this.setTimeDelay(t),Xe(e.analyserFftSlider).innerText=`${t}`}),e.analyserFftSlider.onchange=()=>{this._saveSettings()},e.waveMultiplierSlizer.addEventListener("input",()=>{i.waveMultiplier=parseInt(e.waveMultiplierSlizer.value),Xe(e.waveMultiplierSlizer).innerText=e.waveMultiplierSlizer.value}),e.waveMultiplierSlizer.onchange=()=>{this._saveSettings()},e.analyserToggler.onclick=()=>{i.renderAnalysers=!i.renderAnalysers,this._saveSettings()},e.noteToggler.onclick=()=>{i.renderNotes=!i.renderNotes,this._saveSettings()},e.activeNoteToggler.onclick=()=>{i.drawActiveNotes=!i.drawActiveNotes,this._saveSettings()},e.visualPitchToggler.onclick=()=>{i.showVisualPitch=!i.showVisualPitch,this._saveSettings()},e.stabilizeWaveformsToggler.onclick=()=>{i.stabilizeWaveforms=!i.stabilizeWaveforms,this._saveSettings()}}function Ws(i,e,t){i.createMIDIDeviceHandler().then(o=>{o?(this._createMidiInputHandler(i,t.synth),this._createMidiOutputHandler(i,e)):(_e||re(this.locale.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:this.locale.getLocaleString("locale.warnings.noMidiSupport")}]),document.getElementById("midi_settings").style.display="none")})}function Zs(i,e){if(i.inputs.length<1)return;let t=this.htmlControls.midi.inputSelector;for(let o of i.inputs){let n=document.createElement("option");n.value=o[0],n.innerText=o[1].name,t.appendChild(n)}if(t.onchange=()=>{t.value==="-1"?i.disconnectAllDevicesFromSynth():i.connectDeviceToSynth(i.inputs.get(t.value),e),this._saveSettings()},i.inputs.size>0){let o=i.inputs.entries().next().value;i.connectDeviceToSynth(o[1],e),t.value=o[0]}}function js(i,e){if(!i.outputs){setTimeout(()=>{this._createMidiOutputHandler(i,e)},1e3);return}if(i.outputs.length<1)return;let t=this.htmlControls.midi.outputSelector;for(let o of i.outputs){let n=document.createElement("option");n.value=o[0],n.innerText=o[1].name,t.appendChild(n)}t.onchange=()=>{if(!e.seq){setTimeout(t.onchange,1e3);return}t.value==="-1"?i.disconnectSeqFromMIDI(e.seq):i.connectMIDIOutputToSeq(i.outputs.get(t.value),e.seq),this._saveSettings()}}var Xs={title:"Renderer settings",noteFallingTime:{title:"Note falling time (milliseconds)",description:"How fast the notes fall (visually)"},noteAfterTriggerTime:{title:"Note after trigger time (milliseconds)",description:"How long the notes fall after they get triggered. Zero means that they trigger at the bottom."},waveformThickness:{title:"Waveform line thickness (px)",description:"How thick the waveform lines are"},waveformSampleSize:{title:"Waveform sample size",description:"How detailed the waveforms are (Note: high values might impact performance). Also note that high values will add a delay to the audio to sync the waveforms with the audio."},waveformAmplifier:{title:"Waveform amplifier",description:"How vibrant the waveforms are"},toggleWaveformsRendering:{title:"Enable waveforms rendering",description:"Enable rendering the channel waveforms (colorful lines showing audio)"},toggleNotesRendering:{title:"Enable notes rendering",description:"Enable rendering of the falling notes when playing a MIDI file"},toggleDrawingActiveNotes:{title:"Enable drawing active notes",description:"Enable notes lighting up and glowing when they get pressed"},toggleDrawingVisualPitch:{title:"Enable drawing visual pitch",description:"Enable notes sliding left or right when the pitch wheel is applied"},toggleStabilizeWaveforms:{title:"Stabilize waveforms",description:"Enable oscilloscope triggering"}};var $s={title:"MIDI Keyboard settings",selectedChannel:{title:"Selected channel",description:"The channel keyboard sends messages to",channelOption:"Channel {0}"},keyboardSize:{title:"Keyboard size",description:"The range of keys shown on the keyboard. Adjusts the MIDI note size accordingly",full:"128 keys (full)",piano:"88 keys (piano)",fiveOctaves:"5 octaves",useSongKeyRange:"Use song's key range",twoOctaves:"Two octaves"},toggleTheme:{title:"Use dark theme",description:"Use the dark MIDI keyboard theme"},show:{title:"Show",description:"Show/hide MIDI keyboard"}};var eA={title:"MIDI settings",midiInput:{title:"MIDI input",description:"The port to listen on for MIDI messages",disabled:"Disabled"},midiOutput:{title:"MIDI output",description:"The port to play the MIDI file to",disabled:"Use SpessaSynth"},reminder:{title:"Note that you need to RESTART YOUR BROWSER after connecting a new MIDI device for it to show up here.",description:"Also note that Safari does not support WebMIDI, so you will need to use a different browser if you are on Mac."}};var tA={toggleButton:"Settings",mainTitle:"Program settings",rendererSettings:Xs,keyboardSettings:$s,midiSettings:eA,interfaceSettings:{title:"Interface settings",toggleTheme:{title:"Use dark theme",description:"Enable the dark theme for the interface"},selectLanguage:{title:"Language",description:"Change the program language",helpTranslate:"Translate SpessaSynth"},layoutDirection:{title:"Layout direction",description:"The layout direction of the renderer and keyboard",values:{downwards:"Downwards",upwards:"Upwards",leftToRight:"Left to right",rightToLeft:"Right to left"}},reminder:{title:"Did you know that you can hover over the settings to get more information?",description:"Like this one!"},useFirefox:{firefox:"Firefox Web Browser",recommended:"is highly recommended for the best performance."}}};var oA={toggleButton:{title:"Toggle music player mode",description:"Toggle the simplified UI version, hiding the keyboard and note visualizations"},currentlyPlaying:"Currently playing:",nothingPlaying:"Nothing is playing",nothingPlayingCopyright:"Upload a MIDI!"};var iA={voiceMeter:{title:"Voices: ",description:"Voices: The current amount of voices playing on channel {0}"},pitchBendMeter:{title:"Pitch: ",description:"Pitch Wheel: The current pitch bend applied to channel {0}"},panMeter:{title:"Pan: ",description:"Pan: The current stereo panning applied to channel {0} (right-click to lock)"},expressionMeter:{title:"Expression: ",description:"Expression: The current expression (loudness) of channel {0} (right-click to lock)"},volumeMeter:{title:"Volume: ",description:"Volume: The current volume of channel {0} (right-click to lock)"},modulationWheelMeter:{title:"Mod Wheel: ",description:"Modulation Wheel: The current modulation (usually vibrato) depth of channel {0} (right-click to lock)"},chorusMeter:{title:"Chorus: ",description:"Chorus Level: The current level of chorus effect applied to channel {0} (right-click to lock)"},reverbMeter:{title:"Reverb: ",description:"Reverb Level: The current level of reverb effect applied to channel {0} (right-click to lock)"},filterMeter:{title:"Filter: ",description:"Filter Cutoff: The current level of low-pass filter cutoff applied to channel {0} (right-click to lock)"},resonanceMeter:{title:"Resonance: ",description:"Filter Resonance: The current resonance (Q) level of the low-pass filter applied to channel {0} (right-click to lock)"},transposeMeter:{title:"Transpose: ",description:"Channel Transpose: The current transposition (key shift) of channel {0}"},attackMeter:{title:"Attack Time: ",description:"Attack Time: The current attack time (speed) of channel {0} (right-click to lock)"},releaseMeter:{title:"Release Time: ",description:"Release Time: The current release time (speed) of channel {0} (right-click to lock)"},portamentoTimeMeter:{title:"Porta Time: ",description:"Portamento Time: The current portamento time of channel {0} (right-click to lock). Set to 0 to disable portamento."},portamentoControlMeter:{title:"Porta Ctrl: ",description:"Portamento Control: Starting key number to glide from on channel {0} (you probably don't want to lock this)"},groupSelector:{description:"Select the group of MIDI Controllers to manipulate",effects:"Effects",volumeEnvelope:"Volume Env.",filter:"Filter",portamento:"Portamento"},presetSelector:{description:"Change the patch (instrument) channel {0} is using",selectionPrompt:"Change instrument for channel {0}",searchPrompt:"Search..."},presetReset:{description:"Unlock channel {0} to allow program changes"},soloButton:{description:"Solo on channel {0}"},muteButton:{description:"Mute/unmute channel {0}"},drumToggleButton:{description:"Toggle drums on channel {0}"}};var nA={button:{title:"Effects config",description:"Configure the chorus and reverb effects and the custom vibrato"},reverbConfig:{title:"Reverb configuration",description:"Configure the reverb processor",impulseResponse:{title:"Impulse response",description:"Select impulse response for the convolver reverb"}},chorusConfig:{title:"Chorus configuration",description:"Configure the chorus processor",nodesAmount:{title:"Nodes amount",description:"The amount of delay nodes (for each stereo channel) to use"},defaultDelay:{title:"Delay (s)",description:"The delay time for the first node in seconds"},delayVariation:{title:"Delay increment (s)",description:"The amount to increment each delay node after the first one in seconds"},stereoDifference:{title:"Stereo difference (s)",description:"The difference of delays between two channels (added to the left channel and subtracted from the right)"},oscillatorFrequency:{title:"LFO frequency (Hz)",description:"The first delay node's LFO frequency, in Hz. The LFO controls delay time."},frequencyVariation:{title:"LFO increment (Hz)",description:"The amount to increment each LFO's frequency after the first one, in Hz"},oscillatorGain:{title:"LFO gain (s)",description:"How much will LFO alter the delay in delay nodes, in seconds"},apply:{title:"Apply",description:"Apply the selected settings"}}};var sA={button:{title:"Key Modifiers",description:"Modify individual key parameters"},mainTitle:"Key Modification editor",detailedDescription:`This menu allows you to modify a MIDI note on a given channel.
Currently you can modify its velocity and assign a patch (instrument) it uses.
 This is especially useful for drums.`,prompt:"What would you like to do?",selectKey:{prompt:"Press the key you want to modify on the keyboard.",title:"Select key",change:"Change key"},selectedChannel:{title:"Selected channel",description:"The channel to which the key you want to modify belongs"},selectedKey:{title:"Selected key: {0}",description:"You have selected the MIDI note number {0}"},modifyKey:{title:"Modify a key",description:"Modify a single key on a given channel",velocity:{title:"Velocity override",description:"The velocity to use on this key, ignoring the MIDI velocity. Leave at -1 for unchanged"},preset:{title:"Preset override",description:"The preset to use on this key.",unchanged:"Unchanged"},apply:{title:"Apply",description:"Apply the selected modifier"}},removeModification:{title:"Remove modification",description:"Remove modification from a single key on a given channel",remove:{title:"Remove",description:"Remove this key modifier"}},resetModifications:{title:"Reset changes",description:"Clear and reset all key modifications from all channels",confirmation:{title:"Confirm your actions",description:"Are you sure you want to remove ALL modifications?"}}};var AA={toggleButton:{title:"Synthesizer controller",description:"Show the synthesizer controller"},mainVoiceMeter:{title:"Voices: ",description:"The total amount of voices currently playing"},mainVolumeMeter:{title:"Volume: ",description:"The current master volume of the synthesizer"},mainPanMeter:{title:"Pan: ",description:"The current master stereo panning of the synthesizer"},mainTransposeMeter:{title:"Transpose: ",description:"Transposes the synthesizer (in semitones or keys)"},midiPanic:{title:"MIDI Panic",description:"Stops all voices immediately"},systemReset:{title:"System reset",description:"Resets all controllers to their default values"},blackMidiMode:{title:"Black MIDI mode",description:"Toggles the High Performance Mode, simplifying the look and killing the notes faster"},disableCustomVibrato:{title:"Disable custom vibrato",description:"Disables the custom (NRPN) Vibrato permamently. Reload the website to reenable it"},helpButton:{title:"Help",description:"Opens an external website with the usage guide"},interpolation:{description:"Select the synthesizer's interpolation method",linear:"Linear Interpolation",nearestNeighbor:"Nearest neighbor",cubic:"Cubic Interpolation"},advancedConfiguration:{title:"Advanced Configuration",description:"Configure the advanced settings for the synthesizer"},voiceCap:{title:"Voice cap",description:"The maximum amount of voices allowed to play at once"},holdPedalDown:"Hold pedal is down (Shift)",channelController:iA,effectsConfig:nA,keyModifiers:sA};var rA={previousSong:"Previous song",nextSong:"Next song",loopThis:"Loop this song",playPause:"Play/pause",shuffle:"Shuffle songs",playbackRate:"Playback speed",lyrics:{show:"Show lyrics",title:"Decoded text",noLyrics:"No lyrics available...",otherText:{title:"Other text"},subtitles:{title:"Upload ASS subtitles",description:"Upload your own subtitles in the (.ass) format"}}};var aA={button:{title:"Save Audio",description:"Save the composition to various formats"},formats:{title:"Choose format",formats:{wav:{button:{title:"WAV audio (.wav)",description:"Export the song with modifications as a .wav audio file"},options:{title:"WAV export options",description:"Export the current MIDI file as WAV applying all the modifications made via the synthesizer controller.",confirm:"Export",normalizeVolume:{title:"Normalize volume",description:"Keep the volume at the same level, no matter how loud or quiet the MIDI is. Recommended."},additionalTime:{title:"Additional time (s)",description:"Additional time at the end of the song to allow for the sound to fade. (seconds)"},sampleRate:{title:"Sample rate",description:"Output file sample rate in Hz. Leave as is unless you know what you're doing."},separateChannels:{title:"Separate channels",description:"Save each channel as a separate file. Useful for things like oscilloscope viewers. Note that this disables reverb and chorus.",saving:{title:"Channel files",save:"Save channel {0}"}},loopCount:{title:"Loop count",description:"The amount of times to loop the song"}},exportMessage:{message:"Exporting WAV audio...",estimated:"Remaining:",convertWav:"Converting to wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Export the MIDI file with the controller and instrument changes applied"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Export a SoundFont2 file"},options:{title:"SF export options",confirm:"Export",trim:{title:"Trim",description:"Export the soundfont trimmed to only use instruments and samples that the MIDI file uses"},compress:{title:"Compress",description:"Compress samples with lossy Ogg Vorbis compression if uncompressed. Significantly reduces the file size.If the soundfont was already compressed, it won't be uncompressed even if this option is disabled"},quality:{title:"Compression quality",description:"The quality of compression. Higher is better"}}},dls:{button:{title:"DLS (.dls)",description:"Export the SoundFont as DLS"},warning:{title:"DLS Export warning",message:"DLS export is limited and may produce broken files with large and complex SoundFonts.",details:"More info",confirm:"Export anyways"}},rmidi:{button:{title:"Embedded MIDI (.rmi)",description:"Export the modified MIDI with the embedded trimmed soundfont as a single file. Note that this format isn't widely supported"},progress:{title:"Exporting embeded MIDI...",loading:"Loading Soundfont and MIDI...",modifyingMIDI:"Modifying MIDI...",modifyingSoundfont:"Trimming Soundfont... (this may take a while!)",saving:"Saving RMIDI...",done:"Done!"},options:{title:"RMIDI export options",description:"Embed the current SoundFont + MIDI as RMIDI and apply all the modifications made via the synthesizer controller.",confirm:"Export",compress:{title:"Compress",description:"Compress the Soundfont with lossy Ogg Vorbis compression. Significantly reduces the file size. Recommended."},quality:{title:"Compression quality",description:"The quality of compression. Higher is better."},bankOffset:{title:"Bank offset",description:"The bank offset of the file. Value of 0 is recommended. Only change if you know what you're doing."},adjust:{title:"Adjust MIDI",description:"Adjusts the MIDI file to the SoundFont. Leave this on unless you know what you're doing."}}}},metadata:{songTitle:{title:"Title:",description:"The song's title"},album:{title:"Album:",description:"The song's album"},artist:{title:"Artist:",description:"The song's artist"},albumCover:{title:"Album cover:",description:"The song's album cover"},creationDate:{title:"Created:",description:"The song's creation date"},genre:{title:"Genre:",description:"The song's genre"},comment:{title:"Comment:",description:"The song's comment"},duration:{title:"Duration:",description:"The song's duration"},subject:{title:"Subject:",description:"The song's subject"}}}};var lA={localeName:"English",titleMessage:"SpessaSynth: SoundFont2 Javascript Synthesizer",demoTitleMessage:"SpessaSynth: SF2/DLS Javascript Synthesizer Online Demo",synthInit:{genericLoading:"Loading...",loadingSoundfont:"Loading SoundFont...",loadingBundledSoundfont:"Loading bundled SoundFont...",startingSynthesizer:"Starting Synthesizer...",savingSoundfont:"Saving SoundFont for reuse...",noWebAudio:"Your browser does not support Web Audio.",done:"Ready!"},midiUploadButton:"Upload your MIDI files",exportAudio:aA,error:"Error",yes:"Yes",no:"No",demoSoundfontUploadButton:"Upload the soundfont",demoGithubPage:"Project page",demoDownload:{main:"Download",downloadLocal:{title:"Download Local Edition",description:"Download SpessaSynth: Local Edition to use offline on your computer"}},demoSongButton:"Demo Song",credits:"Credits",dropPrompt:"Drop files here...",warnings:{outOfMemory:"Your browser ran out of memory. Consider using Firefox or SF3 soundfont instead. (see console for error).",noMidiSupport:"No MIDI ports detected, this functionality will be disabled.",chromeMobile:"SpessaSynth performs poorly on Chrome Mobile. Consider using Firefox Android instead.",warning:"Warning"},hideTopBar:{title:"Hide top bar",description:"Hide the top (title) bar to provide a more seamless experience"},convertDls:{title:"DLS Conversion",message:"Looks like you've uploaded a DLS file. Do you want to convert it to SF2?"},musicPlayerMode:oA,settings:tA,synthesizerController:AA,sequencerController:rA};var cA={title:"Ustawienia wizualizacji",noteFallingTime:{title:"Czas spadania nut (ms)",description:"Jak szybko spadaj\u0105 z g\xF3ry nuty (w milisekundach)"},noteAfterTriggerTime:{title:"Czas po aktywacji nuty (ms)",description:"Jak d\u0142ugo nuty spadaj\u0105 po aktywacji. Zero oznacza, \u017Ce aktywuj\u0105 si\u0119 na dole."},waveformThickness:{title:"Grubo\u015B\u0107 lini fal (px)",description:"Jak grube s\u0105 linie fal d\u017Awi\u0119kowych"},waveformSampleSize:{title:"Rozmiar pr\xF3bki fali",description:"Jak szczeg\xF3\u0142owe s\u0105 linie fal d\u017Awi\u0119kowcyh (Uwaga: wysokie warto\u015Bci mog\u0105 pogorszy\u0107 wydajno\u015B\u0107) Pami\u0119taj, \u017Ce wysokie warto\u015Bci dodadz\u0105 op\xF3\u017Anienie do d\u017Awi\u0119ku, aby zsynchronizowa\u0107 fale z d\u017Awi\u0119kiem."},waveformAmplifier:{title:"Wzmacniasz fal",description:"Jak '\u017Cywe' s\u0105 fale. Kontroluje ich amplitud\u0119"},toggleWaveformsRendering:{title:"W\u0142\u0105cz rysowanie fal",description:"W\u0142\u0105cz rysowanie fal d\u017Awi\u0119kowych (16-tu kolorowych linii z ty\u0142u)"},toggleNotesRendering:{title:"W\u0142\u0105cz rysowanie nut",description:"W\u0142\u0105cz rysowanie spadaj\u0105cych nut podczas odtwarzania pliku MIDI"},toggleDrawingActiveNotes:{title:"W\u0142\u0105cz rysowanie aktywnych nut",description:"W\u0142\u0105cz efekt pod\u015Bwietlania si\u0119 nut przy aktywacji"},toggleDrawingVisualPitch:{title:"W\u0142\u0105cz wizualizacj\u0119 wysoko\u015Bci tonu",description:"W\u0142\u0105cz przesuwanie nut w lewo lub w prawo gdy wysoko\u015B\u0107 nut jest zmieniana"},toggleStabilizeWaveforms:{title:"W\u0142\u0105cz stabilizacj\u0119 fal",description:"W\u0142\u0105cz stabilizowanie fal d\u017Awi\u0119kowych"}};var gA={title:"Ustawienia pianina",selectedChannel:{title:"Wybrany kana\u0142",description:"Kana\u0142, do kt\xF3rego b\u0119dzie pod\u0142\u0105czone pianino",channelOption:"Kana\u0142 {0}"},keyboardSize:{title:"Rozmiar pianina",description:"Zakres klawiszy widocznych na pianine. Dostosowuje r\xF3wnie\u017C szeroko\u015B\u0107 wizualizowanych nut",full:"128 klawiszy (pe\u0142en zakres)",piano:"88 klawiszy (fortepian)",fiveOctaves:"5 oktaw",twoOctaves:"Dwie oktawy",useSongKeyRange:"U\u017Cyj zakresu utworu"},toggleTheme:{title:"W\u0142\u0105cz ciemny motyw",description:"W\u0142\u0105cz ciemny motyw wbudowanego pianina"},show:{title:"Poka\u017C",description:"Poka\u017C/ukryj pianino"}};var dA={title:"Ustawienia MIDI",midiInput:{title:"Wej\u015Bcie MIDI",description:"Port MIDI, kt\xF3ry b\u0119dzie nas\u0142uchiwany",disabled:"Wy\u0142\u0105czony"},midiOutput:{title:"Wyj\u015Bcie MIDI",description:"Port MIDI, do kt\xF3rego b\u0119dzie grany utw\xF3r",disabled:"U\u017Cyj SpessaSynth"},reminder:{title:"Zauwa\u017C, \u017Ce po pod\u0142\u0105czeniu nowego urz\u0105dzenia MIDI MUSISZ ZRESTARTOWA\u0106 PRZEGL\u0104DARK\u0118, aby pojawi\u0142o si\u0119 ono tutaj.",description:"Zauwa\u017C r\xF3wnie\u017C, \u017Ce Safari nie obs\u0142uguje WebMIDI, wi\u0119c musisz u\u017Cy\u0107 innej przegl\u0105darki, je\u015Bli jeste\u015B na Macu."}};var hA={toggleButton:"Ustawienia",mainTitle:"Ustawienia programu",rendererSettings:cA,keyboardSettings:gA,midiSettings:dA,interfaceSettings:{title:"Ustawienia interfejsu",toggleTheme:{title:"W\u0142\u0105cz ciemny motyw",description:"W\u0142\u0105cz ciemny motyw programu"},selectLanguage:{title:"J\u0119zyk",description:"Zmie\u0144 j\u0119zyk programu",helpTranslate:"Przet\u0142umacz SpessaSynth"},layoutDirection:{title:"Uk\u0142ad",description:"Kierunek uk\u0142adu wizualizacji i pianina",values:{downwards:"W d\xF3\u0142",upwards:"W g\xF3r\u0119",leftToRight:"Od lewej do prawej",rightToLeft:"Od prawej do lewej"}},reminder:{title:"Czy wiedzia\u0142e\u015B, \u017Ce mo\u017Cesz najecha\u0107 na ustawienia, aby uzyska\u0107 wi\u0119cej informacji?",description:"Tak jak ta!"},useFirefox:{firefox:"Przegl\u0105darka firefox",recommended:"jest mocno zalecana dla najlepszej wydajno\u015Bci."}}};var IA={toggleButton:{title:"Prze\u0142\u0105cz tryb odtwarzania muzyki",description:"Prze\u0142\u0105cz uproszczon\u0105 wersj\u0119 interfejsu, ukrywaj\u0105c pianino i wizualizacj\u0119 nut"},currentlyPlaying:"Teraz gramy:",nothingPlaying:"Nic teraz nie gra",nothingPlayingCopyright:"Wgraj jakie\u015B MIDI!"};var uA={voiceMeter:{title:"D\u017Awi\u0119ki: ",description:"Ilo\u015B\u0107 D\u017Awi\u0119k\xF3w: Aktualna ilo\u015B\u0107 d\u017Awi\u0119k\xF3w na kanale {0}"},pitchBendMeter:{title:"Wysoko\u015B\u0107: ",description:"Ko\u0142o Wysoko\u015Bci: Aktualna wysoko\u015B\u0107 tonu na kanale {0}"},panMeter:{title:"Stereo: ",description:"Poziom Stereo: Aktualny efekt stereo na kanale {0} (kliknij prawym aby zablokowa\u0107)"},expressionMeter:{title:"Ekspresja: ",description:"Poziom Ekspresji: Aktualna ekspresja (g\u0142o\u015Bno\u015B\u0107) kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},volumeMeter:{title:"G\u0142o\u015Bno\u015B\u0107: ",description:"Poziom G\u0142o\u015Bno\u015Bci: Aktualna g\u0142o\u015Bno\u015B\u0107 kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},modulationWheelMeter:{title:"Modulacja: ",description:"Ko\u0142o Modulacji: Aktualna g\u0142\u0119boko\u015B\u0107 modulacji (zazwyczaj vibrato) kana\u0142u {0} (kliknij prawym aby zablokowa\u0107)"},chorusMeter:{title:"Ch\xF3r: ",description:"Poziom Ch\xF3ru: Aktualny efekt ch\xF3ru na kanale {0} (kliknij prawym aby zablokowa\u0107)"},reverbMeter:{title:"Pog\u0142os: ",description:"Poziom Pog\u0142osu: Aktualny efekt pog\u0142osu na kanale {0} (kliknij prawym aby zablokowa\u0107)"},filterMeter:{title:"Filtr: ",description:"Poziom Filtra: Aktualny poziom filtra niskopasmowego na kanale {0} (kliknij prawym aby zablokowa\u0107)"},resonanceMeter:{title:"Rezonans: ",description:"Rezonans Filtra: Aktualny poziom rezonansu (Q) filtra dolnoprzepustowego zastosowanego do kana\u0142u {0} (kliknij prawym, aby zablokowa\u0107)"},attackMeter:{title:"Atak: ",description:"Czas Ataku: Aktualny czas ataku (szybko\u015B\u0107) kana\u0142u {0} (kliknij prawym, aby zablokowa\u0107)"},releaseMeter:{title:"Zwolnienie: ",description:"Czas Zwolnienia: Aktualny czas zwolnienia (szybko\u015B\u0107) kana\u0142u {0} (kliknij prawym, aby zablokowa\u0107)"},portamentoTimeMeter:{title:"Czas Porta.: ",description:"Czas Portamento: Aktualny czas portamento kana\u0142u {0} (kliknij prawym, aby zablokowa\u0107). Ustaw na 0, aby wy\u0142\u0105czy\u0107 portamento."},portamentoControlMeter:{title:"Kont. Porta.: ",description:"Kontrola Portamento: Numer klawisza pocz\u0105tkowego do glissanda na kanale {0} (prawdopodobnie nie chcesz tego zablokowa\u0107)"},groupSelector:{description:"Wybierz grup\u0119 kontroler\xF3w MIDI do manipulacji",effects:"Efekty",volumeEnvelope:"Obwiednia G\u0142o\u015Bno\u015Bci",filter:"Filtr",portamento:"Portamento"},transposeMeter:{title:"Transpozycja: ",description:"Transpozycja kana\u0142u: Aktualna transpozycja (przesuni\u0119cie klawiszy) kana\u0142u {0}"},presetSelector:{description:"Zmie\u0144 patch (instrument), kt\xF3rego u\u017Cywa kana\u0142 {0}",selectionPrompt:"Zmie\u0144 instrument kana\u0142u {0}",searchPrompt:"Wyszukaj..."},presetReset:{description:"Odblokuj kana\u0142 {0}, aby program m\xF3g\u0142 go zmienia\u0107"},soloButton:{description:"Solo na kanale {0}"},muteButton:{description:"Wycisz/odcisz kana\u0142 {0}"},drumToggleButton:{description:"Prze\u0142\u0105cz perkusj\u0119 na kanale {0}"}};var mA={button:{title:"Konfiguracja efekt\xF3w",description:"Skonfiguruj efekt pog\u0142osu i ch\xF3ru oraz wy\u0142\u0105cz niestandardowe wibrato"},reverbConfig:{title:"Konfiguracja pog\u0142osu",description:"Skonfiguruj procesor pog\u0142osu",impulseResponse:{title:"Impuls pog\u0142osu",description:"Wybierz impuls kszta\u0142tuj\u0105cy d\u017Awi\u0119k pog\u0142osu"}},chorusConfig:{title:"Konfiguracja ch\xF3ru",description:"Skonfiguruj procesor efektu ch\xF3ru",nodesAmount:{title:"Ilo\u015B\u0107 w\u0119z\u0142\xF3w",description:"Ilo\u015B\u0107 li\u0144 op\xF3\u017Aniaj\u0105cych dla ka\u017Cdego kana\u0142u stereo"},defaultDelay:{title:"Op\xF3\u017Anienie (s)",description:"Op\xF3\u017Anienie pierwszej linii, w sekundach"},delayVariation:{title:"Przyrost op\xF3\u017Anienia (s)",description:"Przyrost op\xF3\u017Anienia ka\u017Cdej kolejnej linii w sekundach"},stereoDifference:{title:"R\xF3\u017Cnica stereo (s)",description:"R\xF3\u017Cnica op\xF3\u017Anie\u0144 w kana\u0142ach stereo (dodane do lewego kana\u0142u i odj\u0119te od prawego sekundy)"},oscillatorFrequency:{title:"Cz\u0119stotliwo\u015B\u0107 LFO (Hz)",description:"Cz\u0119stotliwo\u015B\u0107 pierwszego LFO kontroluj\u0105cego op\xF3\u017Anienie pierwszej linii w Hz."},frequencyVariation:{title:"Przyrost LFO (Hz)",description:"Przyrost cz\u0119stotliwo\u015Bci LFO ka\u017Cdej kolejnej linii w Hz"},oscillatorGain:{title:"Si\u0142a LFO (s)",description:"Jak bardzo LFO b\u0119dzie wp\u0142ywa\u0107 na op\xF3\u017Anienie linii, w sekundach"},apply:{title:"Zastosuj",description:"Zastosuj wybrane ustawienia"}}};var pA={button:{title:"Modyfikacja klawiszy",description:"Zmodyfikuj indywidualne parametry klawiszy."},mainTitle:"Edytor modyfikacji klawiszy",detailedDescription:`To menu pozwala Ci na modyfikacj\u0119 danych klawiszy na danym kanale.
Aktualnie mo\u017Cesz nadpisa\u0107 si\u0142\u0119 nacisku oraz przypisa\u0107 instrument do danego klawisza.
To jest szczeg\xF3lnie przydatne w przypadku perkusji.`,prompt:"Co chcesz teraz zrobi\u0107?",selectKey:{prompt:"Naci\u015Bnij klawisz kt\xF3ry chcesz zmodyfikowa\u0107.",title:"Wybierz klawisz",change:"Zmie\u0144 klawisz"},selectedChannel:{title:"Wybrany kana\u0142",description:"Kana\u0142 do kt\xF3rego nale\u017Cy klawisz kt\xF3ry chcesz zmodyfikowa\u0107."},selectedKey:{title:"Wybrany klawisz: {0}",description:"Wybra\u0142e\u015B/a\u015B klawisz MIDI o numerze {0}."},modifyKey:{title:"Zmodyfikuj klawisz",description:"Zmodyfikuj pojedynczy klawisz na danym kanale",velocity:{title:"Si\u0142a nacisku",description:"Si\u0142a nacisku dla tego klawisza. Pozostaw -1 dla braku zmian."},preset:{title:"Nadpisanie instrumentu",description:"Instrument dla tego klawisza.",unchanged:"Bez zmian"},apply:{title:"Zastosuj",description:"Zastosuj modyfikacj\u0119"}},removeModification:{title:"Usu\u0144 modyfikacj\u0119",description:"Usu\u0144 modyfikacj\u0119 z klawisza na danym kanale.",remove:{title:"Usu\u0144",description:"Usu\u0144 ten modyfikator."}},resetModifications:{title:"Zresetuj zmiany",description:"Wyczy\u015B\u0107 i usu\u0144 wszystkie zastosowane zmiany",confirmation:{title:"Potwierdzenie",description:"Jeste\u015B pewien, \u017Ce chcesz usun\u0105\u0107 WSZYSTKIE zmiany?"}}};var CA={toggleButton:{title:"Kontroler syntezatora",description:"Poka\u017C kontroler syntezatora"},mainVoiceMeter:{title:"D\u017Awi\u0119ki: ",description:"Ca\u0142kowita ilo\u015B\u0107 aktualnie odtwarzanych d\u017Awi\u0119k\xF3w"},mainVolumeMeter:{title:"G\u0142o\u015Bno\u015B\u0107: ",description:"Aktualna g\u0142o\u015Bno\u015B\u0107 syntezatora"},mainPanMeter:{title:"Stereo: ",description:"Aktualna pozycja stereo syntezatora"},mainTransposeMeter:{title:"Transpozycja: ",description:"Transpozycjonuje syntezator (w semitonach)"},midiPanic:{title:"MIDI Panic",description:"Zatrzymuje wszystkie d\u017Awi\u0119ki"},systemReset:{title:"Reset systemu",description:"Resetuje wszystkie kontroleru do ich domy\u015Blnych warto\u015Bci"},blackMidiMode:{title:"Tryb black MIDI",description:"Prze\u0142\u0105cza tryb wysokiej wydajno\u015Bci, upraszczaj\u0105c wygl\u0105d i pogarszaj\u0105c jako\u015B\u0107 d\u017Awi\u0119ku"},disableCustomVibrato:{title:"Wy\u0142\u0105cz niestandardowe vibrato",description:"Wy\u0142\u0105cza niestandardowe (NRPN) vibrato. Wymaga prze\u0142adowania strony aby je ponownie w\u0142\u0105czy\u0107"},helpButton:{title:"Pomoc",description:"Poka\u017C instrukcj\u0119 obs\u0142ugi"},interpolation:{description:"Wybierz metod\u0119 interpolacji",linear:"Interpolacja liniowa",nearestNeighbor:"Najbli\u017Cszy s\u0105siad",cubic:"Interpolacja Sze\u015Bcienna"},advancedConfiguration:{title:"Zaawansowane Ustawienia",description:"Skonfiguruj zaawansowane ustawienia syntezatora"},voiceCap:{title:"Limit g\u0142os\xF3w",description:"Maksymalna ilo\u015B\u0107 g\u0142os\xF3w mog\u0105ca gra\u0107 jednocze\u015Bnie"},holdPedalDown:"Peda\u0142 podtrzymania naci\u015Bni\u0119ty (Shift)",channelController:uA,effectsConfig:mA,keyModifiers:pA};var EA={previousSong:"Poprzedni utw\xF3r",nextSong:"Nast\u0119pny utw\xF3r",loopThis:"Odtwarzaj w p\u0119tli",playPause:"Odtw\xF3rz/wstrzymaj",shuffleSongs:"Losowa kolejno\u015B\u0107",playbackRate:"Pr\u0119dko\u015B\u0107 odtwarzania",lyrics:{show:"Poka\u017C tekst",title:"Odczytany tekst",noLyrics:"Brak dost\u0119pnego tekstu...",otherText:{title:"Inny tekst"},subtitles:{title:"Wgraj napisy ASS",description:"Wgraj swoje w\u0142asne napisy w formacie ASS (.ass)"}}};var BA={button:{title:"Zapisz",description:"Zapisz w r\xF3\u017Cnych formatach"},formats:{title:"Wybierz format",formats:{wav:{button:{title:"Audio WAV (.wav)",description:"Eksportuj utw\xF3r ze zmianami jako plik audio .wav"},options:{title:"Opcje eksportu audio",description:"Eksportuj MIDI jako WAV, uwzgl\u0119dniaj\u0105c wszystkie modyfikacje wykonane w kontrolerze.",confirm:"Eksportuj",normalizeVolume:{title:"Normalizuj g\u0142o\u015Bno\u015B\u0107",description:"Eksportuj audio z tak\u0105 sam\u0105 g\u0142o\u015Bno\u015Bci\u0105, niezale\u017Cnie od g\u0142o\u015Bno\u015Bci MIDI."},additionalTime:{title:"Dodatkowy czas (s)",description:"Dodatkowy czas na ko\u0144cu utworu aby pozwoli\u0107 na wyciszenie si\u0119 d\u017Awi\u0119ku. (sekundy)"},sampleRate:{title:"Cz\u0119stotliwo\u015B\u0107",description:"Cz\u0119stotliwo\u015B\u0107 pr\xF3bkowania d\u017Awi\u0119ku. Pozostaw bez zmian, chyba \u017Ce wiesz, co robisz."},separateChannels:{title:"Rozdziel kana\u0142y",description:"Zapisz ka\u017Cdy kana\u0142 w osobnym pliuku. Przydatne dla rzeczy jak widok oscyloskopowy. Nale\u017Cy pami\u0119ta\u0107 \u017Ce to wy\u0142\u0105cza ekfet pog\u0142osu i ch\xF3ru",saving:{title:"Pliki audio kana\u0142\xF3w",save:"Zapisz kana\u0142 {0}"}},loopCount:{title:"Ilo\u015B\u0107 p\u0119tli",description:"Ilo\u015B\u0107 razy zap\u0119tlenia utworu"}},exportMessage:{message:"Eksportowanie audio...",estimated:"Pozosta\u0142o:",convertWav:"Konwertowanie do wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Eksportuj plik MIDI wraz ze zmianami instrument\xF3w i kontroler\xF3w"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Eksportuj SoundFont"},options:{title:"Opcje eksportu soundfonta",confirm:"Eksportuj",trim:{title:"Zmniejsz",description:"Zmniejsz SoundFont aby zawiera\u0142 tylko klawisze u\u017Cyte w MIDI"},compress:{title:"Kompresuj",description:"Zkompresuj pr\xF3bki kt\xF3re nie s\u0105 zkompresowane przy u\u017Cyciu stratnego kodeka Ogg Vorbis. Znacznie zmniejsza rozmiar pliku.Je\u015Bli soundfont by\u0142 ju\u017C skompresowany, nie zostanie zdekompresowany nawet gdy ta opcja jest wy\u0142\u0105czona"},quality:{title:"Jako\u015B\u0107 kompresji",description:"Jako\u015B\u0107 skompresowanych pr\xF3bek. Im wy\u017Csza tym lepsza"}}},dls:{button:{title:"DLS (.dls)",description:"Eksportuj SoundFonta jako DLS"},warning:{title:"Ostrze\u017Cenie DLS",message:"Eksport do formatu DLS jest ograniczony i mo\u017Ce utworzy\u0107 uszkodzone pliki.",details:"Wi\u0119cej informacji",confirm:"Eksportuj i tak"}},rmidi:{button:{title:"Osadzone MIDI (.rmi)",description:"Eksportuj zmodyfikowane MIDI wraz ze zmniejszonym soundfontem jako jeden plik. Uwaga: ten format nie jest szeroko wspierany"},progress:{title:"Exportowanie osadzonego MIDI...",loading:"Wczytywanie soundfonta i MIDI...",modifyingMIDI:"Modyfikowanie MIDI...",modifyingSoundfont:"Zmniejszanie Soundfonta... (troch\u0119 to zajmie!)",saving:"Zapisywanie RMIDI...",done:"Gotowe!"},options:{title:"Opcje eksportu RMIDI",description:"Osad\u017A SoundFonta + MIDI jako RMIDI i dodaj wszystkie modyfikacje wykonane z kontrolera.",confirm:"Eksportuj",compress:{title:"Kompresuj",description:"Skompresuj osadzonego soundfonta za pomoc\u0105 stratnego kodeka Ogg Vorbis. Znacznie zmniejsza rozmiar pliku. Zalecane."},quality:{title:"Jako\u015B\u0107 kompresji",description:"Jako\u015B\u0107 skompresowanych pr\xF3bek. Im wy\u017Csza tym lepsza"},bankOffset:{title:"Przesuni\u0119cie banku",description:"Przesuni\u0119cie banku w pliku. Zalecane 0. Zmie\u0144 tylko je\u015Bli wiesz co robisz."},adjust:{title:"Dostosuj MIDI",description:"Dostosuj MIDI do SoundFonta. Pozostaw w\u0142\u0105czone, chyba \u017Ce wiesz co robisz."}}}},metadata:{songTitle:{title:"Tytu\u0142:",description:"Tytu\u0142 utworu"},album:{title:"Album:",description:"Album utworu"},artist:{title:"Tw\xF3rca:",description:"Tw\xF3rca utworu"},albumCover:{title:"Ok\u0142adka albumu:",description:"Ok\u0142adka albumu utworu"},creationDate:{title:"Stworzono:",description:"Data stworzenia utworu"},genre:{title:"Gatunek:",description:"Gatunek utworu"},comment:{title:"Komentarz:",description:"Komentarz do utworu"},duration:{title:"Czas trwania:",description:"Czas trwania utworu"},subject:{title:"Temat:",description:"Temat utworu"}}}};var fA={localeName:"Polski",titleMessage:"SpessaSynth: JavaScriptowy Syntezator SoundFont2",demoTitleMessage:"SpessaSynth: JavaScriptowy Syntezator SF2/DLS Wersja Demo",synthInit:{genericLoading:"Wczytywanie...",loadingSoundfont:"Wczytywanie SoundFonta...",loadingBundledSoundfont:"Wczytywanie wbudowanego SoundFonta...",startingSynthesizer:"Uruchamianie syntezatora...",savingSoundfont:"Zapisywanie SoundFonta do przegl\u0105darki...",noWebAudio:"Twoja przegl\u0105darka nie wspiera Web Audio.",done:"Gotowe!"},midiUploadButton:"Wgraj Twoje pliki MIDI",midiRenderButton:{title:"Eksportuj audio",description:"Zapisz audio do pliku WAV lub MIDI"},exportAudio:BA,yes:"Tak",no:"Nie",error:"B\u0142\u0105d",demoSoundfontUploadButton:"Wgraj SoundFonta",demoGithubPage:"Strona projektu",demoDownload:{main:"Pobierz",downloadLocal:{title:"Pobierz Edycj\u0119 Lokaln\u0105",description:"Pobierz SpessaSynth: Edycja Lokalna aby u\u017Cywa\u0107 jej na swoim komputerze bez internetu"}},demoSongButton:"Piosenka demo",credits:"Tw\xF3rcy",dropPrompt:"Upu\u015B\u0107 pliki tutaj...",warnings:{outOfMemory:"Twojej przegl\u0105darce sko\u0144czy\u0142a si\u0119 pami\u0119\u0107. Rozwa\u017C u\u017Cycie Firefoxa albo plik\xF3w SF3. (Zobacz b\u0142\u0105d w konsoli)",noMidiSupport:"Nie wykryto MIDI. Korzystanie z port\xF3w MIDI nie b\u0119dzie dost\u0119pne.",chromeMobile:"SpessaSynth dzia\u0142a wolno na Chromie na telefon. Rozwa\u017C u\u017Cycie Firefoxa Android.",warning:"Uwaga"},hideTopBar:{title:"Ukryj g\xF3rny pasek",description:"Ukryj pasek tytu\u0142owy w celu poprawy widoczno\u015Bci na pionowych ekranach"},convertDls:{title:"Konwersja DLS",message:"Wygl\u0105da na to, \u017Ce wgra\u0142e\u015B plik DLS. Czy chcesz przekonwertowa\u0107 go do SF2?"},musicPlayerMode:IA,settings:hA,synthesizerController:CA,sequencerController:EA};var QA={title:"\u30EC\u30F3\u30C0\u30E9\u30FC\u8A2D\u5B9A",noteFallingTime:{title:"\u30CE\u30FC\u30C8\u306E\u843D\u4E0B\u6642\u9593\uFF08\u30DF\u30EA\u79D2\uFF09",description:"\u30CE\u30FC\u30C8\u304C\u843D\u3061\u308B\u901F\u3055\uFF08\u8996\u899A\u7684\u306B\uFF09"},waveformThickness:{title:"\u6CE2\u5F62\u306E\u7DDA\u306E\u592A\u3055\uFF08\u30D4\u30AF\u30BB\u30EB\uFF09",description:"\u6CE2\u5F62\u306E\u7DDA\u306E\u592A\u3055"},waveformSampleSize:{title:"\u6CE2\u5F62\u306E\u30B5\u30F3\u30D7\u30EB\u30B5\u30A4\u30BA",description:"\u6CE2\u5F62\u306E\u8A73\u7D30\u5EA6\uFF08\u6CE8\uFF1A\u9AD8\u3044\u5024\u306F\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u306B\u5F71\u97FF\u3092\u4E0E\u3048\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\uFF09 \u9AD8\u3044\u5024\u306F\u3001\u6CE2\u5F62\u3092\u30AA\u30FC\u30C7\u30A3\u30AA\u3068\u540C\u671F\u3055\u305B\u308B\u305F\u3081\u306B\u30AA\u30FC\u30C7\u30A3\u30AA\u306B\u9045\u5EF6\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002"},waveformAmplifier:{title:"\u6CE2\u5F62\u306E\u5897\u5E45\u5668",description:"\u6CE2\u5F62\u306E\u9BAE\u3084\u304B\u3055"},toggleWaveformsRendering:{title:"\u6CE2\u5F62\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u5207\u308A\u66FF\u3048",description:"\u30C1\u30E3\u30F3\u30CD\u30EB\u6CE2\u5F62\u306E\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3092\u5207\u308A\u66FF\u3048\u307E\u3059\uFF08\u30AA\u30FC\u30C7\u30A3\u30AA\u3092\u8868\u793A\u3059\u308B\u30AB\u30E9\u30D5\u30EB\u306A\u7DDA\uFF09"},toggleNotesRendering:{title:"\u30CE\u30FC\u30C8\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u5207\u308A\u66FF\u3048",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u518D\u751F\u3059\u308B\u969B\u306E\u843D\u4E0B\u30CE\u30FC\u30C8\u306E\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleDrawingActiveNotes:{title:"\u30A2\u30AF\u30C6\u30A3\u30D6\u30CE\u30FC\u30C8\u306E\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048",description:"\u30CE\u30FC\u30C8\u304C\u62BC\u3055\u308C\u305F\u3068\u304D\u306B\u5149\u308A\u8F1D\u304F\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleDrawingVisualPitch:{title:"\u30D3\u30B8\u30E5\u30A2\u30EB\u30D4\u30C3\u30C1\u63CF\u753B\u306E\u5207\u308A\u66FF\u3048",description:"\u30D4\u30C3\u30C1\u30DB\u30A4\u30FC\u30EB\u304C\u9069\u7528\u3055\u308C\u305F\u3068\u304D\u306B\u30CE\u30FC\u30C8\u304C\u5DE6\u53F3\u306B\u30B9\u30E9\u30A4\u30C9\u3059\u308B\u63CF\u753B\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},toggleStabilizeWaveforms:{title:"\u6CE2\u5F62\u3092\u5B89\u5B9A\u3055\u305B\u308B",description:"\u30AA\u30FC\u30C7\u30A3\u30AA\u6CE2\u5F62\u3092\u5B89\u5B9A\u3055\u305B\u308B\u8A2D\u5B9A\u3092\u5207\u308A\u66FF\u3048\u3001\u6CE2\u5F62\u3092\u56FA\u5B9A\u3057\u307E\u3059\u3002"}};var yA={title:"\u30AD\u30FC\u30DC\u30FC\u30C9\u8A2D\u5B9A",selectedChannel:{title:"\u9078\u629E\u3055\u308C\u305F\u30C1\u30E3\u30F3\u30CD\u30EB",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u304C\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u9001\u4FE1\u3059\u308B\u30C1\u30E3\u30F3\u30CD\u30EB",channelOption:"\u30C1\u30E3\u30F3\u30CD\u30EB {0}"},keyboardSize:{title:"\u30AD\u30FC\u30DC\u30FC\u30C9\u30B5\u30A4\u30BA",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u306B\u8868\u793A\u3055\u308C\u308B\u30AD\u30FC\u306E\u7BC4\u56F2\u3002MIDI\u30CE\u30FC\u30C8\u306E\u30B5\u30A4\u30BA\u306B\u5FDC\u3058\u3066\u8ABF\u6574\u3055\u308C\u307E\u3059",full:"128\u30AD\u30FC\uFF08\u5168\u4F53\uFF09",piano:"88\u30AD\u30FC\uFF08\u30D4\u30A2\u30CE\uFF09",fiveOctaves:"5\u30AA\u30AF\u30BF\u30FC\u30D6",useSongKeyRange:"\u66F2\u306E\u30AD\u30FC\u7BC4\u56F2\u3092\u4F7F\u7528",twoOctaves:"\u30AA\u30AF\u30BF\u30FC\u30D6"},toggleTheme:{title:"\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048",description:"\u30AD\u30FC\u30DC\u30FC\u30C9\u306E\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},show:{title:"\u8868\u793A",description:"MIDI\u30AD\u30FC\u30DC\u30FC\u30C9\u3092\u8868\u793A/\u975E\u8868\u793A"}};var SA={title:"MIDI\u8A2D\u5B9A",midiInput:{title:"MIDI\u5165\u529B",description:"MIDI\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u53D7\u4FE1\u3059\u308B\u30DD\u30FC\u30C8",disabled:"\u7121\u52B9"},midiOutput:{title:"MIDI\u51FA\u529B",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u518D\u751F\u3059\u308B\u30DD\u30FC\u30C8",disabled:"SpessaSynth\u3092\u4F7F\u7528"},reminder:{title:"\u65B0\u3057\u3044MIDI\u30C7\u30D0\u30A4\u30B9\u3092\u63A5\u7D9A\u3057\u305F\u5F8C\u3001\u3053\u3053\u306B\u8868\u793A\u3059\u308B\u306B\u306F\u30D6\u30E9\u30A6\u30B6\u3092\u518D\u8D77\u52D5\u3059\u308B\u5FC5\u8981\u304C\u3042\u308B\u3053\u3068\u306B\u6CE8\u610F\u3057\u3066\u304F\u3060\u3055\u3044\u3002",description:"\u307E\u305F\u3001Safari\u306FWebMIDI\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001Mac\u306E\u5834\u5408\u306F\u5225\u306E\u30D6\u30E9\u30A6\u30B6\u3092\u4F7F\u7528\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"}};var wA={toggleButton:"\u8A2D\u5B9A",mainTitle:"\u30D7\u30ED\u30B0\u30E9\u30E0\u8A2D\u5B9A",rendererSettings:QA,keyboardSettings:yA,midiSettings:SA,interfaceSettings:{title:"\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u8A2D\u5B9A",toggleTheme:{title:"\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048",description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u30C6\u30FC\u30DE\u3092\u5207\u308A\u66FF\u3048\u307E\u3059"},selectLanguage:{title:"\u8A00\u8A9E",description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u306E\u8A00\u8A9E\u3092\u5909\u66F4\u3057\u307E\u3059"},layoutDirection:{title:"\u30EC\u30A4\u30A2\u30A6\u30C8\u306E\u65B9\u5411",description:"\u30EC\u30F3\u30C0\u30E9\u30FC\u3068\u30AD\u30FC\u30DC\u30FC\u30C9\u306E\u30EC\u30A4\u30A2\u30A6\u30C8\u65B9\u5411",values:{downwards:"\u4E0B\u5411\u304D",upwards:"\u4E0A\u5411\u304D",leftToRight:"\u5DE6\u304B\u3089\u53F3",rightToLeft:"\u53F3\u304B\u3089\u5DE6"}},reminder:{title:"\u8A2D\u5B9A\u306B\u30AB\u30FC\u30BD\u30EB\u3092\u5408\u308F\u305B\u308B\u3068\u3001\u8A73\u7D30\u60C5\u5831\u3092\u8868\u793A\u3067\u304D\u308B\u3053\u3068\u3092\u77E5\u3063\u3066\u3044\u307E\u3057\u305F\u304B\uFF1F",description:"\u3053\u306E\u3088\u3046\u306B\uFF01"}}};var DA={toggleButton:{title:"\u97F3\u697D\u30D7\u30EC\u30A4\u30E4\u30FC\u30E2\u30FC\u30C9\u306E\u5207\u308A\u66FF\u3048",description:"\u7C21\u7565\u5316\u3055\u308C\u305FUI\u30D0\u30FC\u30B8\u30E7\u30F3\u306B\u5207\u308A\u66FF\u3048\u3001\u30AD\u30FC\u30DC\u30FC\u30C9\u3068\u30CE\u30FC\u30C8\u306E\u8996\u899A\u5316\u3092\u96A0\u3057\u307E\u3059"},currentlyPlaying:"\u518D\u751F\u4E2D:",nothingPlaying:"\u518D\u751F\u3057\u3066\u3044\u308B\u3082\u306E\u306F\u3042\u308A\u307E\u305B\u3093",nothingPlayingCopyright:"MIDI\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u304F\u3060\u3055\u3044\uFF01"};var kA={voiceMeter:{title:"\u30DC\u30A4\u30B9: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3067\u518D\u751F\u4E2D\u306E\u30DC\u30A4\u30B9\u306E\u73FE\u5728\u306E\u6570"},pitchBendMeter:{title:"\u30D4\u30C3\u30C1: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30D4\u30C3\u30C1\u30D9\u30F3\u30C9"},panMeter:{title:"\u30D1\u30F3: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30B9\u30C6\u30EC\u30AA\u30D1\u30F3\u30CB\u30F3\u30B0\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},expressionMeter:{title:"\u30A8\u30AF\u30B9\u30D7\u30EC\u30C3\u30B7\u30E7\u30F3: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u8868\u73FE\uFF08\u97F3\u91CF\uFF09\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},volumeMeter:{title:"\u30DC\u30EA\u30E5\u30FC\u30E0: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u97F3\u91CF\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},modulationWheelMeter:{title:"\u30E2\u30B8\u30E5\u30EC\u30FC\u30B7\u30E7\u30F3\u30DB\u30A4\u30FC\u30EB: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u30E2\u30B8\u30E5\u30EC\u30FC\u30B7\u30E7\u30F3\uFF08\u901A\u5E38\u306F\u30D3\u30D6\u30E9\u30FC\u30C8\uFF09\u306E\u6DF1\u3055\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},chorusMeter:{title:"\u30B3\u30FC\u30E9\u30B9: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30B3\u30FC\u30E9\u30B9\u30A8\u30D5\u30A7\u30AF\u30C8\u306E\u30EC\u30D9\u30EB\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},reverbMeter:{title:"\u30EA\u30D0\u30FC\u30D6: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u73FE\u5728\u306E\u30EA\u30D0\u30FC\u30D6\u30A8\u30D5\u30A7\u30AF\u30C8\u306E\u30EC\u30D9\u30EB\uFF08\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF\uFF09"},filterMeter:{title:"\u30D5\u30A3\u30EB\u30BF\u30FC: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306B\u9069\u7528\u3055\u308C\u3066\u3044\u308B\u30ED\u30FC\u30D1\u30B9\u30D5\u30A3\u30EB\u30BF\u30FC\u306E\u30AB\u30C3\u30C8\u30AA\u30D5\u306E\u73FE\u5728\u306E\u30EC\u30D9\u30EB (\u53F3\u30AF\u30EA\u30C3\u30AF\u3067\u30ED\u30C3\u30AF)"},transposeMeter:{title:"\u30C8\u30E9\u30F3\u30B9\u30DD\u30FC\u30BA: ",description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u73FE\u5728\u306E\u79FB\u8ABF\uFF08\u30AD\u30FC\u30B7\u30D5\u30C8\uFF09"},presetSelector:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u304C\u4F7F\u7528\u3059\u308B\u30D1\u30C3\u30C1\uFF08\u697D\u5668\uFF09\u3092\u5909\u66F4",selectionPrompt:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u697D\u5668\u3092\u5909\u66F4\u3059\u308B",searchPrompt:"\u691C\u7D22..."},presetReset:{description:"\u30D7\u30ED\u30B0\u30E9\u30E0\u5909\u66F4\u3092\u8A31\u53EF\u3059\u308B\u305F\u3081\u306B\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u306E\u30ED\u30C3\u30AF\u3092\u89E3\u9664"},soloButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3092\u5358\u72EC\u518D\u751F"},muteButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3092\u30DF\u30E5\u30FC\u30C8/\u30DF\u30E5\u30FC\u30C8\u89E3\u9664"},drumToggleButton:{description:"\u30C1\u30E3\u30F3\u30CD\u30EB {0} \u3067\u30C9\u30E9\u30E0\u3092\u5207\u308A\u66FF\u3048"}};var bA={toggleButton:{title:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3092\u8868\u793A"},mainVoiceMeter:{title:"\u30DC\u30A4\u30B9: ",description:"\u73FE\u5728\u518D\u751F\u4E2D\u306E\u30DC\u30A4\u30B9\u306E\u7DCF\u6570"},mainVolumeMeter:{title:"\u30DC\u30EA\u30E5\u30FC\u30E0: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u73FE\u5728\u306E\u30DE\u30B9\u30BF\u30FC\u30DC\u30EA\u30E5\u30FC\u30E0"},mainPanMeter:{title:"\u30D1\u30F3: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u73FE\u5728\u306E\u30DE\u30B9\u30BF\u30FC\u30B9\u30C6\u30EC\u30AA\u30D1\u30F3\u30CB\u30F3\u30B0"},mainTransposeMeter:{title:"\u30C8\u30E9\u30F3\u30B9\u30DD\u30FC\u30BA: ",description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u3092\u79FB\u8ABF\u3057\u307E\u3059\uFF08\u30BB\u30DF\u30C8\u30FC\u30F3\u307E\u305F\u306F\u30AD\u30FC\uFF09"},midiPanic:{title:"MIDI\u30D1\u30CB\u30C3\u30AF",description:"\u3059\u3079\u3066\u306E\u30DC\u30A4\u30B9\u3092\u5373\u5EA7\u306B\u505C\u6B62"},systemReset:{title:"\u30B7\u30B9\u30C6\u30E0\u30EA\u30BB\u30C3\u30C8",description:"\u3059\u3079\u3066\u306E\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3092\u30C7\u30D5\u30A9\u30EB\u30C8\u5024\u306B\u30EA\u30BB\u30C3\u30C8"},blackMidiMode:{title:"\u30D6\u30E9\u30C3\u30AFMIDI\u30E2\u30FC\u30C9",description:"\u9AD8\u6027\u80FD\u30E2\u30FC\u30C9\u3092\u5207\u308A\u66FF\u3048\u3001\u898B\u305F\u76EE\u3092\u7C21\u7D20\u5316\u3057\u3001\u30CE\u30FC\u30C8\u3092\u901F\u304F\u6D88\u53BB"},disableCustomVibrato:{title:"\u30AB\u30B9\u30BF\u30E0\u30D3\u30D6\u30E9\u30FC\u30C8\u3092\u7121\u52B9\u5316",description:"\u30AB\u30B9\u30BF\u30E0\uFF08NRPN\uFF09\u30D3\u30D6\u30E9\u30FC\u30C8\u3092\u6C38\u4E45\u306B\u7121\u52B9\u5316\u3002\u518D\u5EA6\u6709\u52B9\u5316\u3059\u308B\u306B\u306F\u30A6\u30A7\u30D6\u30B5\u30A4\u30C8\u3092\u30EA\u30ED\u30FC\u30C9"},helpButton:{title:"\u30D8\u30EB\u30D7",description:"\u4F7F\u7528\u30AC\u30A4\u30C9\u3092\u8868\u793A\u3057\u307E\u3059"},interpolation:{description:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u306E\u88DC\u9593\u65B9\u6CD5\u3092\u9078\u629E",linear:"\u30EA\u30CB\u30A2",nearestNeighbor:"\u306A\u3057"},channelController:kA};var vA={previousSong:"\u524D\u306E\u66F2",nextSong:"\u6B21\u306E\u66F2",loopThis:"\u3053\u306E\u66F2\u3092\u30EB\u30FC\u30D7",playPause:"\u518D\u751F/\u4E00\u6642\u505C\u6B62",lyrics:{show:"\u6B4C\u8A5E\u3092\u8868\u793A",title:"\u30C7\u30B3\u30FC\u30C9\u3055\u308C\u305F\u30C6\u30AD\u30B9\u30C8",noLyrics:"\u6B4C\u8A5E\u304C\u3042\u308A\u307E\u305B\u3093...",otherText:{title:"\u305D\u306E\u4ED6\u306E\u30C6\u30AD\u30B9\u30C8"}}};var xA={button:{title:"\u97F3\u58F0\u3092\u4FDD\u5B58",description:"\u97F3\u58F0\u3092WAV\u3001MIDI\u3001SF2\u3001\u307E\u305F\u306FRMI\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u4FDD\u5B58"},formats:{title:"\u30D5\u30A9\u30FC\u30DE\u30C3\u30C8\u3092\u9078\u629E",formats:{wav:{button:{title:"WAV\u97F3\u58F0 (.wav)",description:"\u5909\u66F4\u3092\u52A0\u3048\u305F\u66F2\u3092.wav\u30AA\u30FC\u30C7\u30A3\u30AA\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},options:{title:"WAV\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",normalizeVolume:{title:"\u97F3\u91CF\u306E\u6B63\u898F\u5316",description:"MIDI\u306E\u97F3\u91CF\u306B\u304B\u304B\u308F\u3089\u305A\u3001\u97F3\u91CF\u3092\u4E00\u5B9A\u306B\u4FDD\u3061\u307E\u3059\u3002\u63A8\u5968\u8A2D\u5B9A\u3067\u3059\u3002"},additionalTime:{title:"\u8FFD\u52A0\u6642\u9593\uFF08\u79D2\uFF09",description:"\u97F3\u304C\u30D5\u30A7\u30FC\u30C9\u30A2\u30A6\u30C8\u3059\u308B\u305F\u3081\u306B\u66F2\u306E\u6700\u5F8C\u306B\u8FFD\u52A0\u3059\u308B\u6642\u9593\u3067\u3059\u3002\uFF08\u79D2\uFF09"},separateChannels:{title:"\u30C1\u30E3\u30F3\u30CD\u30EB\u3092\u5206\u5272",description:"\u5404\u30C1\u30E3\u30F3\u30CD\u30EB\u3092\u5225\u3005\u306E\u30D5\u30A1\u30A4\u30EB\u3068\u3057\u3066\u4FDD\u5B58\u3057\u307E\u3059\u3002\u30AA\u30B7\u30ED\u30B9\u30B3\u30FC\u30D7\u30D3\u30E5\u30FC\u30A2\u306A\u3069\u306B\u4FBF\u5229\u3067\u3059\u3002\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u4F7F\u7528\u3059\u308B\u3068\u30EA\u30D0\u30FC\u30D6\u3084\u30B3\u30FC\u30E9\u30B9\u304C\u7121\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",saving:{title:"\u30C1\u30E3\u30F3\u30CD\u30EB\u30D5\u30A1\u30A4\u30EB",save:"\u30C1\u30E3\u30F3\u30CD\u30EB{0}\u3092\u4FDD\u5B58"}},loopCount:{title:"\u30EB\u30FC\u30D7\u56DE\u6570",description:"\u66F2\u3092\u30EB\u30FC\u30D7\u3059\u308B\u56DE\u6570"}},exportMessage:{message:"WAV\u97F3\u58F0\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059...",estimated:"\u6B8B\u308A\u6642\u9593:",convertWav:"WAV\u306B\u5909\u63DB\u4E2D..."}},midi:{button:{title:"MIDI (.mid)",description:"\u30B3\u30F3\u30C8\u30ED\u30FC\u30E9\u30FC\u3068\u697D\u5668\u306E\u5909\u66F4\u304C\u9069\u7528\u3055\u308C\u305FMIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"}},soundfont:{button:{title:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8 (.sf2)",description:"SoundFont2\u30D5\u30A1\u30A4\u30EB\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},options:{title:"SF\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",trim:{title:"\u30C8\u30EA\u30DF\u30F3\u30B0",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3067\u4F7F\u7528\u3055\u308C\u3066\u3044\u308B\u697D\u5668\u3068\u30B5\u30F3\u30D7\u30EB\u3060\u3051\u306B\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059"},compress:{title:"\u5727\u7E2E",description:"\u672A\u5727\u7E2E\u306E\u5834\u5408\u306F\u3001Ogg Vorbis\u306E\u30ED\u30B9\u5727\u7E2E\u3067\u30B5\u30F3\u30D7\u30EB\u3092\u5727\u7E2E\u3057\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u304C\u5927\u5E45\u306B\u524A\u6E1B\u3055\u308C\u307E\u3059\u3002\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u304C\u3059\u3067\u306B\u5727\u7E2E\u3055\u308C\u3066\u3044\u308B\u5834\u5408\u3001\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u7121\u52B9\u306B\u3057\u3066\u3082\u518D\u5727\u7E2E\u3055\u308C\u308B\u3053\u3068\u306F\u3042\u308A\u307E\u305B\u3093"},quality:{title:"\u5727\u7E2E\u54C1\u8CEA",description:"\u5727\u7E2E\u306E\u54C1\u8CEA\u3067\u3059\u3002\u9AD8\u3044\u307B\u3069\u826F\u3044\u3067\u3059"}}},rmidi:{button:{title:"\u57CB\u3081\u8FBC\u307FMIDI (.rmi)",description:"\u5909\u66F4\u3055\u308C\u305FMIDI\u3068\u30C8\u30EA\u30DF\u30F3\u30B0\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u30921\u3064\u306E\u30D5\u30A1\u30A4\u30EB\u306B\u57CB\u3081\u8FBC\u3093\u3067\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u3057\u307E\u3059\u3002\u3053\u306E\u5F62\u5F0F\u306F\u5E83\u304F\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u306A\u3044\u3053\u3068\u306B\u6CE8\u610F\u3057\u3066\u304F\u3060\u3055\u3044"},progress:{title:"\u57CB\u3081\u8FBC\u307E\u308C\u305FMIDI\u3092\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u4E2D...",loading:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3068MIDI\u3092\u8AAD\u307F\u8FBC\u307F\u4E2D...",modifyingMIDI:"MIDI\u3092\u4FEE\u6B63\u4E2D...",modifyingSoundfont:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30C8\u30EA\u30DF\u30F3\u30B0\u4E2D...",saving:"RMIDI\u3092\u4FDD\u5B58\u4E2D...",done:"\u5B8C\u4E86\u3057\u307E\u3057\u305F\uFF01"},options:{title:"RMIDI\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8\u30AA\u30D7\u30B7\u30E7\u30F3",confirm:"\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",compress:{title:"\u5727\u7E2E",description:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092Ogg Vorbis\u306E\u30ED\u30B9\u5727\u7E2E\u3067\u5727\u7E2E\u3057\u307E\u3059\u3002\u30D5\u30A1\u30A4\u30EB\u30B5\u30A4\u30BA\u304C\u5927\u5E45\u306B\u524A\u6E1B\u3055\u308C\u307E\u3059\u3002\u63A8\u5968\u8A2D\u5B9A\u3067\u3059\u3002"},quality:{title:"\u5727\u7E2E\u54C1\u8CEA",description:"\u5727\u7E2E\u306E\u54C1\u8CEA\u3067\u3059\u3002\u9AD8\u3044\u307B\u3069\u826F\u3044\u3067\u3059\u3002"},bankOffset:{title:"\u30D0\u30F3\u30AF\u30AA\u30D5\u30BB\u30C3\u30C8",description:"\u30D5\u30A1\u30A4\u30EB\u306E\u30D0\u30F3\u30AF\u30AA\u30D5\u30BB\u30C3\u30C8\u3067\u3059\u30020\u306E\u5024\u304C\u63A8\u5968\u3055\u308C\u307E\u3059\u3002\u5909\u66F4\u306F\u614E\u91CD\u306B\u884C\u3063\u3066\u304F\u3060\u3055\u3044\u3002"},adjust:{title:"MIDI\u3092\u8ABF\u6574",description:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u306B\u5408\u308F\u305B\u3066\u8ABF\u6574\u3057\u307E\u3059\u3002\u7279\u5225\u306A\u7406\u7531\u304C\u306A\u3044\u9650\u308A\u3001\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u306F\u30AA\u30F3\u306E\u307E\u307E\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}}}},metadata:{songTitle:{title:"\u30BF\u30A4\u30C8\u30EB:",description:"\u66F2\u306E\u30BF\u30A4\u30C8\u30EB"},album:{title:"\u30A2\u30EB\u30D0\u30E0:",description:"\u66F2\u306E\u30A2\u30EB\u30D0\u30E0"},artist:{title:"\u30A2\u30FC\u30C6\u30A3\u30B9\u30C8:",description:"\u66F2\u306E\u30A2\u30FC\u30C6\u30A3\u30B9\u30C8"},albumCover:{title:"\u30A2\u30EB\u30D0\u30E0\u30AB\u30D0\u30FC:",description:"\u66F2\u306E\u30A2\u30EB\u30D0\u30E0\u30AB\u30D0\u30FC"},creationDate:{title:"\u4F5C\u6210\u65E5:",description:"\u66F2\u306E\u4F5C\u6210\u65E5"},genre:{title:"\u30B8\u30E3\u30F3\u30EB:",description:"\u66F2\u306E\u30B8\u30E3\u30F3\u30EB"},comment:{title:"\u30B3\u30E1\u30F3\u30C8:",description:"\u66F2\u306E\u30B3\u30E1\u30F3\u30C8"},duration:{title:"\u9577\u3055:",description:"\u66F2\u306E\u9577\u3055"}}}};var MA={localeName:"\u65E5\u672C\u8A9E",titleMessage:"SpessaSynth: SoundFont2 Javascript \u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC",demoTitleMessage:"SpessaSynth: SF2/DLS Javascript \u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC \u30AA\u30F3\u30E9\u30A4\u30F3\u30C7\u30E2",synthInit:{genericLoading:"\u8AAD\u307F\u8FBC\u307F\u4E2D...",loadingSoundfont:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",loadingBundledSoundfont:"\u30D0\u30F3\u30C9\u30EB\u3055\u308C\u305F\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",startingSynthesizer:"\u30B7\u30F3\u30BB\u30B5\u30A4\u30B6\u30FC\u3092\u8D77\u52D5\u3057\u3066\u3044\u307E\u3059...",savingSoundfont:"\u518D\u5229\u7528\u306E\u305F\u3081\u306B\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u4FDD\u5B58\u3057\u3066\u3044\u307E\u3059...",noWebAudio:"\u304A\u4F7F\u3044\u306E\u30D6\u30E9\u30A6\u30B6\u306FWeb Audio\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u305B\u3093\u3002",done:"\u6E96\u5099\u5B8C\u4E86\uFF01"},midiUploadButton:"MIDI\u30D5\u30A1\u30A4\u30EB\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",exportAudio:xA,yes:"\u306F\u3044",no:"\u3044\u3044\u3048",error:"\u30A8\u30E9\u30FC",demoSoundfontUploadButton:"\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9",demoGithubPage:"\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306E\u30DA\u30FC\u30B8",demoSongButton:"\u30C7\u30E2\u30BD\u30F3\u30B0",credits:"\u30AF\u30EA\u30A8\u30A4\u30BF\u30FC",dropPrompt:"\u3053\u3053\u306B\u30D5\u30A1\u30A4\u30EB\u3092\u30C9\u30ED\u30C3\u30D7...",warnings:{noMidiSupport:"\u3053\u306E\u30D6\u30E9\u30A6\u30B6\u306FMIDI\u5165\u529B\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u306A\u3044\u305F\u3081\u3001\u3053\u306E\u6A5F\u80FD\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002Chrome\u307E\u305F\u306FFirefox\u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",outOfMemory:`\u30D6\u30E9\u30A6\u30B6\u306E\u30E1\u30E2\u30EA\u304C\u4E0D\u8DB3\u3057\u307E\u3057\u305F\u3002Firefox\u3084SF3\u30B5\u30A6\u30F3\u30C9\u30D5\u30A9\u30F3\u30C8\u306E\u4F7F\u7528\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002

\uFF08\u30A8\u30E9\u30FC\u306B\u3064\u3044\u3066\u306F\u30B3\u30F3\u30BD\u30FC\u30EB\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\uFF09\u3002`,chromeMobile:`SpessaSynth\u306FChrome Mobile\u3067\u306E\u52D5\u4F5C\u304C\u826F\u304F\u3042\u308A\u307E\u305B\u3093\u3002

\u4EE3\u308F\u308A\u306BFirefox Android\u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3092\u691C\u8A0E\u3057\u3066\u304F\u3060\u3055\u3044\u3002`,warning:"\u6CE8\u610F"},hideTopBar:{title:"\u30C8\u30C3\u30D7\u30D0\u30FC\u3092\u96A0\u3059",description:"\u30C8\u30C3\u30D7\uFF08\u30BF\u30A4\u30C8\u30EB\uFF09\u30D0\u30FC\u3092\u96A0\u3057\u3066\u3001\u3088\u308A\u30B7\u30FC\u30E0\u30EC\u30B9\u306A\u4F53\u9A13\u3092\u63D0\u4F9B\u3057\u307E\u3059"},convertDls:{title:"DLS\u5909\u63DB",message:"DLS\u30D5\u30A1\u30A4\u30EB\u304C\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3055\u308C\u305F\u3088\u3046\u3067\u3059\u3002\u3053\u308C\u3092SF2\u306B\u5909\u63DB\u3057\u307E\u3059\u304B\uFF1F"},musicPlayerMode:DA,settings:wA,synthesizerController:bA,sequencerController:vA};var FA={title:"Configuration de l'affichage",noteFallingTime:{title:"Temps de descente des cascades (millisecondes)",description:"D\xE9finition de la vitesse \xE0 laquelle les notes tombent sur le clavier (visuellement)"},noteAfterTriggerTime:{title:"Dur\xE9e apr\xE8s le d\xE9clenchement d'une note (millisecondes)",description:"Dur\xE9e de la chute des notes apr\xE8s leur d\xE9clenchement. Z\xE9ro signifie qu'elles se d\xE9clenchent en bas"},waveformThickness:{title:"\xC9paisseur du trait des formes d'ondes (pixels)",description:"D\xE9finition de l'\xE9paisseur du trait des formes d'ondes"},waveformSampleSize:{title:"R\xE9solution des formes d'ondes",description:"D\xE9finition du niveau de d\xE9tail des formes d'ondes (note : une valeur \xE9lev\xE9e peut diminuer les performances)"},waveformAmplifier:{title:"Amplification des formes d'ondes",description:"Cette option permet d'obtenir des formes d'ondes \xE9voluant avec plus ou moins d'amplitude"},toggleWaveformsRendering:{title:"Visibilit\xE9 des formes d'ondes",description:"Active ou non le rendu des formes d'ondes (les lignes color\xE9es r\xE9agissant avec l'audio)"},toggleNotesRendering:{title:"Visibilit\xE9 des cascades",description:"Active ou non le rendu des chutes de notes sur le clavier lors de la lecture d'un fichier MIDI"},toggleDrawingActiveNotes:{title:"Visibilit\xE9 des notes actives",description:"Active ou non les lumi\xE8res lorsque les touches sont appuy\xE9es"},toggleDrawingVisualPitch:{title:"Rendu visuel du pitch bend",description:"Active ou non le glissement vers la droite ou vers la gauche des notes lorsque le pitch bend est utilis\xE9"},toggleStabilizeWaveforms:{title:"Stabilisation des formes d'ondes",description:"Active ou non la stabilisation des formes d'ondes comme sur un oscilloscope"}};var RA={title:"Configuration du clavier MIDI",selectedChannel:{title:"S\xE9lection du canal",description:"Le canal sur lequel le clavier envoie des messages",channelOption:"Canal {0}"},keyboardSize:{title:"Taille du clavier",description:"Choix de l'\xE9tendue de notes sur le clavier, ajustant la largeur des touches en cons\xE9quence",full:"128 notes (complet)",piano:"88 notes (piano)",fiveOctaves:"5 octaves",useSongKeyRange:"Utiliser l'\xE9tendue de notes du morceau",twoOctaves:"2 octaves"},toggleTheme:{title:"Th\xE8me sombre",description:"Utiliser le th\xE8me sombre du clavier MIDI"},show:{title:"Visibilit\xE9",description:"Montrer / cacher le clavier MIDI"}};var LA={title:"Configuration MIDI",midiInput:{title:"Entr\xE9e MIDI",description:"Le port \xE0 \xE9couter pour recevoir les messages MIDI",disabled:"D\xE9sactiv\xE9"},midiOutput:{title:"Sortie MIDI",description:"Le port utilis\xE9 pour jouer les fichiers MIDI",disabled:"Utilisation de SpessaSynth"},reminder:{title:"Notez que vous devez REDEMARRER VOTRE NAVIGATEUR apr\xE8s avoir connect\xE9 un nouveau p\xE9riph\xE9rique MIDI pour qu'il apparaisse ici.",description:"Notez \xE9galement que Safari ne prend pas en charge WebMIDI, vous devrez donc utiliser un navigateur diff\xE9rent si vous \xEAtes sur Mac."}};var GA={toggleButton:"Configurations",mainTitle:"Configuration du synth\xE9tiseur",rendererSettings:FA,keyboardSettings:RA,midiSettings:LA,interfaceSettings:{title:"Configuration de l'interface",toggleTheme:{title:"Th\xE8me sombre",description:"Active ou non le th\xE8me sombre pour l'interface"},selectLanguage:{title:"Langue",description:"Change la langue de l'interface",helpTranslate:"Traduire SpessaSynth"},layoutDirection:{title:"Orientation de la mise en page",description:"Orientation du rendu des notes et du clavier",values:{downwards:"Vers le bas",upwards:"Vers le haut",leftToRight:"De gauche \xE0 droite",rightToLeft:"De droite \xE0 gauche"}},reminder:{title:"Saviez-vous que vous pouvez survoler les param\xE8tres pour obtenir plus d'informations ?",description:"Comme ceci !"}}};var TA={toggleButton:{title:"Activer / d\xE9sactiver le mode lecteur de musique",description:"Cette option permet de simplifier l'interface, en masquant le clavier et l'animation des notes"},currentlyPlaying:"Lecture en cours :",nothingPlaying:"Aucune lecture en cours",nothingPlayingCopyright:"Chargez un fichier MIDI !"};var NA={voiceMeter:{title:"Voix : ",description:"Le nombre actuel de voix sur le canal {0}"},pitchBendMeter:{title:"Pitch : ",description:"La valeur actuelle du pitch bend sur le canal {0}"},panMeter:{title:"Balance : ",description:"La valeur actuelle de la panoramique st\xE9r\xE9o sur le canal {0} (clic droit pour verrouiller)"},expressionMeter:{title:"Expression : ",description:"La valeur actuelle de l'expression (force) du canal {0} (clic droit pour verrouiller)"},volumeMeter:{title:"Volume : ",description:"Le volume actuel du canal 0} (clic droit pour verrouiller)"},modulationWheelMeter:{title:"Molette de modulation : ",description:"La valeur actuelle de la quantit\xE9 de modulation (g\xE9n\xE9ralement utilis\xE9e pour le vibrato) du canal {0} (clic droit pour verrouiller)"},chorusMeter:{title:"Chorus : ",description:"Le niveau actuel de l'effet de chorus appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},reverbMeter:{title:"R\xE9verb\xE9ration : ",description:"Le niveau actuel de r\xE9verb\xE9ration appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},filterMeter:{title:"Filtre : ",description:"La hauteur actuelle du filtre passe-bas appliqu\xE9 au canal {0} (clic droit pour verrouiller)"},transposeMeter:{title:"Transposition : ",description:"La transposition actuelle (d\xE9calage de notes) du canal {0}"},presetSelector:{description:"Changer l'instrument que le canal {0} utilise",selectionPrompt:"Changer l'instrument du canal {0}",searchPrompt:"Chercher..."},presetReset:{description:"D\xE9verrouiller le canal {0} pour permettre un changement de programme"},soloButton:{description:"Solo du canal {0}"},muteButton:{description:"Rendre ou non le canal {0} muet"},drumToggleButton:{description:"Activer les percussions sur le canal {0}"}};var UA={button:{title:"Configuration des effets",description:"Configure les effets de chorus et de r\xE9verb\xE9ration ainsi que le vibrato personnalis\xE9"},reverbConfig:{title:"Configuration de la r\xE9verb\xE9ration",description:"Configure l'effet de r\xE9verb\xE9ration",impulseResponse:{title:"Response impulsionnelle",description:"S\xE9lectionnez la r\xE9ponse impulsionnelle pour la r\xE9verb\xE9ration \xE0 convolution"}},chorusConfig:{title:"Configuration du chorus",description:"Configure l'effet de chorus",nodesAmount:{title:"Nombre de lignes de retard",description:"Nombre de lignes de retard (pour chaque canal st\xE9r\xE9o) \xE0 utiliser"},defaultDelay:{title:"D\xE9lai (s)",description:"Dur\xE9e en secondes de la premi\xE8re ligne de retard"},delayVariation:{title:"Augmentation du d\xE9lai (s)",description:"Dur\xE9e \xE0 ajouter en secondes pour chaque ligne de retard apr\xE8s la premi\xE8re"},stereoDifference:{title:"Diff\xE9rence st\xE9r\xE9o (s)",description:"Diff\xE9rence du d\xE9lai entre 2 canaux (ajout\xE9 au canal de gauche et soustrait au canal de droite)"},oscillatorFrequency:{title:"Fr\xE9quence LFO (Hz)",description:"Fr\xE9quence de l'oscillateur (LFO) de la premi\xE8re ligne de retard, en Hz. Le LFO contr\xF4le la dur\xE9e du retard."},frequencyVariation:{title:"Augmentation LFO (Hz)",description:"Quantit\xE9 \xE0 ajouter \xE0 la fr\xE9quence d'oscillation de chaque ligne de retard apr\xE8s la premi\xE8re, en Hz"},oscillatorGain:{title:"Gain LFO (s)",description:"Combien l'oscillateur modifie-t-il le d\xE9lai des lignes de retard, en secondes "},apply:{title:"Valider",description:"Sauvegarde les param\xE8tres des effets"}}};var qA={button:{title:"Modificateur de notes",description:"Permet de modifier des notes, individuellement"},mainTitle:"\xC9diteur de modifications de notes",detailedDescription:`Ce menu vous permet de modifier une note MIDI d'un canal choisi.
Vous pouvez actuellement modifier sa v\xE9locit\xE9 et assigner un patch (instrument).
Cette fonction est particuli\xE8rement utile pour les percussions.`,prompt:"Que voulez-vous faire ?",selectKey:{prompt:"Appuyez sur la note que vous voulez modifier sur le clavier.",title:"S\xE9lectionner une note",change:"Changer la note"},selectedChannel:{title:"Canal s\xE9lectionn\xE9",description:"Le canal auquel appartient la note \xE0 modifier"},selectedKey:{title:"Note s\xE9lectionn\xE9e : {0}",description:"Vous avez s\xE9lectionn\xE9 la note MIDI {0}"},modifyKey:{title:"Modifier une note",description:"Modifie une note d'un canal choisi",velocity:{title:"Forcer la v\xE9locit\xE9",description:"V\xE9locit\xE9 \xE0 utiliser pour cette note, ignorant la v\xE9locit\xE9 indiqu\xE9e par les signaux MIDI. La valeur -1 d\xE9sactive le for\xE7age"},preset:{title:"Forcer le preset",description:"Preset \xE0 utiliser pour cette note",unchanged:"Inchang\xE9"},apply:{title:"Valider",description:"Sauvegarder les modificateurs"}},removeModification:{title:"Enlever un modificateur",description:"Enlever un modificateur s'appliquant \xE0 une note pour un canal donn\xE9",remove:{title:"Enlever",description:"Enlever ce modificateur de note"}},resetModifications:{title:"Tout r\xE9initialiser",description:"Enlever tous les modificateurs de notes pour tous les canaux",confirmation:{title:"Confirmation",description:"\xCAtes-vous s\xFBr(e) de bien vouloir supprimer tous les modificateurs ?"}}};var _A={toggleButton:{title:"Contr\xF4leurs du synth\xE9tiseur",description:"Affiche les contr\xF4leurs du synth\xE9tiseur"},mainVoiceMeter:{title:"Voix : ",description:"Le nombre total de voix jou\xE9es actuellement"},mainVolumeMeter:{title:"Volume : ",description:"Le volume global actuel du synth\xE9tiseur"},mainPanMeter:{title:"Balance : ",description:"La panoramique globale actuelle du synth\xE9tiseur"},mainTransposeMeter:{title:"Transposition : ",description:"Pour transposer le synth\xE9tiseur (en demi-tons ou notes)"},midiPanic:{title:"Panique MIDI",description:"Stoppe toutes les voix imm\xE9diatement"},systemReset:{title:"R\xE9initialisation du syst\xE8me",description:"R\xE9initialise tous les contr\xF4leurs \xE0 leur valeur par d\xE9faut"},blackMidiMode:{title:"Mode Black MIDI",description:"Active le mode haute performance, en simplifiant l'apparence g\xE9n\xE9rale et en arr\xEAtant les notes plus rapidement"},disableCustomVibrato:{title:"D\xE9sactiver le vibrato personnalis\xE9",description:`D\xE9sactive le vibrato personnalis\xE9 (NRPN) de mani\xE8re permanente
Un rechargement de la page web sera n\xE9cessaire pour le r\xE9activer`},helpButton:{title:"Aide",description:"Ouvre une page web pour afficher un guide"},interpolation:{description:"S\xE9lection de la m\xE9thode d'interpolation du synth\xE9tiseur",linear:"Interpolation lin\xE9aire",nearestNeighbor:"Aucune (valeur la plus proche)",cubic:"Interpolation cubique"},channelController:NA,effectsConfig:UA,keyModifiers:qA};var HA={previousSong:"Morceau pr\xE9c\xE9dent",nextSong:"Morceau suivant",loopThis:"Lire ce morceau en boucle",playPause:"Lecture / pause",lyrics:{show:"Montrer les paroles",title:"Texte d\xE9cod\xE9",noLyrics:"Paroles indisponibles...",otherText:{title:"Autre texte"},subtitles:{title:"Charger des sous-titres ASS",description:"Chargez vos propres sous-titres au format .ass"}}};var PA={button:{title:"Sauvegarder l'audio",description:"Sauvegarder la composition dans diff\xE9rents formats"},formats:{title:"Choix du format",formats:{wav:{button:{title:"Audio WAV (.wav)",description:"Exporter le morceau avec les modifications dans un fichier audio .wav"},options:{title:"Options de l'exportation WAV",confirm:"Exporter",normalizeVolume:{title:"Normaliser le volume",description:"Pour garder le volume \xE0 un niveau constant, peu importe comment est jou\xE9 le morceau MIDI (option recommand\xE9e)"},additionalTime:{title:"Dur\xE9e additionnelle (s)",description:"Dur\xE9e additionnelle \xE0 la fin du morceau pour donner le temps au son de disparaitre, en secondes"},sampleRate:{title:"Fr\xE9quence d'\xE9chantillonnage",description:"Fr\xE9quence d'\xE9chantillonnage du fichier de sortie en Hz (ne changez ce param\xE8tre que si vous savez ce que vous faites)"},separateChannels:{title:"S\xE9paration des canaux",description:"Pour sauvegarder chaque canal dans un fichier s\xE9par\xE9, utile par exemple pour des affichage de type oscilloscope (cette option d\xE9sactive la r\xE9verb\xE9ration et l'effet de chorus)",saving:{title:"Fichiers des canaux",save:"Sauvegarder le canal {0}"}},loopCount:{title:"Nombre de r\xE9p\xE9titions",description:"Nombre de fois que le morceau est r\xE9p\xE9t\xE9 apr\xE8s la premi\xE8re lecture"}},exportMessage:{message:"Exportation de l'audio en cours...",estimated:"Temps restant :",convertWav:"Conversion dans le format WAV..."}},midi:{button:{title:"MIDI (.mid)",description:"Exporter le fichier MIDI en incluant les modifications des contr\xF4leurs et des instruments"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Exporter une banque de sons au format SoundFont2"},options:{title:"Options de l'exportation SoundFont2",confirm:"Exporter",trim:{title:"All\xE9ger",description:"Exporter la banque de sons avec seulement les instruments et \xE9chantillons utilis\xE9s par le fichier MIDI"},compress:{title:"Compresser",description:`Compacter les \xE9chantillons gr\xE2ce \xE0 l'algorithme de compression avec pertes Ogg Vorbis
Ceci r\xE9duit de mani\xE8re significative le poids du fichier
Note : si la banque de sons \xE9tait d\xE9j\xE0 compress\xE9e, cette option ne d\xE9compressera pas m\xEAme en \xE9tant d\xE9sactiv\xE9e`},quality:{title:"Qualit\xE9 de compression",description:"La qualit\xE9 de la compression, une valeur haute augmentant la qualit\xE9 du son mais aussi le poids du fichier"}}},dls:{button:{title:"DLS (.dls)",description:"Exporte la soundfont au format DLS"},warning:{title:"Avertissement concernant l'exportation DLS",message:"L'exportation DLS est limit\xE9e et peut produire des fichiers corrompus avec des soundfonts lourdes et complexes.",details:"Plus d'info",confirm:"Continuer l'exportation"}},rmidi:{button:{title:"MIDI embarqu\xE9 (.rmi)",description:`Exporter le fichier MIDI modifi\xE9 avec la banque de sons all\xE9g\xE9e dans un seul fichier
Note : ce format n'est pas support\xE9 par tous les lecteurs MIDI`},progress:{title:"Exportation du fichier MIDI embarqu\xE9...",loading:"Chargement de la banque de sons et du fichier MIDI...",modifyingMIDI:"Modification MIDI...",modifyingSoundfont:"All\xE8gement de la banque de sons...",saving:"Cr\xE9ation du fichier RMIDI...",done:"Termin\xE9 !"},options:{title:"Options de l'exportation RMIDI",confirm:"Exporter",compress:{title:"Compression",description:`Compacter les \xE9chantillons gr\xE2ce \xE0 l'algorithme de compression avec pertes Ogg Vorbis
Ceci r\xE9duit de mani\xE8re significative le poids du fichier (option recommand\xE9e)`},quality:{title:"Qualit\xE9 de compression",description:"La qualit\xE9 de la compression, une valeur haute augmentant la qualit\xE9 du son mais aussi le poids du fichier"},bankOffset:{title:"D\xE9calage de banque",description:`D\xE9calage des num\xE9ros de banque dans le fichier
(une valeur de 0 est recommand\xE9e sauf cas particulier)`},adjust:{title:"Ajustement MIDI",description:`Ajuste le fichier MIDI \xE0 la banque de sons
(il est conseill\xE9 de laisser cette option activ\xE9e sauf cas particulier)`}}}},metadata:{songTitle:{title:"Titre :",description:"Le titre du morceau"},album:{title:"Album :",description:"Le nom de l'album dans lequel se trouve le morceau"},artist:{title:"Artiste :",description:"Le ou les artiste(s) du morceau"},albumCover:{title:"Pochette d'album :",description:"La pochette de l'album dans lequel se trouve le morceau"},creationDate:{title:"Date de cr\xE9ation :",description:"La date de cr\xE9ation du morceau"},genre:{title:"Genre :",description:"Le genre du morceau"},comment:{title:"Commentaire :",description:"Le commentaire li\xE9 au morceau"},duration:{title:"Dur\xE9e :",description:"La dur\xE9e du morceau"}}}};var OA={localeName:"Fran\xE7ais",titleMessage:"SpessaSynth : synth\xE9tiseur compatible SF2, \xE9crit en javascript",demoTitleMessage:"SpessaSynth : d\xE9mo en ligne du synth\xE9tiseur compatible SF2/DLS",synthInit:{genericLoading:"Chargement...",loadingSoundfont:"Chargement de la banque de sons...",loadingBundledSoundfont:"Chargement de la banque de sons int\xE9gr\xE9e...",startingSynthesizer:"D\xE9marrage du synth\xE9tiseur...",savingSoundfont:"Sauvegarde de la banque de sons pour une utilisation ult\xE9rieure...",noWebAudio:"Votre navigateur ne supporte pas l'audio par le web.",done:"Pr\xEAt !"},midiUploadButton:"Charger des fichiers MIDI",exportAudio:PA,yes:"Oui",no:"Non",error:"Erreur",demoSoundfontUploadButton:"Charger une banque de sons",demoGithubPage:"Page du projet",demoSongButton:"Morceau d\xE9mo",credits:"Cr\xE9dits",dropPrompt:"Rel\xE2chez les fichiers ici...",warnings:{outOfMemory:"Votre navigateur est \xE0 cours de m\xE9moire. L'usage de Firefox ou des banques de sons au format SF3 est recommand\xE9 (voir la console pour plus de d\xE9tails concernant l'erreur).",noMidiSupport:"Aucun port MIDI d\xE9tect\xE9, cette fonctionnalit\xE9 sera d\xE9sactiv\xE9e.",chromeMobile:"Les performances de SpessaSynth sont basses sur Chrome pour mobile. L'usage de Firefox est recommand\xE9.",warning:"Attention"},hideTopBar:{title:"Masquer la barre sup\xE9rieure",description:"Masquer la barre sup\xE9rieure (titre) pour offrir une meilleure exp\xE9rience"},convertDls:{title:"Conversion DLS",message:"Le fichier charg\xE9 semble \xEAtre au format DLS. Voulez-vous le convertir au format SF2 ?"},musicPlayerMode:TA,settings:GA,synthesizerController:_A,sequencerController:HA};var YA={title:"Configura\xE7\xF5es do Renderizador",noteFallingTime:{title:"Tempo de queda da nota (milissegundos)",description:"A velocidade com que as notas caem (visualmente)"},waveformThickness:{title:"Espessura da linha da forma de onda (px)",description:"A espessura das linhas da forma de onda"},waveformSampleSize:{title:"Tamanho da amostra da forma de onda",description:"O qu\xE3o detalhadas s\xE3o as formas de onda (Nota: valores altos podem impactar o desempenho) Tamb\xE9m observe que valores altos adicionar\xE3o um atraso ao \xE1udio para sincronizar as formas de onda com o \xE1udio."},waveformAmplifier:{title:"Amplificador de forma de onda",description:"O qu\xE3o vibrantes s\xE3o as formas de onda"},toggleWaveformsRendering:{title:"Habilitar renderiza\xE7\xE3o de formas de onda",description:"Habilitar a renderiza\xE7\xE3o das formas de onda do canal (linhas coloridas mostrando o \xE1udio)"},toggleNotesRendering:{title:"Habilitar renderiza\xE7\xE3o de notas",description:"Habilitar a renderiza\xE7\xE3o das notas caindo ao reproduzir um arquivo MIDI"},toggleDrawingActiveNotes:{title:"Habilitar desenho de notas ativas",description:"Habilitar o destaque e o brilho das notas quando pressionadas"},toggleDrawingVisualPitch:{title:"Habilitar desenho de altura visual",description:"Habilitar o deslizamento das notas para a esquerda ou direita quando o wheel de pitch \xE9 aplicado"},toggleStabilizeWaveforms:{title:"Estabilizar formas de onda",description:"Habilitar o disparo do oscilosc\xF3pio"}};var JA={title:"Configura\xE7\xF5es do Teclado MIDI",selectedChannel:{title:"Canal selecionado",description:"O canal para o qual o teclado envia mensagens",channelOption:"Canal {0}"},keyboardSize:{title:"Tamanho do teclado",description:"A faixa de teclas mostradas no teclado. Ajusta o tamanho das notas MIDI de acordo",full:"128 teclas (completo)",piano:"88 teclas (piano)",fiveOctaves:"5 oitavas",useSongKeyRange:"Usar a faixa de notas da m\xFAsica",twoOctaves:"Duas oitavas"},toggleTheme:{title:"Usar tema escuro",description:"Usar o tema escuro do teclado MIDI"},show:{title:"Mostrar",description:"Mostrar/ocultar o teclado MIDI"}};var zA={title:"Configura\xE7\xF5es MIDI",midiInput:{title:"Entrada MIDI",description:"A porta para escutar mensagens MIDI",disabled:"Desativado"},midiOutput:{title:"Sa\xEDda MIDI",description:"A porta para reproduzir o arquivo MIDI",disabled:"Usar SpessaSynth"},reminder:{title:"Note que voc\xEA precisa REINICIAR O NAVEGADOR ap\xF3s conectar um novo dispositivo MIDI para que ele apare\xE7a aqui.",description:"Tamb\xE9m note que o Safari n\xE3o suporta WebMIDI, ent\xE3o voc\xEA precisar\xE1 usar um navegador diferente se estiver no Mac."}};var VA={toggleButton:"Configura\xE7\xF5es",mainTitle:"Configura\xE7\xF5es do Programa",rendererSettings:YA,keyboardSettings:JA,midiSettings:zA,interfaceSettings:{title:"Configura\xE7\xF5es da Interface",toggleTheme:{title:"Usar tema escuro",description:"Ativar o tema escuro para a interface"},selectLanguage:{title:"Idioma",description:"Alterar o idioma do programa",helpTranslate:"Traduzir o SpessaSynth"},layoutDirection:{title:"Dire\xE7\xE3o do layout",description:"A dire\xE7\xE3o do layout do renderizador e do teclado",values:{downwards:"Para baixo",upwards:"Para cima",leftToRight:"Da esquerda para a direita",rightToLeft:"Da direita para a esquerda"}},reminder:{title:"Voc\xEA sabia que pode passar o mouse sobre as configura\xE7\xF5es para obter mais informa\xE7\xF5es?",description:"Como esta!"}}};var KA={toggleButton:{title:"Trocar o modo do reprodutor de m\xFAsica",description:"Ir para a vers\xE3o simplificada, ocultando o teclado e as visualiza\xE7\xF5es de notas"},currentlyPlaying:"Tocando agora:",nothingPlaying:"Nada est\xE1 tocando",nothingPlayingCopyright:"Envie um MIDI!"};var WA={voiceMeter:{title:"Vozes: ",description:"A quantidade atual de vozes tocando no canal {0}"},pitchBendMeter:{title:"Pitch: ",description:"O desvio de pitch atual aplicado ao canal {0}"},panMeter:{title:"Pan: ",description:"O panning est\xE9reo atual aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},expressionMeter:{title:"Express\xE3o: ",description:"A express\xE3o (volume) atual do canal {0} (clique com o bot\xE3o direito para travar)"},volumeMeter:{title:"Volume: ",description:"O volume atual do canal {0} (clique com o bot\xE3o direito para travar)"},modulationWheelMeter:{title:"Roda de modula\xE7\xE3o: ",description:"A profundidade de modula\xE7\xE3o (geralmente vibrato) atual do canal {0} (clique com o bot\xE3o direito para travar)"},chorusMeter:{title:"Chorus: ",description:"O n\xEDvel atual do efeito de chorus aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},reverbMeter:{title:"Reverb: ",description:"O n\xEDvel atual do efeito de reverb aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},filterMeter:{title:"Filtro: ",description:"O n\xEDvel atual do corte do filtro passa-baixo aplicado ao canal {0} (clique com o bot\xE3o direito para travar)"},transposeMeter:{title:"Transposi\xE7\xE3o: ",description:"A transposi\xE7\xE3o (mudan\xE7a de tonalidade) atual do canal {0}"},presetSelector:{description:"Mudar o patch (instrumento) que o canal {0} est\xE1 usando",selectionPrompt:"Mudar instrumento para o canal {0}",searchPrompt:"Pesquisar..."},presetReset:{description:"Destravar o canal {0} para permitir altera\xE7\xF5es de programa"},soloButton:{description:"Solo no canal {0}"},muteButton:{description:"Silenciar/desmutar o canal {0}"},drumToggleButton:{description:"Alternar bateria no canal {0}"}};var ZA={button:{title:"Configura\xE7\xF5es de Efeitos",description:"Configure os efeitos de chorus e reverb, al\xE9m do vibrato personalizado"},reverbConfig:{title:"Configura\xE7\xE3o do Reverb",description:"Configure o processador de reverb",impulseResponse:{title:"Resposta ao impulso",description:"Selecione a resposta ao impulso para o reverb convolver"}},chorusConfig:{title:"Configura\xE7\xE3o do Chorus",description:"Configure o processador de chorus",nodesAmount:{title:"Quantidade de n\xF3s",description:"A quantidade de n\xF3s de atraso (para cada canal est\xE9reo) a serem usados"},defaultDelay:{title:"Atraso (s)",description:"O tempo de atraso para o primeiro n\xF3 em segundos"},delayVariation:{title:"Incremento de atraso (s)",description:"A quantidade para incrementar cada n\xF3 de atraso ap\xF3s o primeiro em segundos"},stereoDifference:{title:"Diferen\xE7a est\xE9reo (s)",description:"A diferen\xE7a de atrasos entre dois canais (adicionada ao canal esquerdo e subtra\xEDda do direito)"},oscillatorFrequency:{title:"Frequ\xEAncia do LFO (Hz)",description:"A frequ\xEAncia do LFO do primeiro n\xF3 de atraso, em Hz. O LFO controla o tempo de atraso."},frequencyVariation:{title:"Incremento do LFO (Hz)",description:"A quantidade para incrementar a frequ\xEAncia de cada LFO ap\xF3s o primeiro, em Hz"},oscillatorGain:{title:"Ganho do LFO (s)",description:"Quanto o LFO alterar\xE1 o atraso nos n\xF3s de atraso, em segundos"},apply:{title:"Aplicar",description:"Aplicar as configura\xE7\xF5es selecionadas"}}};var jA={toggleButton:{title:"Controlador de Sintetizador",description:"Mostra o controlador do sintetizador"},mainVoiceMeter:{title:"Voices: ",description:"A quantidade total de vozes atualmente tocando"},mainVolumeMeter:{title:"Volume: ",description:"O volume mestre atual do sintetizador"},mainPanMeter:{title:"Pan: ",description:"A panor\xE2mica est\xE9reo mestre atual do sintetizador"},mainTransposeMeter:{title:"Transposi\xE7\xE3o: ",description:"Transp\xF5e o sintetizador (em semitons ou teclas)"},midiPanic:{title:"P\xE2nico MIDI",description:"Para todas as vozes imediatamente"},systemReset:{title:"Reiniciar Sistema",description:"Redefine todos os controladores para seus valores padr\xE3o"},blackMidiMode:{title:"Modo Black MIDI",description:"Ativa o Modo de Alto Desempenho, simplificando a apar\xEAncia e eliminando as notas mais rapidamente"},disableCustomVibrato:{title:"Desativar vibrato personalizado",description:"Desativa permanentemente o vibrato personalizado (NRPN). Recarregue o site para reativ\xE1-lo"},helpButton:{title:"Ajuda",description:"Abre um site externo com o guia de uso"},interpolation:{description:"Selecione o m\xE9todo de interpola\xE7\xE3o do sintetizador",linear:"Interpola\xE7\xE3o Linear",nearestNeighbor:"Vizinho mais pr\xF3ximo",cubic:"Interpola\xE7\xE3o C\xFAbica"},channelController:WA,effectsConfig:ZA};var XA={previousSong:"M\xFAsica anterior",nextSong:"Pr\xF3xima m\xFAsica",loopThis:"Repetir esta m\xFAsica",playPause:"Pausar/reproduzir",lyrics:{show:"Mostrar letras",title:"Texto decodificado",noLyrics:"Sem letras dispon\xEDveis...",otherText:{title:"Outro texto"}}};var $A={button:{title:"Salvar \xC1udio",description:"Salvar a composi\xE7\xE3o em v\xE1rios formatos"},formats:{title:"Escolher formato",formats:{wav:{button:{title:"\xC1udio WAV (.wav)",description:"Exportar a m\xFAsica com modifica\xE7\xF5es como um arquivo de \xE1udio .wav"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o WAV",confirm:"Exportar",normalizeVolume:{title:"Normalizar volume",description:"Mant\xE9m o volume no mesmo n\xEDvel, independentemente de qu\xE3o alto ou baixo est\xE1 o MIDI. Recomendado."},additionalTime:{title:"Tempo adicional (s)",description:"Tempo extra no final da m\xFAsica para o som se dissipar. (em segundos)"},separateChannels:{title:"Separar canais",description:"Salva cada canal como um arquivo separado. \xDAtil para visualizadores de oscilosc\xF3pio. Note que isto desativa reverb e chorus.",saving:{title:"Arquivos de canal",save:"Salvar canal {0}"}},loopCount:{title:"Quantidade de repeti\xE7\xF5es",description:"N\xFAmero de vezes que a m\xFAsica ser\xE1 repetida"}},exportMessage:{message:"Exportando \xE1udio WAV...",estimated:"Restante:",convertWav:"Convertendo para wav..."}},midi:{button:{title:"MIDI (.mid)",description:"Exportar o arquivo MIDI com as altera\xE7\xF5es de controlador e instrumento aplicadas"}},soundfont:{button:{title:"SoundFont (.sf2)",description:"Exportar um arquivo SoundFont2"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o SF",confirm:"Exportar",trim:{title:"Cortar",description:"Exportar o SoundFont apenas com os instrumentos e amostras utilizados pelo arquivo MIDI"},compress:{title:"Comprimir",description:"Comprimir as amostras com compress\xE3o Ogg Vorbis com perdas, se n\xE3o comprimidas. Reduz bastante o tamanho do arquivo. Se o SoundFont j\xE1 estava comprimido, n\xE3o ser\xE1 descomprimido, mesmo se esta op\xE7\xE3o estiver desativada."},quality:{title:"Qualidade da compress\xE3o",description:"A qualidade da compress\xE3o. Quanto maior, melhor"}}},rmidi:{button:{title:"MIDI Embutido (.rmi)",description:"Exportar o MIDI modificado com o SoundFont recortado embutido como um \xFAnico arquivo. Observe que este formato n\xE3o \xE9 amplamente suportado."},progress:{title:"Exportando MIDI embutido...",loading:"Carregando SoundFont e MIDI...",modifyingMIDI:"Modificando MIDI...",modifyingSoundfont:"Cortando SoundFont...",saving:"Salvando RMIDI...",done:"Pronto!"},options:{title:"Op\xE7\xF5es de exporta\xE7\xE3o RMIDI",confirm:"Exportar",compress:{title:"Comprimir",description:"Comprimir o SoundFont com Ogg Vorbis com perdas. Reduz bastante o tamanho do arquivo. Recomendado."},quality:{title:"Qualidade da compress\xE3o",description:"A qualidade da compress\xE3o. Quanto maior, melhor."},bankOffset:{title:"Deslocamento do banco",description:"O deslocamento do banco do arquivo. Valor 0 \xE9 recomendado. Alterar somente se souber o que est\xE1 fazendo."},adjust:{title:"Ajustar MIDI",description:"Ajusta o arquivo MIDI ao SoundFont. Mantenha ativado, a menos que tenha certeza do que est\xE1 fazendo."}}}},metadata:{songTitle:{title:"T\xEDtulo:",description:"T\xEDtulo da m\xFAsica"},album:{title:"\xC1lbum:",description:"\xC1lbum da m\xFAsica"},artist:{title:"Artista:",description:"Artista da m\xFAsica"},albumCover:{title:"Capa do \xE1lbum:",description:"Capa do \xE1lbum da m\xFAsica"},creationDate:{title:"Criado em:",description:"Data de cria\xE7\xE3o da m\xFAsica"},genre:{title:"G\xEAnero:",description:"G\xEAnero da m\xFAsica"},comment:{title:"Coment\xE1rio:",description:"Coment\xE1rio da m\xFAsica"},duration:{title:"Dura\xE7\xE3o:",description:"Dura\xE7\xE3o da m\xFAsica"}}}};var er={localeName:"Portugu\xEAs (Brasil)",titleMessage:"SpessaSynth: Sintetizador JavaScript SoundFont2",demoTitleMessage:"SpessaSynth: Demo Online do Sintetizador JavaScript SF2/DLS",synthInit:{genericLoading:"Carregando...",loadingSoundfont:"Carregando SoundFont...",loadingBundledSoundfont:"Carregando SoundFont embutida...",startingSynthesizer:"Iniciando sintetizador...",savingSoundfont:"Salvando SoundFont para reutiliza\xE7\xE3o...",noWebAudio:"Seu navegador n\xE3o suporta Web Audio.",done:"Pronto!"},midiUploadButton:"Envie seus arquivos MIDI",exportAudio:$A,yes:"Sim",no:"N\xE3o",demoSoundfontUploadButton:"Envie a SoundFont",demoGithubPage:"P\xE1gina do projeto",demoSongButton:"M\xFAsica de demonstra\xE7\xE3o",credits:"Cr\xE9ditos",dropPrompt:"Solte os arquivos aqui...",warnings:{outOfMemory:"Seu navegador ficou sem mem\xF3ria. Tente usar o Firefox ou uma SoundFont SF3 (veja o console para detalhes).",noMidiSupport:"Nenhuma porta MIDI detectada, essa fun\xE7\xE3o ser\xE1 desativada.",chromeMobile:"SpessaSynth pode ter um desempenho reduzido no Chrome Mobile. Considere usar o Firefox para Android.",warning:"Aten\xE7\xE3o"},hideTopBar:{title:"Ocultar barra superior",description:"Oculte a barra de t\xEDtulo para uma experi\xEAncia mais imersiva"},convertDls:{title:"Convers\xE3o DLS",message:"Parece que voc\xEA enviou um arquivo DLS. Quer converter para SF2?"},musicPlayerMode:KA,settings:VA,synthesizerController:jA,sequencerController:XA};var zi="en",Ot={en:lA,pl:fA,ja:MA,fr:OA,pt:er};var Na=.2,Ua={2048:.05,4096:.27,8192:.34,16384:.37151927437641724,32768:.48},Ge=class{addSequencer;constructor(e,t,o,n,s,r,a,A,d){this.delay=d,this.mode="dark",this.autoKeyRange=!1,this.renderer=n,this.midiKeyboard=s,this.midiDeviceHandler=r,this.synthui=t,this.sequi=o,this.locale=A,this.musicMode=a,this.locales=Ot,this.keyboardSizes={full:{min:0,max:127},piano:{min:21,max:108},"5 octaves":{min:36,max:96},"two octaves":{min:53,max:77}};let u=document.createElement("div");u.style.position="relative",u.classList.add("seamless_button"),u.classList.add("settings_button"),e.appendChild(u);let l=document.createElement("div");l.classList.add("seamless_button"),this.locale.bindObjectProperty(l,"innerText","locale.musicPlayerMode.toggleButton.title"),this.locale.bindObjectProperty(l,"title","locale.musicPlayerMode.toggleButton.description"),e.appendChild(l);let g=document.createElement("div");g.classList.add("seamless_button"),this.locale.bindObjectProperty(g,"innerText","locale.hideTopBar.title"),this.locale.bindObjectProperty(g,"title","locale.hideTopBar.description"),e.appendChild(g);let h=document.getElementsByClassName("show_top_button")[0];h.innerHTML=ls(20);let C=document.createElement("span");this.locale.bindObjectProperty(C,"innerText","locale.settings.toggleButton"),u.appendChild(C);let p=document.createElement("div");p.innerHTML=rs(24),p.classList.add("gear"),u.appendChild(p),this.mainDiv=document.createElement("div"),this.mainDiv.classList.add("settings_menu"),this.visible=!1,this.animationId=-1,u.onclick=()=>this.setVisibility(!this.visible),e.appendChild(this.mainDiv),l.onclick=this.toggleMusicPlayerMode.bind(this),g.onclick=this.hideTopPart.bind(this),this.hideOnDocClick=!0,this.mainDiv.onclick=()=>{this.hideOnDocClick=!1},document.addEventListener("click",()=>{if(!this.hideOnDocClick){this.hideOnDocClick=!0;return}this.setVisibility(!1)}),this.mainDiv.innerHTML=qs,Bs(this.mainDiv);for(let S of this.mainDiv.querySelectorAll("*[translate-path]"))this.locale.bindObjectProperty(S,"textContent",S.getAttribute("translate-path"));for(let S of this.mainDiv.querySelectorAll("*[translate-path-title]")){let M=S.getAttribute("translate-path-title");if(this.locale.bindObjectProperty(S,"textContent",M+".title"),this.locale.bindObjectProperty(S,"title",M+".description"),S.tagName==="LABEL"){let y=S.getAttribute("for");if(y){let k=document.getElementById(y);k&&this.locale.bindObjectProperty(k,"title",M+".description")}}}this.getHtmlControls(),document.addEventListener("keydown",S=>{switch(S.key.toLowerCase()){case Ee.settingsShow:this.setVisibility(!this.visible);break;case Ee.synthesizerUIShow:this.setVisibility(!1)}}),window.savedSettings?this._loadSettings().then(()=>{this.createHandlers(n,s,r,o,t)}):this.createHandlers(n,s,r,o,t),this.topPartVisible=!0;let f=!1;window.addEventListener("resize",()=>{let S=window.screen.height,M=window.screen.width,y=window.outerHeight,k=window.outerWidth,w;w=M===k&&S===y,w!==f&&(f=w,w?this.hideTopPart():this.showTopPart())}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement===null?this.showTopPart():this.hideTopPart()})}async toggleMusicPlayerMode(){this.musicMode.visible===!1&&this.hideTopPart(),this.musicMode.setVisibility(!this.musicMode.visible,document.getElementById("keyboard_canvas_wrapper")),this.renderer.renderBool=!this.musicMode.visible}showTopPart(){if(this.topPartVisible===!0)return;this.topPartVisible=!0;let e=document.getElementsByClassName("top_part")[0],t=document.getElementsByClassName("show_top_button")[0];e.style.display="",setTimeout(()=>{e.classList.remove("top_part_hidden")},75),t.classList.remove("shown"),t.style.display="none"}hideTopPart(){if(this.topPartVisible===!1)return;this.topPartVisible=!1;let e=document.getElementsByClassName("top_part")[0];e.classList.add("top_part_hidden"),setTimeout(()=>{e.style.display="none"},200);let t=document.getElementsByClassName("show_top_button")[0];t.style.display="flex",setTimeout(()=>{t.classList.add("shown")},75),t.onclick=this.showTopPart.bind(this)}setVisibility(e){this.animationId&&clearTimeout(this.animationId),e?(this.mainDiv.style.display="block",setTimeout(()=>{document.getElementsByClassName("top_part")[0].classList.add("settings_shown"),this.mainDiv.classList.add("settings_menu_show")},75),this.hideOnDocClick=!1):(document.getElementsByClassName("top_part")[0].classList.remove("settings_shown"),this.mainDiv.classList.remove("settings_menu_show"),this.animationId=setTimeout(()=>{this.mainDiv.style.display="none"},Na*1e3)),this.visible=e}createHandlers(e,t,o,n,s){this._createRendererHandler(e),this._createMidiSettingsHandler(o,n,s),this._createKeyboardHandler(t,s,e),this._createInterfaceSettingsHandler()}getHtmlControls(){this.htmlControls={renderer:{noteTimeSlider:document.getElementById("note_time_slider"),noteAfterTriggerTimeSlider:document.getElementById("note_after_time_slider"),analyserToggler:document.getElementById("analyser_toggler"),noteToggler:document.getElementById("note_toggler"),activeNoteToggler:document.getElementById("active_note_toggler"),visualPitchToggler:document.getElementById("visual_pitch_toggler"),stabilizeWaveformsToggler:document.getElementById("stabilize_waveforms_toggler"),analyserThicknessSlider:document.getElementById("analyser_thickness_slider"),analyserFftSlider:document.getElementById("analyser_fft_slider"),waveMultiplierSlizer:document.getElementById("wave_multiplier_slider")},keyboard:{channelSelector:document.getElementById("channel_selector"),modeSelector:document.getElementById("mode_selector"),sizeSelector:document.getElementById("keyboard_size_selector"),showSelector:document.getElementById("keyboard_show")},midi:{outputSelector:document.getElementById("midi_output_selector"),inputSelector:document.getElementById("midi_input_selector")},interface:{themeSelector:document.getElementById("toggle_mode_button"),languageSelector:document.getElementById("language_selector"),layoutSelector:document.getElementById("layout_selector")}}}setTimeDelay(e){let t;e>=2048?t=Ua[e]:t=0,this.delay.delayTime.value=t,this.renderer.timeOffset=t,this.synthui.synth.eventHandler.timeDelay=t}};Ge.prototype._toggleDarkMode=Vs;Ge.prototype._createInterfaceSettingsHandler=Os;Ge.prototype._changeLayout=Ys;Ge.prototype._createRendererHandler=Ks;Ge.prototype._createMidiSettingsHandler=Ws;Ge.prototype._createMidiInputHandler=Zs;Ge.prototype._createMidiOutputHandler=js;Ge.prototype._createKeyboardHandler=Us;Ge.prototype._loadSettings=_s;Ge.prototype._serializeSettings=Ps;Ge.prototype._saveSettings=Hs;var tr=`
        <div id='player_info_background_image'></div>
        <div class='player_info_wrapper'>
            <div class='player_info_note_icon'>
                ${as("100%")}
                <img src='' alt='' style='display: none;'>
            </div>
            <div class='player_info_details_wrapper'>
                <p style='font-size: small'><i translate-path='locale.musicPlayerMode.currentlyPlaying'></i></p>
                <h2  id='player_info_title' translate-path='locale.musicPlayerMode.nothingPlaying'></h2>
                
                <div class='player_info_detail_element'>
                    <i id='player_info_detail' translate-path='locale.musicPlayerMode.nothingPlayingCopyright'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.artist'></b><i id='player_info_artist'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.album'></b><i id='player_info_album'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.genre'></b><i id='player_info_genre'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.creationDate'></b><i id='player_info_creation'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.subject'></b><i id='player_info_subject'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.comment'></b><i id='player_info_comment'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <b translate-path-title='locale.exportAudio.formats.metadata.duration'></b><i id='player_info_time'></i>
                </div>
                
                <div class='player_info_detail_element hidden'>
                    <pre id='player_info_file_name'></pre>
                </div>
            </div>
        </div>`;var or=.5,ai=class{constructor(e,t){this.mainDiv=e,this.mainDiv.innerHTML=tr;for(let o of this.mainDiv.querySelectorAll("*[translate-path]"))t.bindObjectProperty(o,"textContent",o.getAttribute("translate-path"));for(let o of this.mainDiv.querySelectorAll("*[translate-path-title]"))t.bindObjectProperty(o,"textContent",o.getAttribute("translate-path-title")+".title"),t.bindObjectProperty(o,"title",o.getAttribute("translate-path-title")+".description");this.timeoutId=-1,this.visible=!1,this.locale=t}toggleDarkMode(){this.mainDiv.getElementsByClassName("player_info_wrapper")[0].classList.toggle("light_mode")}setTitle(e){document.getElementById("player_info_title").textContent=e}connectSequencer(e){this.seq=e,this.seq.addOnSongChangeEvent(t=>{let o=t.copyright,n=(h,C,p=!0)=>{let f=document.getElementById(h),S=C.trim().split(`
`);if(S.length>1){f.parentElement.classList.remove("hidden"),f.innerHTML="";for(let M of S){let y=document.createElement("span");y.textContent=M,f.appendChild(y),f.appendChild(document.createElement("br"))}f.removeChild(f.lastChild);return}if(C.length>0)if(f.parentElement.classList.remove("hidden"),f.innerHTML="",C.length>30&&p){f.classList.add("marquee");let M=document.createElement("span");M.textContent=C,f.appendChild(M)}else f.textContent=C;else f.parentElement.classList.add("hidden")};n("player_info_detail",o),n("player_info_time",Lt(this.seq.duration).time),n("player_info_file_name",t.fileName,!1);let s=(h,C,p,f="")=>this.seq.midiData.RMIDInfo?.[h]===void 0?C:f+p.decode(this.seq.midiData.RMIDInfo?.[h]).replace(/\0$/,""),r=s("IENC","ascii",new TextDecoder),a=new TextDecoder(r);n("player_info_album",s("IPRD","",a)),n("player_info_artist",s("IART","",a)),n("player_info_genre",s("IGNR","",a)),n("player_info_subject",s("ISBJ","",a)),n("player_info_creation",s("ICRD","",a)+s("ICRT","",a,`
`)),n("player_info_comment",s("ICMT","",a));let A=this.mainDiv.getElementsByTagName("svg")[0],d=this.mainDiv.getElementsByTagName("img")[0],u=document.getElementById("player_info_background_image");if(!t.isEmbedded){A.style.display="",d.style.display="none",u.style.setProperty("--bg-image","undefined");return}if(t.RMIDInfo.IPIC===void 0){A.style.display="",d.style.display="none",u.style.setProperty("--bg-image","undefined");return}A.style.display="none",d.style.display="";let l=new Blob([t.RMIDInfo.IPIC.buffer]),g=URL.createObjectURL(l);d.src=g,u.style.setProperty("--bg-image",`url('${g}')`)},"player-js-song-change")}setVisibility(e,t){if(e===this.visible)return;this.visible=e,this.timeoutId&&clearTimeout(this.timeoutId);let o=this.mainDiv;if(e){t.classList.add("out_animation"),this.savedCKWrapperHeight=t.clientHeight;let n=t.clientHeight,s=t.getBoundingClientRect().top;o.style.position="absolute",o.style.top=`${s}px`,o.style.height=`${n}px`,o.style.display="flex",setTimeout(()=>{o.classList.add("player_info_show"),document.body.style.overflow="hidden"},75),this.timeoutId=setTimeout(async()=>{t.style.display="none",o.style.position="",o.style.top="",o.style.height="",document.body.style.overflow=""},or*1e3)}else{let n=o.getBoundingClientRect().top;t.style.display="",t.style.position="absolute",t.style.top=`${n}px`,t.style.height=`${this.savedCKWrapperHeight}px`,o.classList.remove("player_info_show"),setTimeout(()=>{t.classList.remove("out_animation"),document.body.style.overflow="hidden"},75),this.timeoutId=setTimeout(()=>{o.style.display="none",t.style.position="",t.style.top="",t.style.height="",document.body.style.overflow=""},or*1e3)}}};var li=class{onLocaleChanged=[];constructor(e){this.locale=Ot[e]||Ot[zi],this.fallbackLocale=Ot[zi],this.localeCode=e,this._boundObjectProperties=[]}getLocaleString(e,t=[]){let o=this._resolveLocalePath(e);return t.length>0?this._formatLocale(o,t):o}_applyPropertyInternal(e){if(e.isEdited)return;let t=this._resolveLocalePath(e.localePath);e.formattingArguments.length>0&&(t=this._formatLocale(t,e.formattingArguments)),e.object[e.propertyName]=t}_validatePropertyIntegrity(e){let t=this._resolveLocalePath(e.localePath);e.formattingArguments.length>0&&(t=this._formatLocale(t,e.formattingArguments)),e.object[e.propertyName]!==t&&(e.isEdited=!0)}_formatLocale(e,t){return e.replace(/{(\d+)}/g,(o,n)=>typeof t[n]<"u"?t[n]:o)}bindObjectProperty(e,t,o,n=[]){let s={object:e,propertyName:t,localePath:o,formattingArguments:n,isEdited:!1};this._applyPropertyInternal(s),this._boundObjectProperties.push(s)}_resolveLocalePath(e,t=!1){if(!e.startsWith("locale."))throw new Error(`Invalid locale path: ${e} (it should start with "locale.")`);let o=e.split("."),n=t?this.fallbackLocale:this.locale;for(let s=1;s<o.length;s++)if(n[o[s]]!==void 0)n=n[o[s]];else{if(t)throw new Error(`Invalid locale path: ${e}: part "${o[s]}" does not exist. Available paths: ${Object.keys(n).join(", ")}`);return console.warn(`Locale path "${e}" not translated in ${this.locale.localeName} (${this.localeCode}). Using ${this.fallbackLocale.localeName} instead.`),this._resolveLocalePath(e,!0)}if(typeof n!="string")throw new Error(`Invalid locale path: ${e}: value is not a string. Perhaps the path is incomplete`);return n}changeGlobalLocale(e,t=!1){document.documentElement.lang=e;let o=Ot[e];if(!o){Z(`Locale ${e} not found. Not switching.`);return}this.localeCode=e,x("Changing locale to",o.localeName),t||this._boundObjectProperties.forEach(n=>{this._validatePropertyIntegrity(n)}),this.locale=o,this._boundObjectProperties.forEach(n=>{this._applyPropertyInternal(n)}),this.onLocaleChanged.forEach(n=>n())}};function Vi(i,e=!0,t=0,o={},n=void 0){let s=i.getChannelData(t),r=i.getChannelData(t+1),a=s.length,A=2,d=new L(0),u=Object.keys(o).length>0;if(u){let c=new TextEncoder,b=[Et("INFO"),z("ICMT",c.encode("Created with SpessaSynth"),!0)];o.artist&&b.push(z("IART",c.encode(o.artist),!0)),o.album&&b.push(z("IPRD",c.encode(o.album),!0)),o.genre&&b.push(z("IGNR",c.encode(o.genre),!0)),o.title&&b.push(z("INAM",c.encode(o.title),!0)),d=z("LIST",ue(b))}let l=new L(0),g=n?.end!==void 0&&n?.start!==void 0;if(g){let c=Math.floor(n.start*i.sampleRate),b=Math.floor(n.end*i.sampleRate),D=new L(24);xe(D,0,4),xe(D,0,4),Se(D,"data"),xe(D,0,4),xe(D,0,4),xe(D,c,4);let Y=new L(24);xe(Y,1,4),xe(Y,0,4),Se(Y,"data"),xe(Y,0,4),xe(Y,0,4),xe(Y,b,4);let K=ue([new L([2,0,0,0]),D,Y]);l=z("cue ",K)}let h=44,C=a*2*A,p=h+C+d.length+l.length-8,f=new Uint8Array(h);f.set([82,73,70,70],0),f.set(new Uint8Array([p&255,p>>8&255,p>>16&255,p>>24&255]),4),f.set([87,65,86,69],8),f.set([102,109,116,32],12),f.set([16,0,0,0],16),f.set([1,0],20),f.set([2,0],22);let S=i.sampleRate;f.set(new Uint8Array([S&255,S>>8&255,S>>16&255,S>>24&255]),24);let M=S*2*A;f.set(new Uint8Array([M&255,M>>8&255,M>>16&255,M>>24&255]),28),f.set([4,0],32),f.set([16,0],34),f.set([100,97,116,97],36),f.set(new Uint8Array([C&255,C>>8&255,C>>16&255,C>>24&255]),40);let y=new Uint8Array(p+8),k=h;y.set(f,0);let w=32767;if(e){let c=s.map((b,D)=>Math.max(Math.abs(b),Math.abs(r[D]))).reduce((b,D)=>Math.max(b,D));w=c>0?32767/c:1}for(let c=0;c<a;c++){let b=Math.min(32767,Math.max(-32768,s[c]*w)),D=Math.min(32767,Math.max(-32768,r[c]*w));y[k++]=b&255,y[k++]=b>>8&255,y[k++]=D&255,y[k++]=D>>8&255}return u&&(y.set(d,k),k+=d.length),g&&y.set(l,k),new Blob([y.buffer],{type:"audio/wav"})}var ir=1e3;async function nr(i=!0,e=44100,t=2,o=!1,n={},s=0){if(this.isExporting=!0,!this.seq)throw new Error("No sequencer active");let r=manager.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.message"),a=manager.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.estimated"),A=manager.localeManager.getLocaleString("locale.synthInit.genericLoading"),d=re(r,[{type:"text",textContent:A},{type:"progress"}],9999999,!1),u=await this.seq.getMIDI(),l=mo(u.loop.start,u),g=mo(u.loop.end,u),h=g-l,C=u.duration+t+h*s,p=e*C,f;try{f=new OfflineAudioContext({numberOfChannels:o?32:2,sampleRate:e,length:p}),await f.audioWorklet.addModule(new URL(this.workletPath,import.meta.url))}catch(N){re("ERROR",[{type:"text",textContent:N}]);return}let S=await this.synth.getSynthesizerSnapshot(),M=this.soundFont,y,w={reverbEnabled:!0,chorusEnabled:!0,chorusConfig:void 0,reverbImpulseResponse:await f.decodeAudioData(this.impulseResponseRaw.slice(0,this.impulseResponseRaw.byteLength))};S.effectsConfig=w;try{y=new Wt(f.destination,M,!1,{parsedMIDI:u,snapshot:S,oneOutput:o,loopCount:s},w)}catch(N){throw re(this.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}]),N}let c=d.div.getElementsByTagName("p")[0],b=d.div.getElementsByClassName("notification_progress")[0],D=ir/1e3,Y=y.currentTime,K=C,U=.1,J=setInterval(()=>{let N=y.currentTime-Y;Y=y.currentTime;let H=y.currentTime/C;b.style.width=`${H*100}%`;let ne=N/D,we=(1-H)/ne*C;we!==1/0&&(K=U*we+(1-U)*K,c.innerText=`${a} ${Lt(K).time}`)},ir),ee=await f.startRendering();if(b.style.width="100%",clearInterval(J),c.innerText=this.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.convertWav"),await new Promise(N=>setTimeout(N,75)),o){let N="locale.exportAudio.formats.formats.wav.options.separateChannels.saving.",H=[],ne=new Set;for(let Ce of u.usedChannelsOnTrack)Ce.forEach(nt=>ne.add(nt));for(let Ce=0;Ce<16;Ce++){let nt=!0;for(let Ne=Ce;Ne<S.channelSnapshots.length;Ne+=16)if(!S.channelSnapshots[Ne].isMuted){nt=!1;break}!ne.has(Ce)||nt||H.push({type:"button",textContent:this.localeManager.getLocaleString(N+"save",[Ce+1]),onClick:async(Ne,st)=>{let eo=st.textContent;st.textContent=this.localeManager.getLocaleString("locale.exportAudio.formats.formats.wav.exportMessage.convertWav"),await new Promise(to=>setTimeout(to,75));let an=Vi(ee,!1,Ce*2),ln=`${Ce+1} - ${S.channelSnapshots[Ce].patchName}.wav`;this.saveBlob(an,ln),st.classList.add("green_button"),st.textContent=eo}})}let we=re(this.localeManager.getLocaleString(N+"title"),H,99999999,!0,void 0,{display:"flex",flexWrap:"wrap",flexDirection:"row"});we.div.style.width="30rem"}else{let N=mo(u.firstNoteOn,u),H=l-N,ne=g-N,we={start:H,end:ne};x(`%cWriting loop points: start %c${H}%c, end:%c${ne}`,B.info,B.recognized,B.info,B.recognized);let Ce=Vi(ee,i,0,n,we);this.saveBlob(Ce,`${this.seqUI.currentSongTitle||"unnamed_song"}.wav`)}ie(d.id),this.isExporting=!1}async function sr(){if(this.isExporting)return;let i="locale.exportAudio.formats.formats.wav.options.",e="locale.exportAudio.formats.metadata.",t=(d,u,l)=>this.seq.midiData.RMIDInfo?.[d]===void 0?u:l.decode(this.seq.midiData.RMIDInfo?.[d]).replace(/\0$/,""),o=t("IENC","ascii",new TextDecoder),n=new TextDecoder(o),s=t("IPRD","",n),r=t("IART","",n),a=t("IGNR","",n),A=[{type:"text",textContent:this.localeManager.getLocaleString(i+"description"),attributes:{style:"max-width: 30ch; font-style: italic"}},{type:"toggle",translatePathTitle:i+"normalizeVolume",attributes:{"normalize-volume-toggle":"1",checked:"true"}},{type:"input",translatePathTitle:i+"additionalTime",attributes:{value:"2",type:"number","additional-time":"1"}},{type:"input",translatePathTitle:i+"sampleRate",attributes:{value:"44100",type:"number","sample-rate":"1"}},{type:"input",translatePathTitle:i+"loopCount",attributes:{value:"0",type:"number","loop-count":"1"}},{type:"toggle",translatePathTitle:i+"separateChannels",attributes:{"separate-channels-toggle":"1"}},{type:"input",translatePathTitle:e+"songTitle",attributes:{name:"song_title",type:"text",value:this.seqUI.currentSongTitle}},{type:"input",translatePathTitle:e+"album",attributes:{value:s,name:"album",type:"text"}},{type:"input",translatePathTitle:e+"artist",attributes:{value:r,name:"artist",type:"text"}},{type:"input",translatePathTitle:e+"genre",attributes:{value:a,name:"genre",type:"text"}},{type:"button",textContent:this.localeManager.getLocaleString(i+"confirm"),onClick:d=>{ie(d.id);let u=d.div.querySelector("input[normalize-volume-toggle]").checked,l=d.div.querySelector("input[additional-time]").value,g=d.div.querySelector("input[sample-rate]").value,h=d.div.querySelector("input[loop-count]").value,C=d.div.querySelector("input[separate-channels-toggle]").checked,p=d.div.querySelector("input[name='artist']").value,f=d.div.querySelector("input[name='album']").value,S=d.div.querySelector("input[name='song_title']").value,M=d.div.querySelector("input[name='genre']").value,y={artist:p.length>0?p:void 0,album:f.length>0?f:void 0,title:S.length>0?S:void 0,genre:M.length>0?M:void 0};this._doExportAudioData(u,parseInt(g),parseInt(l),C,y,parseInt(h))}}];re(this.localeManager.getLocaleString(i+"title"),A,9999999,!0,this.localeManager)}async function Ar(){let i=await this.seq.getMIDI();try{Bt(i,await this.synth.getSynthesizerSnapshot())}catch(o){Z("Failed to modify MIDI:",o)}let e=Vo(i),t=new Blob([e],{type:"audio/mid"});this.saveBlob(t,`${this.seqUI.currentSongTitle||"unnamed_song"}.mid`)}function rr(i,e){fe("%cSearching for all used programs and keys...",B.info);let t=16+i.midiPortChannelOffsets.reduce((l,g)=>g>l?g:l),o=[];for(let l=0;l<t;l++){let g=l%16===Je?128:0;o.push({program:0,bank:g,drums:l%16===Je,string:`${g}:0`})}function n(l){let g=e.getPreset(l.bank,l.program);l.bank=g.bank,l.program=g.program,l.string=l.bank+":"+l.program,s[l.string]||(x(`%cDetected a new preset: %c${l.string}`,B.info,B.recognized),s[l.string]=new Set)}let s={},r=Array(i.tracks.length).fill(0),a=i.tracks.length;function A(){let l=0,g=1/0;return i.tracks.forEach((h,C)=>{r[C]>=h.length||h[r[C]].ticks<g&&(l=C,g=h[r[C]].ticks)}),l}let d=i.midiPorts.slice(),u="gs";for(;a>0;){let l=A(),g=i.tracks[l];if(r[l]>=g.length){a--;continue}let h=g[r[l]];if(r[l]++,h.messageStatusByte===G.midiPort){d[l]=h.messageData[0];continue}let C=h.messageStatusByte&240;if(C!==G.noteOn&&C!==G.controllerChange&&C!==G.programChange&&C!==G.systemExclusive)continue;let p=(h.messageStatusByte&15)+i.midiPortChannelOffsets[d[l]]||0,f=o[p];switch(C){case G.programChange:f.program=h.messageData[0],n(f);break;case G.controllerChange:if(h.messageData[0]!==R.bankSelect||u==="gs"&&f.drums)continue;let S=h.messageData[1],M=Math.max(0,S-i.bankOffset);if(u==="xg"){let w=S===120||S===126||S===127;w!==f.drums?(f.drums=w,f.bank=f.drums?128:M,n(f)):f.bank=f.drums?128:M;continue}o[p].bank=M;break;case G.noteOn:if(h.messageData[1]===0)continue;n(f),s[f.string].add(`${h.messageData[0]}-${h.messageData[1]}`);break;case G.systemExclusive:if(h.messageData[0]!==65||h.messageData[2]!==66||h.messageData[3]!==18||h.messageData[4]!==64||(h.messageData[5]&16)===0||h.messageData[6]!==21){h.messageData[0]===67&&h.messageData[2]===76&&h.messageData[5]===126&&h.messageData[6]===0&&(u="xg");continue}let y=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][h.messageData[5]&15]+i.midiPortChannelOffsets[d[l]],k=!!(h.messageData[7]>0&&h.messageData[5]>>4);f=o[y],f.drums=k,f.bank=k?128:0,n(f);break}}for(let l of Object.keys(s))s[l].size===0&&(x(`%cDetected change but no keys for %c${l}`,B.info,B.value),delete s[l]);return j(),s}function $t(i,e){function t(n,s){let r=0;for(let a=0;a<n.instrumentZones.length;a++){let A=n.instrumentZones[a];if(A.isGlobal)continue;let d=A.keyRange,u=A.velRange,l=!1;for(let g of s)if(g.key>=d.min&&g.key<=d.max&&g.velocity>=u.min&&g.velocity<=u.max){l=!0;break}l||(x(`%c${A.sample.sampleName} %cremoved from %c${n.instrumentName}%c. Use count: %c${A.useCount-1}`,B.recognized,B.info,B.recognized,B.info,B.recognized),n.safeDeleteZone(a)&&(r++,a--,x(`%c${A.sample.sampleName} %cdeleted`,B.recognized,B.info)),A.sample.useCount<1&&i.deleteSample(A.sample))}return r}Re("%cTrimming soundfont...",B.info);let o=rr(e,i);fe("%cModifying soundfont...",B.info),x("Detected keys for midi:",o);for(let n=0;n<i.presets.length;n++){let s=i.presets[n],r=s.bank+":"+s.program,a=o[r];if(a===void 0)x(`%cDeleting preset %c${s.presetName}%c and its zones`,B.info,B.recognized,B.info),i.deletePreset(s),n--;else{let A=[...a].map(u=>{let l=u.split("-");return{key:parseInt(l[0]),velocity:parseInt(l[1])}});fe(`%cTrimming %c${s.presetName}`,B.info,B.recognized),x(`Keys for ${s.presetName}:`,A);let d=0;for(let u=0;u<s.presetZones.length;u++){let l=s.presetZones[u];if(l.isGlobal)continue;let g=l.keyRange,h=l.velRange,C=!1;for(let p of A)if(p.key>=g.min&&p.key<=g.max&&p.velocity>=h.min&&p.velocity<=h.max){C=!0;let f=t(l.instrument,A);x(`%cTrimmed off %c${f}%c zones from %c${l.instrument.instrumentName}`,B.info,B.recognized,B.info,B.recognized);break}C||(d++,s.deleteZone(u),l.instrument.useCount<1&&i.deleteInstrument(l.instrument),u--)}x(`%cTrimmed off %c${d}%c zones from %c${s.presetName}`,B.info,B.recognized,B.info,B.recognized),j()}}i.removeUnusedElements(),i.soundFontInfo.ICMT=`NOTE: This soundfont was trimmed by SpessaSynth to only contain presets used in "${e.midiName}"

`+i.soundFontInfo.ICMT,x("%cSoundfont modified!",B.recognized),j(),j()}function ar(){let i=4;for(let o of this.instruments)i+=o.instrumentZones.reduce((n,s)=>(s.generators=s.generators.filter(r=>r.generatorType!==I.sampleID&&r.generatorType!==I.keyRange&&r.generatorType!==I.velRange),(s.velRange.max!==127||s.velRange.min!==0)&&s.generators.unshift({generatorType:I.velRange,generatorValue:s.velRange.max<<8|Math.max(s.velRange.min,0)}),(s.keyRange.max!==127||s.keyRange.min!==0)&&s.generators.unshift({generatorType:I.keyRange,generatorValue:s.keyRange.max<<8|Math.max(s.keyRange.min,0)}),s.isGlobal||s.generators.push({generatorType:I.sampleID,generatorValue:this.samples.indexOf(s.sample)}),s.generators.length*4+n),0);let e=new L(i),t=0;for(let o of this.instruments)for(let n of o.instrumentZones){n.generatorZoneStartIndex=t;for(let s of n.generators)_(e,s.generatorType),_(e,s.generatorValue),t++}return $(e,0),Ie(new ge("igen",e.length,e))}function lr(i,e,t,o,n){let s=this.samples.map((d,u)=>{t&&d.compressSample(o,n);let l=d.getRawData();return x(`%cEncoded sample %c${u}. ${d.sampleName}%c of %c${this.samples.length}%c. Compressed: %c${d.isCompressed}%c.`,B.info,B.recognized,B.info,B.recognized,B.info,d.isCompressed?B.recognized:B.unrecognized,B.info),l}),r=this.samples.reduce((d,u,l)=>d+s[l].length+46,0),a=new L(r);this.samples.forEach((d,u)=>{let l=s[u],g,h,C=l.length;d.isCompressed?(g=a.currentIndex,h=g+l.length):(g=a.currentIndex/2,h=g+l.length/2,C+=46),i.push(g),a.set(l,a.currentIndex),a.currentIndex+=C,e.push(h)});let A=Ie(new ge("smpl",a.length,a),new L([115,100,116,97]));return Ie(new ge("LIST",A.length,A))}function cr(i,e){let o=new L(46*(this.samples.length+1));return this.samples.forEach((n,s)=>{Se(o,n.sampleName,20);let r=i[s];$(o,r);let a=e[s];$(o,a);let A=n.sampleLoopStartIndex+r,d=n.sampleLoopEndIndex+r;n.isCompressed&&(A-=r,d-=r),$(o,A),$(o,d),$(o,n.sampleRate),o[o.currentIndex++]=n.samplePitch,o[o.currentIndex++]=n.samplePitchCorrection,_(o,n.sampleLink),_(o,n.sampleType)}),Se(o,"EOS",46),Ie(new ge("shdr",o.length,o))}function gr(){let i=10;for(let o of this.instruments)i+=o.instrumentZones.reduce((n,s)=>s.modulators.length*10+n,0);let e=new L(i),t=0;for(let o of this.instruments)for(let n of o.instrumentZones){n.modulatorZoneStartIndex=t;for(let s of n.modulators)_(e,s.sourceEnum),_(e,s.modulatorDestination),_(e,s.transformAmount),_(e,s.secondarySourceEnum),_(e,s.transformType),t++}return xe(e,0,10),Ie(new ge("imod",e.length,e))}function dr(){let i=this.instruments.reduce((s,r)=>r.instrumentZones.length*4+s,4),e=new L(i),t=0,o=0,n=0;for(let s of this.instruments){s.instrumentZoneIndex=t;for(let r of s.instrumentZones)r.zoneID=t,_(e,o),_(e,n),o+=r.generators.length,n+=r.modulators.length,t++}return _(e,o),_(e,n),Ie(new ge("ibag",e.length,e))}function hr(){let i=this.instruments.length*22+22,e=new L(i),t=0,o=0;for(let n of this.instruments)Se(e,n.instrumentName,20),_(e,t),t+=n.instrumentZones.length,n.instrumentID=o,o++;return Se(e,"EOI",20),_(e,t),Ie(new ge("inst",e.length,e))}function Ir(){let i=4;for(let o of this.presets)i+=o.presetZones.reduce((n,s)=>(s.generators=s.generators.filter(r=>r.generatorType!==I.instrument&&r.generatorType!==I.keyRange&&r.generatorType!==I.velRange),(s.velRange.max!==127||s.velRange.min!==0)&&s.generators.unshift({generatorType:I.velRange,generatorValue:s.velRange.max<<8|Math.max(s.velRange.min,0)}),(s.keyRange.max!==127||s.keyRange.min!==0)&&s.generators.unshift({generatorType:I.keyRange,generatorValue:s.keyRange.max<<8|Math.max(s.keyRange.min,0)}),s.isGlobal||s.generators.push({generatorType:I.instrument,generatorValue:this.instruments.indexOf(s.instrument)}),s.generators.length*4+n),0);let e=new L(i),t=0;for(let o of this.presets)for(let n of o.presetZones){n.generatorZoneStartIndex=t;for(let s of n.generators)_(e,s.generatorType),_(e,s.generatorValue);t+=n.generators.length}return _(e,0),_(e,0),Ie(new ge("pgen",e.length,e))}function ur(){let i=10;for(let o of this.presets)i+=o.presetZones.reduce((n,s)=>s.modulators.length*10+n,0);let e=new L(i),t=0;for(let o of this.presets)for(let n of o.presetZones){n.modulatorZoneStartIndex=t;for(let s of n.modulators)_(e,s.sourceEnum),_(e,s.modulatorDestination),_(e,s.transformAmount),_(e,s.secondarySourceEnum),_(e,s.transformType),t++}return xe(e,0,10),Ie(new ge("pmod",e.length,e))}function mr(){let i=this.presets.reduce((s,r)=>r.presetZones.length*4+s,4),e=new L(i),t=0,o=0,n=0;for(let s of this.presets){s.presetZoneStartIndex=t;for(let r of s.presetZones)r.zoneID=t,_(e,o),_(e,n),o+=r.generators.length,n+=r.modulators.length,t++}return _(e,o),_(e,n),Ie(new ge("pbag",e.length,e))}function pr(){let i=this.presets.length*38+38,e=new L(i),t=0;for(let o of this.presets)Se(e,o.presetName,20),_(e,o.program),_(e,o.bank),_(e,t),$(e,o.library),$(e,o.genre),$(e,o.morphology),t+=o.presetZones.length;return Se(e,"EOP",20),_(e,0),_(e,0),_(e,t),$(e,0),$(e,0),$(e,0),Ie(new ge("phdr",e.length,e))}var qa={compress:!1,compressionQuality:.5,compressionFunction:void 0};function Cr(i=qa){if(i.compress&&typeof i.compressionFunction!="function")throw new TypeError("No compression function supplied but compression enabled.");fe("%cSaving soundfont...",B.info),x(`%cCompression: %c${i?.compress||"false"}%c quality: %c${i?.compressionQuality||"none"}`,B.info,B.recognized,B.info,B.recognized),x("%cWriting INFO...",B.info);let e=[];this.soundFontInfo.ISFT="SpessaSynth",i?.compress&&(this.soundFontInfo.ifil="3.0");for(let[k,w]of Object.entries(this.soundFontInfo))if(k==="ifil"||k==="iver"){let c=parseInt(w.split(".")[0]),b=parseInt(w.split(".")[1]),D=new L(4);_(D,c),_(D,b),e.push(Ie(new ge(k,4,D)))}else if(k==="DMOD")e.push(Ie(new ge(k,w.length,w)));else{let c=new L(w.length);Se(c,w),e.push(Ie(new ge(k,w.length,c)))}let t=ue([new L([73,78,70,79]),...e]),o=Ie(new ge("LIST",t.length,t));x("%cWriting SDTA...",B.info);let n=[],s=[],r=lr.call(this,n,s,i?.compress,i?.compressionQuality??.5,i.compressionFunction);x("%cWriting PDTA...",B.info),x("%cWriting SHDR...",B.info);let a=cr.call(this,n,s);x("%cWriting IGEN...",B.info);let A=ar.call(this);x("%cWriting IMOD...",B.info);let d=gr.call(this);x("%cWriting IBAG...",B.info);let u=dr.call(this);x("%cWriting INST...",B.info);let l=hr.call(this),g=Ir.call(this);x("%cWriting PMOD...",B.info);let h=ur.call(this);x("%cWriting PBAG...",B.info);let C=mr.call(this);x("%cWriting PHDR...",B.info);let p=pr.call(this),f=ue([new L([112,100,116,97]),p,C,h,g,l,u,d,A,a]),S=Ie(new ge("LIST",f.length,f));x("%cWriting the output file...",B.info);let M=ue([new L([115,102,98,107]),o,r,S]),y=Ie(new ge("RIFF",M.length,M));return x(`%cSaved succesfully! Final file size: %c${y.length}`,B.info,B.recognized),j(),y}var wo=class{velRange={min:-1,max:127};keyRange={min:-1,max:127};isGlobal=!1;generators=[];modulators=[];get hasKeyRange(){return this.keyRange.min!==-1}get hasVelRange(){return this.velRange.min!==-1}getGeneratorValue(e,t){return this.generators.find(o=>o.generatorType===e)?.generatorValue??t}};var Te=class extends wo{sample=void 0;useCount=0;deleteZone(){this.useCount--,!this.isGlobal&&this.sample.useCount--}},wt=class extends wo{instrument=void 0;deleteZone(){this.isGlobal||this.instrument.removeUseCount()}};var _a=new Set([I.velRange,I.keyRange,I.instrument,I.exclusiveClass,I.endOper,I.sampleModes,I.startloopAddrsOffset,I.startloopAddrsCoarseOffset,I.endloopAddrsOffset,I.endloopAddrsCoarseOffset,I.startAddrsOffset,I.startAddrsCoarseOffset,I.endAddrOffset,I.endAddrsCoarseOffset,I.initialAttenuation,I.fineTune,I.coarseTune,I.keyNumToVolEnvHold,I.keyNumToVolEnvDecay,I.keyNumToModEnvHold,I.keyNumToModEnvDecay]);function Er(i,e=!0){function t(l,g){l.push(...g.filter(h=>!l.find(C=>C.generatorType===h.generatorType)))}function o(l,g){return{min:Math.max(l.min,g.min),max:Math.min(l.max,g.max)}}function n(l,g){l.push(...g.filter(h=>!l.find(C=>X.isIdentical(h,C))))}let s=[],r=[],a=[],A={min:0,max:127},d={min:0,max:127},u=i.presetZones.find(l=>l.isGlobal);u&&(r.push(...u.generators),a.push(...u.modulators),A=u.keyRange,d=u.velRange);for(let l of i.presetZones){if(l.isGlobal)continue;let g=l.keyRange;l.hasKeyRange||(g=A);let h=l.velRange;l.hasVelRange||(h=d);let C=l.generators.map(c=>new q(c.generatorType,c.generatorValue));t(C,r);let p=[...l.modulators];n(p,a);let f=l.instrument.instrumentZones,S=[],M=[],y={min:0,max:127},k={min:0,max:127},w=f.find(c=>c.isGlobal);w&&(S.push(...w.generators),M.push(...w.modulators),y=w.keyRange,k=w.velRange);for(let c of f){if(c.isGlobal)continue;let b=c.keyRange;c.hasKeyRange||(b=y);let D=c.velRange;if(c.hasVelRange||(D=k),b=o(b,g),D=o(D,h),b.max<b.min||D.max<D.min)continue;let Y=c.generators.map(N=>new q(N.generatorType,N.generatorValue));t(Y,S);let K=[...c.modulators];n(K,M);let U=[...K];for(let N of p){let H=U.findIndex(ne=>X.isIdentical(N,ne));H!==-1?U[H]=U[H].sumTransform(N):U.push(N)}let J=Y.map(N=>new q(N.generatorType,N.generatorValue));for(let N of C){if(N.generatorType===I.velRange||N.generatorType===I.keyRange||N.generatorType===I.instrument||N.generatorType===I.endOper||N.generatorType===I.sampleModes)continue;let H=Y.findIndex(ne=>ne.generatorType===N.generatorType);if(H!==-1){let ne=J[H].generatorValue+N.generatorValue;J[H]=new q(N.generatorType,ne)}else{let ne=W[N.generatorType].def+N.generatorValue;J.push(new q(N.generatorType,ne))}}J=J.filter(N=>N.generatorType!==I.sampleID&&N.generatorType!==I.keyRange&&N.generatorType!==I.velRange&&N.generatorType!==I.endOper&&N.generatorType!==I.instrument&&N.generatorValue!==W[N.generatorType].def);let ee=new Te;ee.keyRange=b,ee.velRange=D,ee.keyRange.min===0&&ee.keyRange.max===127&&(ee.keyRange.min=-1),ee.velRange.min===0&&ee.velRange.max===127&&(ee.velRange.min=-1),ee.isGlobal=!1,ee.sample=c.sample,ee.generators=J,ee.modulators=U,s.push(ee)}}if(e){let l=new Te;l.isGlobal=!0;for(let C=0;C<58;C++){if(_a.has(C))continue;let p={},f=W[C]?.def||0;p[f]=0;for(let S of s){let M=S.generators.find(w=>w.generatorType===C);if(M){let w=M.generatorValue;p[w]===void 0?p[w]=1:p[w]++}else p[f]++;let y;switch(C){default:continue;case I.decayVolEnv:y=I.keyNumToVolEnvDecay;break;case I.holdVolEnv:y=I.keyNumToVolEnvHold;break;case I.decayModEnv:y=I.keyNumToModEnvDecay;break;case I.holdModEnv:y=I.keyNumToModEnvHold}if(S.generators.find(w=>w.generatorType===y)!==void 0){p={};break}}if(Object.keys(p).length>0){let S=Object.entries(p).reduce((y,k)=>y[1]<k[1]?k:y,[0,0]),M=parseInt(S[0]);M!==f&&l.generators.push(new q(C,M)),s.forEach(y=>{let k=y.generators.findIndex(w=>w.generatorType===C);k!==-1?y.generators[k].generatorValue===M&&y.generators.splice(k,1):M!==f&&y.generators.push(new q(C,f))})}}let h=s.find(C=>!C.isGlobal).modulators.map(C=>X.copy(C));for(let C of h){let p=!0;for(let f of s){if(f.isGlobal||!p)continue;f.modulators.find(M=>X.isIdentical(M,C))||(p=!1)}if(p===!0){l.modulators.push(X.copy(C));for(let f of s){let S=f.modulators.find(M=>X.isIdentical(M,C));S.transformAmount===C.transformAmount&&f.modulators.splice(f.modulators.indexOf(S),1)}}}s.splice(0,0,l)}return s}var Br=20;function ci(i,e,t,o,n,s,r){let a=r===0?0:1,A=new L(Br+a*16);$(A,Br),_(A,e),_(A,t);let d=o*.4,u=Math.floor(d*-65536);$(A,u),$(A,2);let l=s-n,g=0;switch(r){default:case 0:a=0;break;case 1:g=0,a=1;break;case 3:g=1,a=1}return $(A,a),a===1&&($(A,16),$(A,g),$(A,n),$(A,l)),z("wsmp",A)}var O={none:0,modLfo:1,velocity:2,keyNum:3,volEnv:4,modEnv:5,pitchWheel:6,polyPressure:7,channelPressure:8,vibratoLfo:9,modulationWheel:129,volume:135,pan:138,expression:139,chorus:219,reverb:221,pitchWheelRange:256,fineTune:257,coarseTune:258},gi=new X({srcEnum:219,dest:I.reverbEffectsSend,amt:1e3,secSrcEnum:0,transform:0}),di=new X({srcEnum:221,dest:I.chorusEffectsSend,amt:1e3,secSrcEnum:0,transform:0}),hi=new X({srcEnum:129,dest:I.vibLfoToPitch,amt:0,secSrcEnum:0,transform:0}),Ii=new X({srcEnum:13,dest:I.vibLfoToPitch,amt:0,secSrcEnum:0,transform:0});var F={none:0,gain:1,reserved:2,pitch:3,pan:4,keyNum:5,chorusSend:128,reverbSend:129,modLfoFreq:260,modLfoDelay:261,vibLfoFreq:276,vibLfoDelay:277,volEnvAttack:518,volEnvDecay:519,volEnvRelease:521,volEnvSustain:522,volEnvDelay:523,volEnvHold:524,modEnvAttack:778,modEnvDecay:779,modEnvRelease:781,modEnvSustain:782,modEnvDelay:783,modEnvHold:784,filterCutoff:1280,filterQ:1281};var Do=class{source;control;destination;scale;transform;constructor(e,t,o,n,s){this.source=e,this.control=t,this.destination=o,this.scale=n,this.transform=s}writeArticulator(){let e=new L(12);return _(e,this.source),_(e,this.control),_(e,this.destination),_(e,this.transform),$(e,this.scale<<16),e}};function fr(i,e){if(i)switch(e){default:return;case R.modulationWheel:return O.modulationWheel;case R.mainVolume:return O.volume;case R.pan:return O.pan;case R.expressionController:return O.expression;case R.chorusDepth:return O.chorus;case R.reverbDepth:return O.reverb}else switch(e){default:return;case de.noteOnKeyNum:return O.keyNum;case de.noteOnVelocity:return O.velocity;case de.noController:return O.none;case de.polyPressure:return O.polyPressure;case de.channelPressure:return O.channelPressure;case de.pitchWheel:return O.pitchWheel;case de.pitchWheelRange:return O.pitchWheelRange}}function Qr(i,e){switch(i){default:return;case I.initialAttenuation:return{dest:F.gain,amount:-e};case I.fineTune:return F.pitch;case I.pan:return F.pan;case I.keyNum:return F.keyNum;case I.reverbEffectsSend:return F.reverbSend;case I.chorusEffectsSend:return F.chorusSend;case I.freqModLFO:return F.modLfoFreq;case I.delayModLFO:return F.modLfoDelay;case I.delayVibLFO:return F.vibLfoDelay;case I.freqVibLFO:return F.vibLfoFreq;case I.delayVolEnv:return F.volEnvDelay;case I.attackVolEnv:return F.volEnvAttack;case I.holdVolEnv:return F.volEnvHold;case I.decayVolEnv:return F.volEnvDecay;case I.sustainVolEnv:return{dest:F.volEnvSustain,amount:1e3-e};case I.releaseVolEnv:return F.volEnvRelease;case I.delayModEnv:return F.modEnvDelay;case I.attackModEnv:return F.modEnvAttack;case I.holdModEnv:return F.modEnvHold;case I.decayModEnv:return F.modEnvDecay;case I.sustainModEnv:return{dest:F.modEnvSustain,amount:1e3-e};case I.releaseModEnv:return F.modEnvRelease;case I.initialFilterFc:return F.filterCutoff;case I.initialFilterQ:return F.filterQ}}function yr(i,e){switch(i){default:return;case I.modEnvToFilterFc:return{source:O.modEnv,dest:F.filterCutoff,amt:e,isBipolar:!1};case I.modEnvToPitch:return{source:O.modEnv,dest:F.pitch,amt:e,isBipolar:!1};case I.modLfoToFilterFc:return{source:O.modLfo,dest:F.filterCutoff,amt:e,isBipolar:!0};case I.modLfoToVolume:return{source:O.modLfo,dest:F.gain,amt:e,isBipolar:!0};case I.modLfoToPitch:return{source:O.modLfo,dest:F.pitch,amt:e,isBipolar:!0};case I.vibLfoToPitch:return{source:O.vibratoLfo,dest:F.pitch,amt:e,isBipolar:!0};case I.keyNumToVolEnvHold:return{source:O.keyNum,dest:F.volEnvHold,amt:e,isBipolar:!0};case I.keyNumToVolEnvDecay:return{source:O.keyNum,dest:F.volEnvDecay,amt:e,isBipolar:!0};case I.keyNumToModEnvHold:return{source:O.keyNum,dest:F.modEnvHold,amt:e,isBipolar:!0};case I.keyNumToModEnvDecay:return{source:O.keyNum,dest:F.modEnvDecay,amt:e,isBipolar:!0};case I.scaleTuning:return{source:O.keyNum,dest:F.pitch,amt:e*128,isBipolar:!1}}}function Sr(i){let e=Qr(i.generatorType,i.generatorValue),t=e,o=0,n=i.generatorValue;e?.amount!==void 0&&(n=e.amount,t=e.dest);let s=yr(i.generatorType,i.generatorValue);if(s!==void 0)n=s.amt,t=s.dest,o=s.source;else if(t===void 0){Z(`Invalid generator type: ${i.generatorType}`);return}return new Do(o,0,t,n,0)}function wr(i){if(i.transformType!==0){Z("Other transform types are not supported.");return}let e=fr(i.sourceUsesCC,i.sourceIndex),t=i.sourceCurveType,o=i.sourcePolarity,n=i.sourceDirection;if(e===void 0){Z(`Invalid source: ${i.sourceIndex}, CC: ${i.sourceUsesCC}`);return}i.modulatorDestination===I.initialAttenuation&&(n=n===1?0:1);let s=fr(i.secSrcUsesCC,i.secSrcIndex),r=i.secSrcCurveType,a=i.secSrcPolarity,A=i.secSrcDirection;if(s===void 0){Z(`Invalid secondary source: ${i.secSrcIndex}, CC: ${i.secSrcUsesCC}`);return}let d=Qr(i.modulatorDestination,i.transformAmount),u=d,l=i.transformAmount;d?.dest!==void 0&&(u=d.dest,l=d.amount);let g=yr(i.modulatorDestination,i.transformAmount);if(g!==void 0)l=g.amt,s=e,r=t,a=o,A=n,t=qe.linear,o=g.isBipolar?1:0,n=0,e=g.source,u=g.dest;else if(u===void 0){Z(`Invalid destination: ${i.modulatorDestination}`);return}let h=0;return h|=r<<4,h|=a<<8,h|=A<<9,h|=t,h|=o<<14,h|=n<<15,new Do(e,s,u,l,h)}var Ha=new Set([I.sampleModes,I.initialAttenuation,I.keyRange,I.velRange,I.sampleID,I.fineTune,I.coarseTune,I.startAddrsOffset,I.startAddrsCoarseOffset,I.endAddrOffset,I.endAddrsCoarseOffset,I.startloopAddrsOffset,I.startloopAddrsCoarseOffset,I.endloopAddrsOffset,I.endloopAddrsCoarseOffset,I.overridingRootKey,I.exclusiveClass]);function ui(i){for(let s=0;s<i.generators.length;s++){let r=i.generators[s];(r.generatorType===I.delayVolEnv||r.generatorType===I.attackVolEnv||r.generatorType===I.holdVolEnv||r.generatorType===I.decayVolEnv||r.generatorType===I.releaseVolEnv||r.generatorType===I.delayModEnv||r.generatorType===I.attackModEnv||r.generatorType===I.holdModEnv||r.generatorType===I.decayModEnv)&&(i.generators[s]=new q(r.generatorType,Math.min(r.generatorValue,6386),!1))}for(let s=0;s<i.generators.length;s++){let r=i.generators[s],a;switch(r.generatorType){default:continue;case I.keyNumToVolEnvDecay:a=I.decayVolEnv;break;case I.keyNumToVolEnvHold:a=I.holdVolEnv;break;case I.keyNumToModEnvDecay:a=I.decayModEnv;break;case I.keyNumToModEnvHold:a=I.holdModEnv}let A=i.generators.find(C=>C.generatorType===a);if(A===void 0)continue;let d=r.generatorValue*-128,u=60/128*d,l=A.generatorValue-u,g=i.generators.indexOf(r),h=i.generators.indexOf(A);i.generators[h]=new q(a,l,!1),i.generators[g]=new q(r.generatorType,d,!1)}let e=i.generators.reduce((s,r)=>{if(Ha.has(r.generatorType))return s;let a=Sr(r);return a!==void 0?(s.push(a),x("%cSucceeded converting to DLS Articulator!",B.recognized)):Z("Failed converting to DLS Articulator!"),s},[]),t=i.modulators.reduce((s,r)=>{if(X.isIdentical(r,di,!0)||X.isIdentical(r,gi,!0)||X.isIdentical(r,hi,!0)||X.isIdentical(r,Ii,!0))return s;let a=wr(r);return a!==void 0?(s.push(a),x("%cSucceeded converting to DLS Articulator!",B.recognized)):Z("Failed converting to DLS Articulator!"),s},[]);e.push(...t);let o=new L(8);$(o,8),$(o,e.length);let n=e.map(s=>s.writeArticulator());return z("art2",ue([o,...n]))}function Dr(i,e){let t=new L(12);_(t,Math.max(i.keyRange.min,0)),_(t,i.keyRange.max),_(t,Math.max(i.velRange.min,0)),_(t,i.velRange.max),_(t,0);let o=i.getGeneratorValue(I.exclusiveClass,0);_(t,o),_(t,0);let n=z("rgnh",t),s=i.getGeneratorValue(I.overridingRootKey,i.sample.samplePitch);i.getGeneratorValue(I.scaleTuning,e.getGeneratorValue(I.scaleTuning,100))===0&&i.keyRange.max-i.keyRange.min===0&&(s=i.keyRange.min);let a=ci(i.sample,s,i.getGeneratorValue(I.fineTune,0)+i.getGeneratorValue(I.coarseTune,0)*100+i.sample.samplePitchCorrection,i.getGeneratorValue(I.initialAttenuation,0),i.sample.sampleLoopStartIndex+i.getGeneratorValue(I.startloopAddrsOffset,0)+i.getGeneratorValue(I.startloopAddrsCoarseOffset,0)*32768,i.sample.sampleLoopEndIndex+i.getGeneratorValue(I.endloopAddrsOffset,0)+i.getGeneratorValue(I.endloopAddrsCoarseOffset,0)*32768,i.getGeneratorValue(I.sampleModes,0)),A=new L(12);_(A,0),_(A,0),$(A,1),$(A,this.samples.indexOf(i.sample));let d=z("wlnk",A),u=new L(0);if(i.modulators.length+i.generators.length>0){let l=ui(i);u=z("lar2",l,!1,!0)}return z("rgn2",ue([n,a,d,u]),!1,!0)}function kr(i){fe(`%cWriting %c${i.presetName}%c...`,B.info,B.recognized,B.info);let e=Er(i),t=e.reduce((g,h)=>h.isGlobal?g:g+1,0),o=new L(12);$(o,t);let n=(i.bank&127)<<8;i.bank===128&&(n|=1<<31),$(o,n),$(o,i.program&127);let s=z("insh",o),r=new L(0),a=e.find(g=>g.isGlobal===!0);if(a){let g=ui(a);r=z("lar2",g,!1,!0)}let A=ue(e.reduce((g,h)=>(h.isGlobal||g.push(Dr.apply(this,[h,a])),g),[])),d=z("lrgn",A,!1,!0),u=z("INAM",at(i.presetName)),l=z("INFO",u,!1,!0);return j(),z("ins ",ue([s,d,r,l]),!1,!0)}function br(){let i=ue(this.presets.map(e=>kr.apply(this,[e])));return z("lins",i,!1,!0)}function vr(i){let e=new L(18);_(e,1),_(e,1),$(e,i.sampleRate),$(e,i.sampleRate*2),_(e,2),_(e,16);let t=z("fmt ",e),o=1;i.sampleLoopStartIndex+Math.abs(i.getAudioData().length-i.sampleLoopEndIndex)<2&&(o=0);let n=ci(i,i.samplePitch,i.samplePitchCorrection,0,i.sampleLoopStartIndex,i.sampleLoopEndIndex,o),s=i.getAudioData(),r;if(i.isCompressed){let d=new Int16Array(s.length);for(let u=0;u<s.length;u++)d[u]=s[u]*32768;r=z("data",new L(d.buffer))}else r=z("data",i.getRawData());let a=z("INAM",at(i.sampleName)),A=z("INFO",a,!1,!0);return x(`%cSaved %c${i.sampleName}%c succesfully!`,B.recognized,B.value,B.recognized),z("wave",ue([t,n,r,A]),!1,!0)}function xr(){let i=0,e=[],t=this.samples.map(o=>{let n=vr(o);return e.push(i),i+=n.length,n});return{data:z("wvpl",ue(t),!1,!0),indexes:e}}function Mr(){fe("%cSaving DLS...",B.info);let i=new L(4);$(i,this.presets.length);let e=z("colh",i);fe("%cWriting instruments...",B.info);let t=br.apply(this);x("%cSuccess!",B.recognized),j(),fe("%cWriting WAVE samples...",B.info);let o=xr.apply(this),n=o.data,s=o.indexes;x("%cSucceeded!",B.recognized),j();let r=new L(8+4*s.length);$(r,8),$(r,s.length);for(let l of s)$(r,l);let a=z("ptbl",r);this.soundFontInfo.ICMT=(this.soundFontInfo.ICMT||"Soundfont")+`
Converted from SF2 to DLS using SpessaSynth`,this.soundFontInfo.ISFT="SpessaSynth";let A=[];for(let[l,g]of Object.entries(this.soundFontInfo))l!=="ICMT"&&l!=="INAM"&&l!=="ICRD"&&l!=="IENG"&&l!=="ICOP"&&l!=="ISFT"&&l!=="ISBJ"||A.push(z(l,at(g),!0));let d=z("INFO",ue(A),!1,!0),u=new L(e.length+t.length+a.length+n.length+d.length+4);return Se(u,"DLS "),u.set(ue([e,t,a,n,d]),4),x("%cSaved succesfully!",B.recognized),j(),z("RIFF",u)}var Pa=48e3,Dt=class{constructor(e,t,o,n,s,r,a,A){this.sampleName=e,this.sampleRate=t,this.samplePitch=o,this.samplePitchCorrection=n,this.sampleLink=s,this.sampleType=r,this.sampleLoopStartIndex=a,this.sampleLoopEndIndex=A,this.isCompressed=(r&16)>0,this.compressedData=void 0,this.useCount=0,this.sampleData=void 0}getRawData(){let e=new Uint8Array(this.sampleData.length*2);for(let t=0;t<this.sampleData.length;t++){let o=Math.floor(this.sampleData[t]*32768);e[t*2]=o&255,e[t*2+1]=o>>8&255}return e}resampleData(e){let t=this.getAudioData(),o=e/this.sampleRate,n=new Float32Array(Math.floor(t.length*o));for(let s=0;s<n.length;s++)n[s]=t[Math.floor(s*(1/o))];t=n,this.sampleRate=e,this.sampleLoopStartIndex=Math.floor(this.sampleLoopStartIndex*o),this.sampleLoopEndIndex=Math.floor(this.sampleLoopEndIndex*o),this.sampleData=t}compressSample(e,t){if(!this.isCompressed)try{let o=this.getAudioData();(this.sampleRate<8e3||this.sampleRate>96e3)&&(this.resampleData(Pa),o=this.getAudioData()),this.compressedData=t([o],1,this.sampleRate,e),this.sampleType|=16,this.isCompressed=!0}catch{Z(`Failed to compress ${this.sampleName}. Leaving as uncompressed!`),this.isCompressed=!1,this.compressedData=void 0,this.sampleType&=239}}getAudioData(){return this.sampleData}};var kt=class{constructor(){this.instrumentName="",this.instrumentZones=[],this._useCount=0}get useCount(){return this._useCount}addUseCount(){this._useCount++,this.instrumentZones.forEach(e=>e.useCount++)}removeUseCount(){this._useCount--;for(let e=0;e<this.instrumentZones.length;e++)this.safeDeleteZone(e)&&e--}deleteInstrument(){this.instrumentZones.forEach(e=>e.deleteZone()),this.instrumentZones.length=0}safeDeleteZone(e){return this.instrumentZones[e].useCount--,this.instrumentZones[e].useCount<1?(this.deleteZone(e),!0):!1}deleteZone(e){this.instrumentZones[e].deleteZone(),this.instrumentZones.splice(e,1)}};var bt=class{constructor(e){this.presetName="",this.program=0,this.bank=0,this.presetZones=[],this.sampleIDOffset=0,this.foundSamplesAndGenerators=[];for(let t=0;t<128;t++)this.foundSamplesAndGenerators[t]=[];this.library=0,this.genre=0,this.morphology=0,this.defaultModulators=e}deletePreset(){this.presetZones.forEach(e=>e.deleteZone()),this.presetZones.length=0}deleteZone(e){this.presetZones[e].deleteZone(),this.presetZones.splice(e,1)}preload(e,t){for(let o=e;o<t+1;o++)for(let n=0;n<128;n++)this.getSamplesAndGenerators(o,n).forEach(s=>{s.sample.isSampleLoaded||s.sample.getAudioData()})}preloadSpecific(e,t){this.getSamplesAndGenerators(e,t).forEach(o=>{o.sample.isSampleLoaded||o.sample.getAudioData()})}getSamplesAndGenerators(e,t){let o=this.foundSamplesAndGenerators[e][t];if(o)return o;if(this.presetZones.length<1)return[];function n(h,C){return C>=h.min&&C<=h.max}function s(h,C){h.push(...C.filter(p=>!h.find(f=>f.generatorType===p.generatorType)))}function r(h,C){h.push(...C.filter(p=>!h.find(f=>X.isIdentical(p,f))))}let a=[],A=this.presetZones[0].isGlobal?[...this.presetZones[0].generators]:[],d=this.presetZones[0].isGlobal?[...this.presetZones[0].modulators]:[],u=this.presetZones[0].isGlobal?this.presetZones[0].keyRange:{min:0,max:127},l=this.presetZones[0].isGlobal?this.presetZones[0].velRange:{min:0,max:127};return this.presetZones.filter(h=>n(h.hasKeyRange?h.keyRange:u,e)&&n(h.hasVelRange?h.velRange:l,t)&&!h.isGlobal).forEach(h=>{if(h.instrument.instrumentZones.length<1)return;let C=h.generators,p=h.modulators,f=h.instrument.instrumentZones[0],S=f.isGlobal?[...f.generators]:[],M=f.isGlobal?[...f.modulators]:[],y=f.isGlobal?f.keyRange:{min:0,max:127},k=f.isGlobal?f.velRange:{min:0,max:127};h.instrument.instrumentZones.filter(c=>n(c.hasKeyRange?c.keyRange:y,e)&&n(c.hasVelRange?c.velRange:k,t)&&!c.isGlobal).forEach(c=>{let b=[...c.generators],D=[...c.modulators];s(C,A),s(b,S),r(p,d),r(D,M),r(D,this.defaultModulators);let Y=[...D];for(let K=0;K<p.length;K++){let U=p[K],J=Y.findIndex(ee=>X.isIdentical(U,ee));J!==-1?Y[J]=Y[J].sumTransform(U):Y.push(U)}a.push({instrumentGenerators:b,presetGenerators:C,modulators:Y,sample:c.sample,sampleID:c.generators.find(K=>K.generatorType===I.sampleID).generatorValue})})}),this.foundSamplesAndGenerators[e][t]=a,a}};var vt=class i{constructor(e=void 0){this.soundFontInfo={},this.presets=[],this.samples=[],this.instruments=[],this.defaultModulators=Ho.map(t=>X.copy(t)),e?.presets&&(this.presets.push(...e.presets),this.soundFontInfo=e.info)}static mergeSoundfonts(...e){let t=e.shift(),o=t.presets;for(;e.length;)e.shift().presets.forEach(s=>{o.find(r=>r.bank===s.bank&&r.program===s.program)===void 0&&o.push(s)});return new i({presets:o,info:t.soundFontInfo})}static getDummySoundfontFile(){let e=new i,t=new Dt("Saw",44100,65,20,0,0,0,127);t.sampleData=new Float32Array(128);for(let d=0;d<128;d++)t.sampleData[d]=d/128*2-1;e.samples.push(t);let o=new Te;o.isGlobal=!0,o.generators.push(new q(I.initialAttenuation,375)),o.generators.push(new q(I.releaseVolEnv,-1e3)),o.generators.push(new q(I.sampleModes,1));let n=new Te;n.sample=t;let s=new Te;s.sample=t,s.generators.push(new q(I.fineTune,-9));let r=new kt;r.instrumentName="Saw Wave",r.instrumentZones.push(o),r.instrumentZones.push(n),r.instrumentZones.push(s),e.instruments.push(r);let a=new wt;a.instrument=r;let A=new bt(e.defaultModulators);return A.presetName="Saw Wave",A.presetZones.push(a),e.presets.push(A),e.soundFontInfo.ifil="2.1",e.soundFontInfo.isng="EMU8000",e.soundFontInfo.INAM="Dummy",e.write().buffer}removeUnusedElements(){this.instruments.forEach(e=>{e.useCount<1&&e.instrumentZones.forEach(t=>{t.isGlobal||t.sample.useCount--})}),this.instruments=this.instruments.filter(e=>e.useCount>0),this.samples=this.samples.filter(e=>e.useCount>0)}deleteInstrument(e){if(e.useCount>0)throw new Error(`Cannot delete an instrument that has ${e.useCount} usages.`);this.instruments.splice(this.instruments.indexOf(e),1),e.deleteInstrument(),this.removeUnusedElements()}deletePreset(e){e.deletePreset(),this.presets.splice(this.presets.indexOf(e),1),this.removeUnusedElements()}deleteSample(e){if(e.useCount>0)throw new Error(`Cannot delete sample that has ${e.useCount} usages.`);this.samples.splice(this.samples.indexOf(e),1),this.removeUnusedElements()}setSampleIDOffset(e){this.presets.forEach(t=>t.sampleIDOffset=e)}getPresetNoFallback(e,t,o=!1){let n=this.presets.find(s=>s.bank===e&&s.program===t);if(n)return n;if(o!==!1)return e===128?this.presets.find(s=>s.bank===128):this.presets.find(s=>s.program===t)}getPreset(e,t){let o=this.presets.find(n=>n.bank===e&&n.program===t);return o||(e===128?(o=this.presets.find(n=>n.bank===128&&n.program===t),o||(o=this.presets.find(n=>n.bank===128))):o=this.presets.find(n=>n.program===t&&n.bank!==128),o&&Z(`%cPreset ${e}.${t} not found. Replaced with %c${o.presetName} (${o.bank}.${o.program})`,B.warn,B.recognized)),o||(Z(`Preset ${t} not found. Defaulting to`,this.presets[0].presetName),o=this.presets[0]),o}getPresetByName(e){let t=this.presets.find(o=>o.presetName===e);return t||(Z("Preset not found. Defaulting to:",this.presets[0].presetName),t=this.presets[0]),t}parsingError(e){throw new Error(`SF parsing error: ${e} The file may be corrupted.`)}destroySoundfont(){delete this.presets,delete this.instruments,delete this.samples}};vt.prototype.write=Cr;vt.prototype.writeDLS=Mr;function Fr(i){fe("%cLoading instruments...",B.info);for(let e=0;e<this.instrumentAmount;e++)this.readDLSInstrument(Ae(i.chunkData));j()}var mi=class extends bt{constructor(e,t){super(Ho),this.program=t&127,this.bank=e>>8&127,e>>31&&(this.bank=128),this.DLSInstrument=new kt,this.DLSInstrument.addUseCount();let n=new wt;n.instrument=this.DLSInstrument,this.presetZones=[n]}};function Rr(i){this.verifyHeader(i,"LIST"),this.verifyText(ae(i.chunkData,4),"ins ");let e=[];for(;i.chunkData.length>i.chunkData.currentIndex;)e.push(Ae(i.chunkData));let t=e.find(h=>h.header==="insh");if(!t)throw j(),new Error("No instrument header!");let o=T(t.chunkData,4),n=T(t.chunkData,4),s=T(t.chunkData,4),r=new mi(n,s),a="unnamedPreset",A=Pe(e,"INFO");if(A){let h=Ae(A.chunkData);for(;h.header!=="INAM";)h=Ae(A.chunkData);a=ae(h.chunkData,h.chunkData.length).trim()}r.presetName=a,r.DLSInstrument.instrumentName=a,Re(`%cParsing %c"${a}"%c...`,B.info,B.recognized,B.info);let d=Pe(e,"lrgn");if(!d)throw j(),new Error("No region list!");let u=new Te;u.isGlobal=!0;let l=Pe(e,"lart"),g=Pe(e,"lar2");(g!==void 0||l!==void 0)&&this.readLart(l,g,u),u.generators=u.generators.filter(h=>h.generatorValue!==W[h.generatorType].def),u.modulators.find(h=>h.modulatorDestination===I.reverbEffectsSend)===void 0&&u.modulators.push(X.copy(gi)),u.modulators.find(h=>h.modulatorDestination===I.chorusEffectsSend)===void 0&&u.modulators.push(X.copy(di)),r.DLSInstrument.instrumentZones.push(u);for(let h=0;h<o;h++){let C=Ae(d.chunkData);this.verifyHeader(C,"LIST");let p=ae(C.chunkData,4);p!=="rgn "&&p!=="rgn2"&&(j(),this.parsingError(`Invalid DLS region! Expected "rgn " or "rgn2" got "${p}"`));let f=this.readRegion(C);f&&r.DLSInstrument.instrumentZones.push(f)}this.presets.push(r),this.instruments.push(r.DLSInstrument),j()}function Lr(i){let e,t=!1;switch(i){default:case O.modLfo:case O.vibratoLfo:case O.coarseTune:case O.fineTune:case O.modEnv:return;case O.keyNum:e=de.noteOnKeyNum;break;case O.none:e=de.noController;break;case O.modulationWheel:e=R.modulationWheel,t=!0;break;case O.pan:e=R.pan,t=!0;break;case O.reverb:e=R.reverbDepth,t=!0;break;case O.chorus:e=R.chorusDepth,t=!0;break;case O.expression:e=R.expressionController,t=!0;break;case O.volume:e=R.mainVolume,t=!0;break;case O.velocity:e=de.noteOnVelocity;break;case O.polyPressure:e=de.polyPressure;break;case O.channelPressure:e=de.channelPressure;break;case O.pitchWheel:e=de.pitchWheel;break;case O.pitchWheelRange:e=de.pitchWheelRange;break}if(e===void 0)throw new Error(`Unknown DLS Source: ${i}`);return{enum:e,isCC:t}}function Oa(i,e){switch(i){default:case F.none:return;case F.pan:return I.pan;case F.gain:return{gen:I.initialAttenuation,newAmount:e*-1};case F.pitch:return I.fineTune;case F.keyNum:return I.overridingRootKey;case F.volEnvDelay:return I.delayVolEnv;case F.volEnvAttack:return I.attackVolEnv;case F.volEnvHold:return I.holdVolEnv;case F.volEnvDecay:return I.decayVolEnv;case F.volEnvSustain:return{gen:I.sustainVolEnv,newAmount:1e3-e};case F.volEnvRelease:return I.releaseVolEnv;case F.modEnvDelay:return I.delayModEnv;case F.modEnvAttack:return I.attackModEnv;case F.modEnvHold:return I.holdModEnv;case F.modEnvDecay:return I.decayModEnv;case F.modEnvSustain:return{gen:I.sustainModEnv,newAmount:(1e3-e)/10};case F.modEnvRelease:return I.releaseModEnv;case F.filterCutoff:return I.initialFilterFc;case F.filterQ:return I.initialFilterQ;case F.chorusSend:return I.chorusEffectsSend;case F.reverbSend:return I.reverbEffectsSend;case F.modLfoFreq:return I.freqModLFO;case F.modLfoDelay:return I.delayModLFO;case F.vibLfoFreq:return I.freqVibLFO;case F.vibLfoDelay:return I.delayVibLFO}}function Ya(i,e){return i===O.vibratoLfo&&e===F.pitch?I.vibLfoToPitch:i===O.modLfo&&e===F.pitch?I.modLfoToPitch:i===O.modLfo&&e===F.filterCutoff?I.modLfoToFilterFc:i===O.modLfo&&e===F.gain?I.modLfoToVolume:i===O.modEnv&&e===F.filterCutoff?I.modEnvToFilterFc:i===O.modEnv&&e===F.pitch?I.modEnvToPitch:void 0}function Gr(i,e,t,o,n){let s=Ya(i,t),r,a,A=!1,d=!1,u=n;if(s===void 0){let S=Oa(t,n);if(S===void 0){Z(`Invalid destination: ${t}`);return}if(r=S,S.newAmount!==void 0&&(u=S.newAmount,r=S.gen),a=Lr(i),a===void 0){Z(`Invalid source: ${i}`);return}}else r=s,A=!0,a={enum:de.noController,isCC:!1},d=!0;let l=Lr(e);if(l===void 0){Z(`Invalid control: ${e}`);return}let g;if(d)g=0;else{let S=o&15,M=o>>10&15;M===qe.linear&&S!==qe.linear&&(M=S);let y=o>>14&1,k=o>>15&1;r===I.initialAttenuation&&n<0&&(k=1),g=je(M,y,k,a.isCC,a.enum)}let h=o>>4&15,C=o>>8&1,p=o>>9&1,f=je(h,C,p,l.isCC,l.enum);if(A){let S=f;f=g,g=S}return new X({srcEnum:g,secSrcEnum:f,dest:r,transform:0,amt:u})}function Ki(i,e){let t=i.chunkData,o=[],n=[];T(t,4);let s=T(t,4);for(let r=0;r<s;r++){let a=T(t,2),A=T(t,2),d=T(t,2),u=T(t,2),g=(T(t,4)|0)>>16;if(a===0&&A===0&&u===0){let h;switch(d){case F.pan:h=new q(I.pan,g);break;case F.gain:h=new q(I.initialAttenuation,-g*10/.4);break;case F.filterCutoff:h=new q(I.initialFilterFc,g);break;case F.filterQ:h=new q(I.initialFilterQ,g);break;case F.modLfoFreq:h=new q(I.freqModLFO,g);break;case F.modLfoDelay:h=new q(I.delayModLFO,g);break;case F.vibLfoFreq:h=new q(I.freqVibLFO,g);break;case F.vibLfoDelay:h=new q(I.delayVibLFO,g);break;case F.volEnvDelay:h=new q(I.delayVolEnv,g);break;case F.volEnvAttack:h=new q(I.attackVolEnv,g);break;case F.volEnvHold:h=new q(I.holdVolEnv,g,!1);break;case F.volEnvDecay:h=new q(I.decayVolEnv,g,!1);break;case F.volEnvRelease:h=new q(I.releaseVolEnv,g);break;case F.volEnvSustain:let C=1e3-g;h=new q(I.sustainVolEnv,C);break;case F.modEnvDelay:h=new q(I.delayModEnv,g);break;case F.modEnvAttack:h=new q(I.attackModEnv,g);break;case F.modEnvHold:h=new q(I.holdModEnv,g,!1);break;case F.modEnvDecay:h=new q(I.decayModEnv,g,!1);break;case F.modEnvRelease:h=new q(I.releaseModEnv,g);break;case F.modEnvSustain:let p=1e3-g;h=new q(I.sustainModEnv,p);break;case F.reverbSend:h=new q(I.reverbEffectsSend,g);break;case F.chorusSend:h=new q(I.chorusEffectsSend,g);break;case F.pitch:let f=Math.floor(g/100),S=Math.floor(g-f*100);h=new q(I.fineTune,S),o.push(new q(I.coarseTune,f));break}h&&o.push(h)}else{let h=!0;if(A===O.none)if(a===O.modLfo&&d===F.pitch)o.push(new q(I.modLfoToPitch,g));else if(a===O.modLfo&&d===F.gain)o.push(new q(I.modLfoToVolume,g));else if(a===O.modLfo&&d===F.filterCutoff)o.push(new q(I.modLfoToFilterFc,g));else if(a===O.vibratoLfo&&d===F.pitch)o.push(new q(I.vibLfoToPitch,g));else if(a===O.modEnv&&d===F.pitch)o.push(new q(I.modEnvToPitch,g));else if(a===O.modEnv&&d===F.filterCutoff)o.push(new q(I.modEnvToFilterFc,g));else if(a===O.keyNum&&d===F.pitch)o.push(new q(I.scaleTuning,g/128));else if(a===O.keyNum&&d===F.volEnvHold){o.push(new q(I.keyNumToVolEnvHold,g/-128));let C=Math.round(60/128*g);o.forEach(p=>{p.generatorType===I.holdVolEnv&&(p.generatorValue+=C)})}else if(a===O.keyNum&&d===F.volEnvDecay){o.push(new q(I.keyNumToVolEnvDecay,g/-128));let C=Math.round(60/128*g);o.forEach(p=>{p.generatorType===I.decayVolEnv&&(p.generatorValue+=C)})}else if(a===O.keyNum&&d===F.modEnvHold){o.push(new q(I.keyNumToModEnvHold,g/-128));let C=Math.round(60/128*g);o.forEach(p=>{p.generatorType===I.holdModEnv&&(p.generatorValue+=C)})}else if(a===O.keyNum&&d===F.modEnvDecay){o.push(new q(I.keyNumToModEnvDecay,g/-128));let C=Math.round(60/128*g);o.forEach(p=>{p.generatorType===I.decayModEnv&&(p.generatorValue+=C)})}else h=!1;else h=!1;if(h===!1){let C=Gr(a,A,d,u,g);C?(n.push(C),x("%cSucceeded converting to SF2 Modulator!",B.recognized)):Z("Failed converting to SF2 Modulator!")}}}return e&&n.push(X.copy(hi),X.copy(Ii)),{modulators:n,generators:o}}function Tr(i,e,t){if(i)for(;i.chunkData.currentIndex<i.chunkData.length;){let o=Ae(i.chunkData);this.verifyHeader(o,"art1","art2");let n=Ki(o,!0);t.generators.push(...n.generators),t.modulators.push(...n.modulators)}if(e)for(;e.chunkData.currentIndex<e.chunkData.length;){let o=Ae(e.chunkData);this.verifyHeader(o,"art2","art1");let n=Ki(o,!1);t.generators.push(...n.generators),t.modulators.push(...n.modulators)}}var pi=class extends Te{constructor(e,t){super(),this.keyRange=e,this.velRange=t,this.isGlobal=!0}setWavesample(e,t,o,n,s,r,a){t!==0&&this.generators.push(new q(I.sampleModes,t)),this.generators.push(new q(I.initialAttenuation,e)),this.isGlobal=!1,a-=s.samplePitchCorrection;let A=Math.trunc(a/100);A!==0&&this.generators.push(new q(I.coarseTune,A));let d=a-A*100;if(d!==0&&this.generators.push(new q(I.fineTune,d)),t!==0){let u=o.start-s.sampleLoopStartIndex,l=o.end-s.sampleLoopEndIndex;if(u!==0){let g=u%32768;this.generators.push(new q(I.startloopAddrsOffset,g));let h=Math.trunc(u/32768);h!==0&&this.generators.push(new q(I.startloopAddrsCoarseOffset,h))}if(l!==0){let g=l%32768;this.generators.push(new q(I.endloopAddrsOffset,g));let h=Math.trunc(l/32768);h!==0&&this.generators.push(new q(I.endloopAddrsCoarseOffset,h))}}n!==s.samplePitch&&this.generators.push(new q(I.overridingRootKey,n)),this.generators.push(new q(I.sampleID,r)),this.sample=s,s.useCount++}};function Nr(i){let e=[];for(;i.chunkData.length>i.chunkData.currentIndex;)e.push(Ae(i.chunkData));let t=e.find(D=>D.header==="rgnh"),o=T(t.chunkData,2),n=T(t.chunkData,2),s=T(t.chunkData,2),r=T(t.chunkData,2),a=new pi({min:o,max:n},{min:s,max:r});T(t.chunkData,2);let A=T(t.chunkData,2);A!==0&&a.generators.push(new q(I.exclusiveClass,A));let d=Pe(e,"lart"),u=Pe(e,"lar2");this.readLart(d,u,a),a.isGlobal=!1;let l=e.find(D=>D.header==="wsmp");T(l.chunkData,4);let g=T(l.chunkData,2),h=Ct(l.chunkData[l.chunkData.currentIndex++],l.chunkData[l.chunkData.currentIndex++]),p=(T(l.chunkData,4)|0)/-655360;T(l.chunkData,4);let f=T(l.chunkData,4),S,M={start:0,end:0};if(f===0)S=0;else{T(l.chunkData,4),T(l.chunkData,4)===0?S=1:S=3,M.start=T(l.chunkData,4);let Y=T(l.chunkData,4);M.end=M.start+Y}let y=e.find(D=>D.header==="wlnk");if(y===void 0)return;T(y.chunkData,2),T(y.chunkData,2),T(y.chunkData,4);let k=T(y.chunkData,4),w=this.samples[k];if(w===void 0)throw new Error("Invalid sample ID!");let b=(p||w.sampleDbAttenuation)*10/.4;return a.setWavesample(b,S,M,g,w,k,h),a}var Ci=class extends Dt{sampleDbAttenuation;sampleData;constructor(e,t,o,n,s,r,a,A){super(e,t,o,n,0,1,s,r),this.sampleData=a,this.sampleDbAttenuation=A}getAudioData(){return this.sampleData}getRawData(){if(this.isCompressed){if(!this.compressedData)throw new Error("Compressed but no data?? This shouldn't happen!!");return this.compressedData}return super.getRawData()}};var Ur={PCM:1,ALAW:6};function Ja(i,e){let t=Math.pow(2,e*8-1),o=Math.pow(2,e*8),n,s=!1;e===1?(n=255,s=!0):n=t;let r=i.size/e,a=new Float32Array(r);for(let A=0;A<a.length;A++){let d=T(i.chunkData,e);s?a[A]=d/n-.5:(d>=t&&(d-=o),a[A]=d/n)}return a}function za(i,e){let t=i.size/e,o=new Float32Array(t);for(let n=0;n<o.length;n++){let s=T(i.chunkData,e),r=s^85;r&=127;let a=r>>4,A=r&15;a>0&&(A+=16),A=(A<<4)+8,a>1&&(A=A<<a-1);let d=s>127?A:-A;o[n]=d/32678}return o}function qr(i){fe("%cLoading Wave samples...",B.recognized);let e=0;for(;i.chunkData.currentIndex<i.chunkData.length;){let t=Ae(i.chunkData);this.verifyHeader(t,"LIST"),this.verifyText(ae(t.chunkData,4),"wave");let o=[];for(;t.chunkData.currentIndex<t.chunkData.length;)o.push(Ae(t.chunkData));let n=o.find(w=>w.header==="fmt ");if(!n)throw new Error("No fmt chunk in the wave file!");let s=T(n.chunkData,2),r=T(n.chunkData,2);if(r!==1)throw new Error(`Only mono samples are supported. Fmt reports ${r} channels`);let a=T(n.chunkData,4);T(n.chunkData,4),T(n.chunkData,2);let d=T(n.chunkData,2)/8,u=!1,l=o.find(w=>w.header==="data");l||this.parsingError("No data chunk in the WAVE chunk!");let g;switch(s){default:u=!0,g=new Float32Array(l.size/d);break;case Ur.PCM:g=Ja(l,d);break;case Ur.ALAW:g=za(l,d);break}let h=Pe(o,"INFO"),C=`Unnamed ${e}`;if(h){let w=Ae(h.chunkData);for(;w.header!=="INAM"&&h.chunkData.currentIndex<h.chunkData.length;)w=Ae(h.chunkData);w.header==="INAM"&&(C=ae(w.chunkData,w.size).trim())}let p=60,f=0,S=0,M=g.length-1,y=0,k=o.find(w=>w.header==="wsmp");if(k){T(k.chunkData,4),p=T(k.chunkData,2),f=Ct(k.chunkData[k.chunkData.currentIndex++],k.chunkData[k.chunkData.currentIndex++]);let w=Math.trunc(f/100);if(p+=w,f-=w*100,y=(T(k.chunkData,4)|0)/-655360,T(k.chunkData,4),T(k.chunkData,4)===1){T(k.chunkData,8),S=T(k.chunkData,4);let D=T(k.chunkData,4);M=S+D}}else Z("No wsmp chunk in wave... using sane defaults.");u&&console.error(`Failed to load '${C}': Unsupported format: (${s})`),this.samples.push(new Ci(C,a,p,f,S,M,g,y)),e++,x(`%cLoaded sample %c${C}`,B.info,B.recognized)}j()}var ut=class extends vt{constructor(e){super(),this.dataArray=new L(e),Re("%cParsing DLS...",B.info),this.dataArray||(j(),this.parsingError("No data provided!"));let t=Ae(this.dataArray,!1);this.verifyHeader(t,"riff"),this.verifyText(ae(this.dataArray,4).toLowerCase(),"dls ");let o=[];for(;this.dataArray.currentIndex<this.dataArray.length;)o.push(Ae(this.dataArray));this.soundFontInfo.ifil="2.1",this.soundFontInfo.isng="EMU8000",this.soundFontInfo.INAM="Unnamed DLS",this.soundFontInfo.IENG="Unknown",this.soundFontInfo.IPRD="SpessaSynth DLS",this.soundFontInfo.ICRD=new Date().toDateString();let n=Pe(o,"INFO");if(n)for(;n.chunkData.currentIndex<n.chunkData.length;){let A=Ae(n.chunkData);this.soundFontInfo[A.header]=ae(A.chunkData,A.size)}this.soundFontInfo.ICMT=this.soundFontInfo.ICMT||"(No description)",this.soundFontInfo.ISBJ&&(this.soundFontInfo.ICMT+=`
`+this.soundFontInfo.ISBJ,delete this.soundFontInfo.ISBJ),this.soundFontInfo.ICMT+=`
Converted from DLS to SF2 with SpessaSynth`;for(let[A,d]of Object.entries(this.soundFontInfo))x(`%c"${A}": %c"${d}"`,B.info,B.recognized);let s=o.find(A=>A.header==="colh");s||(j(),this.parsingError("No colh chunk!")),this.instrumentAmount=T(s.chunkData,4),x(`%cInstruments amount: %c${this.instrumentAmount}`,B.info,B.recognized);let r=Pe(o,"wvpl");r||(j(),this.parsingError("No wvpl chunk!")),this.readDLSSamples(r);let a=Pe(o,"lins");a||(j(),this.parsingError("No lins chunk!")),this.readDLSInstrumentList(a),this.presets.sort((A,d)=>A.program-d.program+(A.bank-d.bank)),x(`%cParsing finished! %c"${this.soundFontInfo.INAM||"UNNAMED"}"%c has %c${this.presets.length} %cpresets,
        %c${this.instruments.length}%c instruments and %c${this.samples.length}%c samples.`,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info),j()}verifyHeader(e,...t){for(let o of t)if(e.header.toLowerCase()===o.toLowerCase())return;j(),this.parsingError(`Invalid DLS chunk header! Expected "${t.toString()}" got "${e.header.toLowerCase()}"`)}verifyText(e,t){e.toLowerCase()!==t.toLowerCase()&&(j(),this.parsingError(`FourCC error: Expected "${t.toLowerCase()}" got "${e.toLowerCase()}"`))}parsingError(e){throw new Error(`DLS parse error: ${e} The file may be corrupted.`)}destroySoundfont(){super.destroySoundfont(),delete this.dataArray}};ut.prototype.readDLSInstrumentList=Fr;ut.prototype.readDLSInstrument=Rr;ut.prototype.readRegion=Nr;ut.prototype.readLart=Tr;ut.prototype.readDLSSamples=qr;var xt=xt!==void 0?xt:{},_r=!1,Hr;xt.isInitialized=new Promise(i=>Hr=i);var Va=function(i){var e,t,o,n,s,r,a,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="",u=0;i=i.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=A.indexOf(i.charAt(u++)),s=A.indexOf(i.charAt(u++)),r=A.indexOf(i.charAt(u++)),a=A.indexOf(i.charAt(u++)),e=n<<2|s>>4,t=(15&s)<<4|r>>2,o=(3&r)<<6|a,d+=String.fromCharCode(e),r!==64&&(d+=String.fromCharCode(t)),a!==64&&(d+=String.fromCharCode(o));while(u<i.length);return d};(function(){var i,e,t,o,n,s,r,a,A,d,u,l,g,h,C,p,f,S,M,y,k,w,c=c!==void 0?c:{};c.wasmBinary=Uint8Array.from(Va("AGFzbQEAAAABpQEYYAJ/fwF/YAF/AGAAAX9gBH9/f38AYAAAYAN/f38Bf2ABfwF/YAJ/fwBgBn9/f39/fwF/YAR/f39/AX9gBX9/f39/AX9gB39/f39/f38Bf2AGf39/f39/AGAIf39/f39/f38Bf2AFf39/f38AYAd/f39/f39/AGADf39/AGABfwF9YAF9AX1gAnx/AXxgAnx/AX9gA3x8fwF8YAJ8fAF8YAF8AXwCngIPA2VudgZtZW1vcnkCAIACA2VudgV0YWJsZQFwAQQEA2Vudgl0YWJsZUJhc2UDfwADZW52DkRZTkFNSUNUT1BfUFRSA38AA2VudghTVEFDS1RPUAN/AANlbnYJU1RBQ0tfTUFYA38ABmdsb2JhbAhJbmZpbml0eQN8AANlbnYFYWJvcnQAAQNlbnYNZW5sYXJnZU1lbW9yeQACA2Vudg5nZXRUb3RhbE1lbW9yeQACA2VudhdhYm9ydE9uQ2Fubm90R3Jvd01lbW9yeQACA2Vudg5fX19hc3NlcnRfZmFpbAADA2VudgtfX19zZXRFcnJObwABA2VudgZfYWJvcnQABANlbnYWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwAFA3d2BgYCAQcHAQIBAQcBCAcFAAkGCQoHBgYGBgEFBgIBBgYKAAgLAAYGBgYGBgYBAAoMDAMGBQANCAoJAAwODA8OAQAGBgcEABAJEAERAAADBQwAAAMHBxIGAQAABwIFEwMOBw8HBgYQFAoVExYXFxcXFgQFBQYFAAYkB38BIwELfwEjAgt/ASMDC38BQQALfwFBAAt8ASMEC38BQQALB9MCFRBfX2dyb3dXYXNtTWVtb3J5AAgRX19fZXJybm9fbG9jYXRpb24AYwVfZnJlZQBfB19tYWxsb2MAXgdfbWVtY3B5AHkHX21lbXNldAB6BV9zYnJrAHsXX3N0Yl92b3JiaXNfanNfY2hhbm5lbHMAJhRfc3RiX3ZvcmJpc19qc19jbG9zZQAlFV9zdGJfdm9yYmlzX2pzX2RlY29kZQAoE19zdGJfdm9yYmlzX2pzX29wZW4AJBpfc3RiX3ZvcmJpc19qc19zYW1wbGVfcmF0ZQAnC2R5bkNhbGxfaWlpAHwTZXN0YWJsaXNoU3RhY2tTcGFjZQAMC2dldFRlbXBSZXQwAA8LcnVuUG9zdFNldHMAeAtzZXRUZW1wUmV0MAAOCHNldFRocmV3AA0Kc3RhY2tBbGxvYwAJDHN0YWNrUmVzdG9yZQALCXN0YWNrU2F2ZQAKCQoBACMACwR9VFl9Csb2A3YGACAAQAALGwEBfyMGIQEjBiAAaiQGIwZBD2pBcHEkBiABCwQAIwYLBgAgACQGCwoAIAAkBiABJAcLEAAjCEUEQCAAJAggASQJCwsGACAAJAsLBAAjCwsRACAABEAgABARIAAgABASCwvvBwEKfyAAQYADaiEHIAcoAgAhBQJAIAUEQCAAQfwBaiEEIAQoAgAhASABQQBKBEAgAEHwAGohCANAIAUgAkEYbGpBEGohCSAJKAIAIQEgAQRAIAgoAgAhAyAFIAJBGGxqQQ1qIQogCi0AACEGIAZB/wFxIQYgAyAGQbAQbGpBBGohAyADKAIAIQMgA0EASgRAQQAhAwNAIAEgA0ECdGohASABKAIAIQEgACABEBIgA0EBaiEDIAgoAgAhASAKLQAAIQYgBkH/AXEhBiABIAZBsBBsakEEaiEBIAEoAgAhBiAJKAIAIQEgAyAGSA0ACwsgACABEBILIAUgAkEYbGpBFGohASABKAIAIQEgACABEBIgAkEBaiECIAQoAgAhASACIAFODQMgBygCACEFDAAACwALCwsgAEHwAGohAyADKAIAIQEgAQRAIABB7ABqIQUgBSgCACECIAJBAEoEQEEAIQIDQAJAIAEgAkGwEGxqQQhqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQRxqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQSBqIQQgBCgCACEEIAAgBBASIAEgAkGwEGxqQaQQaiEEIAQoAgAhBCAAIAQQEiABIAJBsBBsakGoEGohASABKAIAIQEgAUUhBCABQXxqIQFBACABIAQbIQEgACABEBIgAkEBaiECIAUoAgAhASACIAFODQAgAygCACEBDAELCyADKAIAIQELIAAgARASCyAAQfgBaiEBIAEoAgAhASAAIAEQEiAHKAIAIQEgACABEBIgAEGIA2ohAyADKAIAIQEgAQRAIABBhANqIQUgBSgCACECIAJBAEoEQEEAIQIDQCABIAJBKGxqQQRqIQEgASgCACEBIAAgARASIAJBAWohAiAFKAIAIQcgAygCACEBIAIgB0gNAAsLIAAgARASCyAAQQRqIQIgAigCACEBIAFBAEoEQEEAIQEDQCAAQZQGaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQZQHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiAAQdgHaiABQQJ0aiEDIAMoAgAhAyAAIAMQEiABQQFqIQEgAigCACEDIAEgA0ghAyABQRBJIQUgBSADcQ0ACwtBACEBA0AgAEGgCGogAUECdGohAiACKAIAIQIgACACEBIgAEGoCGogAUECdGohAiACKAIAIQIgACACEBIgAEGwCGogAUECdGohAiACKAIAIQIgACACEBIgAEG4CGogAUECdGohAiACKAIAIQIgACACEBIgAEHACGogAUECdGohAiACKAIAIQIgACACEBIgAUEBaiEBIAFBAkcNAAsLGwAgAEHEAGohACAAKAIAIQAgAEUEQCABEF8LC3wBAX8gAEHUB2ohASABQQA2AgAgAEGAC2ohASABQQA2AgAgAEH4CmohASABQQA2AgAgAEGcCGohASABQQA2AgAgAEHVCmohASABQQA6AAAgAEH8CmohASABQQA2AgAgAEHUC2ohASABQQA2AgAgAEHYC2ohACAAQQA2AgAL8AQBB38jBiELIwZBEGokBiALQQhqIQcgC0EEaiEKIAshCCAAQSRqIQYgBiwAACEGAn8gBgR/IABBgAtqIQYgBigCACEGIAZBf0oEQCAFQQA2AgAgACABIAIQFgwCCyAAQRRqIQYgBiABNgIAIAEgAmohAiAAQRxqIQkgCSACNgIAIABB2ABqIQIgAkEANgIAIABBABAXIQkgCUUEQCAFQQA2AgBBAAwCCyAAIAcgCCAKEBghCSAJBEAgBygCACECIAgoAgAhCSAKKAIAIQggACACIAkgCBAaIQogByAKNgIAIABBBGohAiACKAIAIQggCEEASgRAQQAhAgNAIABBlAZqIAJBAnRqIQcgBygCACEHIAcgCUECdGohByAAQdQGaiACQQJ0aiEMIAwgBzYCACACQQFqIQIgAiAISA0ACwsgAwRAIAMgCDYCAAsgBSAKNgIAIABB1AZqIQAgBCAANgIAIAYoAgAhACAAIAFrDAILAkACQAJAAkACQCACKAIAIgNBIGsOBAECAgACCyACQQA2AgAgAEHUAGohAiAAEBkhAwJAIANBf0cEQANAIAIoAgAhAyADDQIgABAZIQMgA0F/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ACECIABBmAhqIQYgBigCACEHIAUgA2shCSAJIAdqIQkgAiAJSSEJIAIgB0khDSACIAdrIQJBACACIA0bIQIgAiADaiECIAIgBUohByAFIAIgBxshAiAJBEAgASACNgIAIAYoAgAhACAAIAJqIQAgBiAANgIAQQEMBgsLCyAAQfQKaiECIAIoAgAhAiADIB9rIQYgBiACaiEGIABBmAhqIQIgAiAGNgIAIAhBATYCAAwBBSAAQZgIaiECIAYNAQsMAQsgBCADayEDIAIoAgAhBCADIARqIQMgAiADNgIACyATKAIAIQIgAgRAIABByABqIQIgAigCACECIABB0ABqIQAgACgCACEAIAIgAEcEQEHTE0HEE0HkGkHnFBAECwsgASAFNgIAQQELIQAgHCQGIAALqAIBBX8gAEHoCmohBSAFKAIAIQICQCACQQBIBEBBACEABSACIAFIBEAgAUEYSgRAIABBGBAsIQIgAUFoaiEBIAAgARAsIQAgAEEYdCEAIAAgAmohACAADwsgAkUEQCAAQeQKaiECIAJBADYCAAsgAEHkCmohAwJAAkACQANAIAAQLiECIAJBf0YNASAFKAIAIQQgAiAEdCECIAMoAgAhBiAGIAJqIQIgAyACNgIAIAUgBEEIaiICNgIAIAIgAUgNAAwCAAsACyAFQX82AgBBACEADAQLIARBeEgEQEEAIQAMBAsLCyAAQeQKaiEEIAQoAgAhA0EBIAF0IQAgAEF/aiEAIAMgAHEhACADIAF2IQMgBCADNgIAIAIgAWshASAFIAE2AgALCyAAC40CAAJAIABBAEgEf0EABSAAQYCAAUgEQCAAQRBIBEAgAEGACGohACAALAAAIQAMAwsgAEGABEgEQCAAQQV2IQAgAEGACGohACAALAAAIQAgAEEFaiEABSAAQQp2IQAgAEGACGohACAALAAAIQAgAEEKaiEACwwCCyAAQYCAgAhIBH8gAEGAgCBIBH8gAEEPdiEAIABBgAhqIQAgACwAACEAIABBD2oFIABBFHYhACAAQYAIaiEAIAAsAAAhACAAQRRqCwUgAEGAgICAAkgEfyAAQRl2IQAgAEGACGohACAALAAAIQAgAEEZagUgAEEediEAIABBgAhqIQAgACwAACEAIABBHmoLCwshAAsgAAuiAQEDfyAAQdQKaiECIAIsAAAhAQJAAkAgAQ0AIABB3ApqIQEgASgCACEBIAEEQEF/IQMFIAAQLyEBIAEEQCACLAAAIQEgAQ0CQaEUQcQTQfYLQbUUEAQFQX8hAwsLDAELIAFBf2pBGHRBGHUhASACIAE6AAAgAEHsCmohASABKAIAIQIgAkEBaiECIAEgAjYCACAAEDAhACAAQf8BcSEDCyADC6wCAQd/IABB3ApqIQIgAigCACEBAkAgAUUEQCAAQdgKaiEEIAQoAgAhASABQX9GBEAgAEHQCGohASABKAIAIQEgAUF/aiEBIABB4ApqIQMgAyABNgIAIAAQMSEBIAFFBEAgAkEBNgIADAMLIABB0wpqIQEgASwAACEBIAFBAXEhASABBH8gBCgCAAUgAEEgEBUMAwshAQsgAUEBaiEHIAQgBzYCACAAQdQIaiABaiEDIAMsAAAhBiAGQf8BcSEDIAZBf0cEQCACQQE2AgAgAEHgCmohAiACIAE2AgALIABB0AhqIQEgASgCACEBIAcgAU4EQCAEQX82AgALIABB1ApqIQAgACwAACEBIAEEQEHFFEHEE0HoC0HaFBAEBSAAIAY6AAAgAyEFCwsLIAULUQEDfyAAQRRqIQMgAygCACEBIABBHGohAiACKAIAIQIgASACSQR/IAFBAWohACADIAA2AgAgASwAAAUgAEHUAGohACAAQQE2AgBBAAshACAACyABAX8gABAyIQEgAQR/IAAQMwUgAEEeEBVBAAshACAAC2ABAX8gABAwIQEgAUH/AXFBzwBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQEgAUH/AXFB5wBGBEAgABAwIQAgAEH/AXFB0wBGIQAFQQAhAAsFQQAhAAsFQQAhAAsgAAvZAwEGfyAAEDAhAQJ/IAFB/wFxBH8gAEEfEBVBAAUgABAwIQEgAEHTCmohAiACIAE6AAAgABAjIQUgABAjIQIgABAjGiAAECMhASAAQcwIaiEDIAMgATYCACAAECMaIAAQMCEBIAFB/wFxIQEgAEHQCGohAyADIAE2AgAgAEHUCGohBCAAIAQgARAiIQEgAUUEQCAAQQoQFUEADAILIABB8ApqIQQgBEF+NgIAIAIgBXEhAQJAIAFBf0cEQCADKAIAIQEgAUEASgRAA0ACQCABQX9qIQIgAEHUCGogAmohBiAGLAAAIQYgBkF/Rw0AIAFBAUwNBCACIQEMAQsLIAQgAjYCACAAQfQKaiEBIAEgBTYCAAsLCyAAQdUKaiEBIAEsAAAhASABBEAgAygCACEDIANBAEoEf0EAIQJBACEBA0AgAEHUCGogAWohBCAELQAAIQQgBEH/AXEhBCACIARqIQIgAUEBaiEBIAEgA0gNAAsgAkEbagVBGwshASAAQShqIQIgAigCACECIAEgA2ohASABIAJqIQEgAEEsaiEDIAMgAjYCACAAQTBqIQIgAiABNgIAIABBNGohASABIAU2AgALIABB2ApqIQAgAEEANgIAQQELCyEAIAALowEBB38gAEHoCmohAyADKAIAIQECQCABQRlIBEAgAEHkCmohBCABRQRAIARBADYCAAsgAEHUCmohBSAAQdwKaiEGA0AgBigCACEBIAEEQCAFLAAAIQEgAUUNAwsgABAuIQIgAkF/Rg0CIAMoAgAhASACIAF0IQIgBCgCACEHIAcgAmohAiAEIAI2AgAgAUEIaiECIAMgAjYCACABQRFIDQALCwsLrQUBCX8gABA0IAFBIGohAiACKAIAIQUCQAJAIAVFIgNFDQAgAUGkEGohAiACKAIAIQIgAg0AQX8hAQwBCyABQQRqIQIgAigCACECAkACQCACQQhKBEAgAUGkEGohAyADKAIAIQMgAw0BBSADDQELDAELIABB5ApqIQggCCgCACEJIAkQOiEHIAFBrBBqIQIgAigCACECIAJBAUoEQCABQaQQaigCACEKQQAhAwNAIAJBAXYhBSAFIANqIQQgCiAEQQJ0aiEGIAYoAgAhBiAGIAdLIQYgAiAFayECIAMgBCAGGyEDIAUgAiAGGyECIAJBAUoNAAsFQQAhAwsgAUEXaiECIAIsAAAhAiACRQRAIAFBqBBqIQIgAigCACECIAIgA0ECdGohAiACKAIAIQMLIAFBCGohASABKAIAIQEgASADaiEBIAEtAAAhASABQf8BcSEBIABB6ApqIQIgAigCACEAIAAgAUgEf0EAIQBBfwUgACABayEAIAkgAXYhASAIIAE2AgAgAwshASACIAA2AgAMAQsgAUEXaiEDIAMsAAAhAyADBEBBgRVBxBNB6gxBjBUQBAsCQCACQQBKBEAgASgCCCEIIABB5ApqIQlBACEBA0ACQCAIIAFqIQMgAywAACEEIARB/wFxIQMgBEF/RwRAIAUgAUECdGoh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IwZBEGokBiACIQECfCAAvUIgiKdB/////wdxIgNB/MOk/wNJBHwgA0GewZryA0kEfEQAAAAAAADwPwUgAEQAAAAAAAAAABByCwUgACAAoSADQf//v/8HSw0BGgJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwgQcgwECyABKwMAIAErAwhBARBwmgwDCyABKwMAIAErAwgQcpoMAgsgASsDACABKwMIQQEQcAsLIQAgAiQGIAALywEBA38jBiECIwZBEGokBiACIQECQCAAvUIgiKdB/////wdxIgNB/MOk/wNJBEAgA0GAgMDyA08EQCAARAAAAAAAAAAAQQAQcCEACwUgA0H//7//B0sEQCAAIAChIQAMAgsCQAJAAkACQAJAIAAgARBuQQNxDgMAAQIDCyABKwMAIAErAwhBARBwIQAMBQsgASsDACABKwMIEHIhAAwECyABKwMAIAErAwhBARBwmiEADAMLIAErAwAgASsDCBBymiEACwsLIAIkBiAAC5sDAwJ/AX4CfCAAvSIDQj+IpyEBAnwCfwJAIANCIIinQf////8HcSICQarGmIQESwR8IANC////////////AINCgICAgICAgPj/AFYEQCAADwsgAETvOfr+Qi6GQGQEQCAARAAAAAAAAOB/og8FIABE0rx63SsjhsBjIABEUTAt1RBJh8BjcUUNAkQAAAAAAAAAACIADwsABSACQcLc2P4DSwRAIAJBscXC/wNLDQIgAUEBcyABawwDCyACQYCAwPEDSwR8QQAhASAABSAARAAAAAAAAPA/oA8LCwwCCyAARP6CK2VHFfc/oiABQQN0QYATaisDAKCqCyEBIAAgAbciBEQAAOD+Qi7mP6KhIgAgBER2PHk17znqPaIiBaELIQQgACAEIAQgBCAEoiIAIAAgACAAIABE0KS+cmk3Zj6iRPFr0sVBvbu+oKJELN4lr2pWET+gokSTvb4WbMFmv6CiRD5VVVVVVcU/oKKhIgCiRAAAAAAAAABAIAChoyAFoaBEAAAAAAAA8D+gIQAgAUUEQCAADwsgACABEGULnwMDAn8BfgV8IAC9IgNCIIinIQECfyADQgBTIgIgAUGAgMAASXIEfyADQv///////////wCDQgBRBEBEAAAAAAAA8L8gACAAoqMPCyACRQRAIABEAAAAAAAAUEOi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mgDjqR0AXmGRAAgb5gCFmWUAoBRfAI1AaACA2P8AJ3NNAAYGMQDKVhUAyahzAHviYABrjMAAQcMSC11A+yH5PwAAAAAtRHQ+AAAAgJhG+DwAAABgUcx4OwAAAICDG/A5AAAAQCAlejgAAACAIoLjNgAAAAAd82k1AAAAAAAA4D8AAAAAAADgvwAAAAAAAPA/AAAAAAAA+D8AQagTCwgG0M9D6/1MPgBBuxMLigZAA7jiP09nZ1MuL3N0Yl92b3JiaXMuYwBmLT5hbGxvYy5hbGxvY19idWZmZXJfbGVuZ3RoX2luX2J5dGVzID09IGYtPnRlbXBfb2Zmc2V0AHZvcmJpc19kZWNvZGVfaW5pdGlhbABmLT5ieXRlc19pbl9zZWcgPiAwAGdldDhfcGFja2V0X3JhdwBmLT5ieXRlc19pbl9zZWcgPT0gMABuZXh0X3NlZ21lbnQAdm9yYmlzX2RlY29kZV9wYWNrZXRfcmVzdAAhYy0+c3BhcnNlAGNvZGVib29rX2RlY29kZV9zY2FsYXJfcmF3ACFjLT5zcGFyc2UgfHwgeiA8IGMtPnNvcnRlZF9lbnRyaWVzAGNvZGVib29rX2RlY29kZV9kZWludGVybGVhdmVfcmVwZWF0AHogPCBjLT5zb3J0ZWRfZW50cmllcwBjb2RlYm9va19kZWNvZGVfc3RhcnQAKG4gJiAzKSA9PSAwAGltZGN0X3N0ZXAzX2l0ZXIwX2xvb3AAMABnZXRfd2luZG93AGYtPnRlbXBfb2Zmc2V0ID09IGYtPmFsbG9jLmFsbG9jX2J1ZmZlcl9sZW5ndGhfaW5fYnl0ZXMAc3RhcnRfZGVjb2RlcgB2b3JiaXNjLT5zb3J0ZWRfZW50cmllcyA9PSAwAGNvbXB1dGVfY29kZXdvcmRzAHogPj0gMCAmJiB6IDwgMzIAbGVuW2ldID49IDAgJiYgbGVuW2ldIDwgMzIAYXZhaWxhYmxlW3ldID09IDAAayA9PSBjLT5zb3J0ZWRfZW50cmllcwBjb21wdXRlX3NvcnRlZF9odWZmbWFuAGMtPnNvcnRlZF9jb2Rld29yZHNbeF0gPT0gY29kZQBsZW4gIT0gTk9fQ09ERQBpbmNsdWRlX2luX3NvcnQAcG93KChmbG9hdCkgcisxLCBkaW0pID4gZW50cmllcwBsb29rdXAxX3ZhbHVlcwAoaW50KSBmbG9vcihwb3coKGZsb2F0KSByLCBkaW0pKSA8PSBlbnRyaWVzAOoPBG5hbWUB4g9+AAVhYm9ydAENZW5sYXJnZU1lbW9yeQIOZ2V0VG90YWxNZW1vcnkDF2Fib3J0T25DYW5ub3RHcm93TWVtb3J5BA5fX19hc3NlcnRfZmFpbAULX19fc2V0RXJyTm8GBl9hYm9ydAcWX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZwgQX19ncm93V2FzbU1lbW9yeQkKc3RhY2tBbGxvYwoJc3RhY2tTYXZlCwxzdGFja1Jlc3RvcmUME2VzdGFibGlzaFN0YWNrU3BhY2UNCHNldFRocmV3DgtzZXRUZW1wUmV0MA8LZ2V0VGVtcFJldDAQEV9zdGJfdm9yYmlzX2Nsb3NlEQ5fdm9yYmlzX2RlaW5pdBILX3NldHVwX2ZyZWUTGl9zdGJfdm9yYmlzX2ZsdXNoX3B1c2hkYXRhFCFfc3RiX3ZvcmJpc19kZWNvZGVfZnJhbWVfcHVzaGRhdGEVBl9lcnJvchYgX3ZvcmJpc19zZWFyY2hfZm9yX3BhZ2VfcHVzaGRhdGEXGF9pc193aG9sZV9wYWNrZXRfcHJlc2VudBgVX3ZvcmJpc19kZWNvZGVfcGFja2V0GQxfZ2V0OF9wYWNrZXQaFF92b3JiaXNfZmluaXNoX2ZyYW1lGxlfc3RiX3ZvcmJpc19vcGVuX3B1c2hkYXRhHAxfdm9yYmlzX2luaXQdDl9zdGFydF9kZWNvZGVyHg1fdm9yYmlzX2FsbG9jHxtfc3RiX3ZvcmJpc19nZXRfZmlsZV9vZmZzZXQgE19tYXliZV9zdGFydF9wYWNrZXQhDV9mbHVzaF9wYWNrZXQiBV9nZXRuIwZfZ2V0MzIkE19zdGJfdm9yYmlzX2pzX29wZW4lFF9zdGJfdm9yYmlzX2pzX2Nsb3NlJhdfc3RiX3ZvcmJpc19qc19jaGFubmVscycaX3N0Yl92b3JiaXNfanNfc2FtcGxlX3JhdGUoFV9zdGJfdm9yYmlzX2pzX2RlY29kZSkNX2NyYzMyX3VwZGF0ZSoWX3ZvcmJpc19kZWNvZGVfaW5pdGlhbCsaX3ZvcmJpc19kZWNvZGVfcGFja2V0X3Jlc3QsCV9nZXRfYml0cy0FX2lsb2cuEF9nZXQ4X3BhY2tldF9yYXcvDV9uZXh0X3NlZ21lbnQwBV9nZXQ4MQtfc3RhcnRfcGFnZTIQX2NhcHR1cmVfcGF0dGVybjMdX3N0YXJ0X3BhZ2Vfbm9fY2FwdHVyZXBhdHRlcm40DV9wcmVwX2h1ZmZtYW41G19jb2RlYm9va19kZWNvZGVfc2NhbGFyX3JhdzYOX3ByZWRpY3RfcG9pbnQ3D19kZWNvZGVfcmVzaWR1ZTgJX2RvX2Zsb29yOQ1faW52ZXJzZV9tZGN0OgxfYml0X3JldmVyc2U7EV9tYWtlX2Jsb2NrX2FycmF5PBJfc2V0dXBfdGVtcF9tYWxsb2M9JF9jb2RlYm9va19kZWNvZGVfZGVpbnRlcmxlYXZlX3JlcGVhdD4PX3Jlc2lkdWVfZGVjb2RlPxVfY29kZWJvb2tfZGVjb2RlX3N0ZXBAEF9jb2RlYm9va19kZWNvZGVBFl9jb2RlYm9va19kZWNvZGVfc3RhcnRCCl9kcmF3X2xpbmVDF19pbWRjdF9zdGVwM19pdGVyMF9sb29wRBlfaW1kY3Rfc3RlcDNfaW5uZXJfcl9sb29wRRlfaW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wRh9faW1kY3Rfc3RlcDNfaW5uZXJfc19sb29wX2xkNjU0RwhfaXRlcl81NEgLX2dldF93aW5kb3dJEF92b3JiaXNfdmFsaWRhdGVKDV9zdGFydF9wYWNrZXRLBV9za2lwTAtfY3JjMzJfaW5pdE0NX3NldHVwX21hbGxvY04QX3NldHVwX3RlbXBfZnJlZU8SX2NvbXB1dGVfY29kZXdvcmRzUBdfY29tcHV0ZV9zb3J0ZWRfaHVmZm1hblEcX2NvbXB1dGVfYWNjZWxlcmF0ZWRfaHVmZm1hblIPX2Zsb2F0MzJfdW5wYWNrUw9fbG9va3VwMV92YWx1ZXNUDl9wb2ludF9jb21wYXJlVQpfbmVpZ2hib3JzVg9faW5pdF9ibG9ja3NpemVXCl9hZGRfZW50cnlYEF9pbmNsdWRlX2luX3NvcnRZD191aW50MzJfY29tcGFyZVoYX2NvbXB1dGVfdHdpZGRsZV9mYWN0b3JzWw9fY29tcHV0ZV93aW5kb3dcE19jb21wdXRlX2JpdHJldmVyc2VdB19zcXVhcmVeB19tYWxsb2NfBV9mcmVlYAhfcmVhbGxvY2ESX3RyeV9yZWFsbG9jX2NodW5rYg5fZGlzcG9zZV9jaHVua2MRX19fZXJybm9fbG9jYXRpb25kB19tZW1jbXBlB19zY2FsYm5mBl9xc29ydGcFX3NpZnRoBF9zaHJpCF90cmlua2xlagRfc2hsawVfcG50emwIX2FfY3R6X2xtBl9jeWNsZW4LX19fcmVtX3BpbzJvEV9fX3JlbV9waW8yX2xhcmdlcAZfX19zaW5xBl9sZGV4cHIGX19fY29zcwRfY29zdARfc2ludQRfZXhwdgRfbG9ndwRfcG93eAtydW5Qb3N0U2V0c3kHX21lbWNweXoHX21lbXNldHsFX3Nicmt8C2R5bkNhbGxfaWlpfQJiMA=="),function(m){return m.charCodeAt(0)});var c=c!==void 0?c:{},b={};for(i in c)c.hasOwnProperty(i)&&(b[i]=c[i]);c.arguments=[],c.thisProgram="./this.program",c.quit=function(m,E){throw E},c.preRun=[],c.postRun=[];var D=!1,Y=!1,K=!1,U=!1;D=typeof window=="object",Y=typeof importScripts=="function",K=typeof process=="object"&&typeof bn=="function"&&!D&&!Y,U=!D&&!K&&!Y;var J="";function ee(m){return c.locateFile?c.locateFile(m,J):J+m}K?(J=__dirname+"/",c.read=function(E,Q){var v;return e||(e=void 0),t||(t=void 0),E=t.normalize(E),v=e.readFileSync(E),Q?v:v.toString()},c.readBinary=function(E){var Q=c.read(E,!0);return Q.buffer||(Q=new Uint8Array(Q)),pt(Q.buffer),Q},process.argv.length>1&&(c.thisProgram=process.argv[1].replace(/\\/g,"/")),c.arguments=process.argv.slice(2),typeof module<"u",process.on("uncaughtException",function(m){if(!(m instanceof no))throw m}),process.on("unhandledRejection",function(m,E){process.exit(1)}),c.quit=function(m){process.exit(m)},c.inspect=function(){return"[Emscripten Module object]"}):U?(typeof read<"u"&&(c.read=function(E){return read(E)}),c.readBinary=function(E){var Q;return typeof readbuffer=="function"?new Uint8Array(readbuffer(E)):(pt(typeof(Q=read(E,"binary"))=="object"),Q)},typeof scriptArgs<"u"?c.arguments=scriptArgs:typeof arguments<"u"&&(c.arguments=arguments),typeof quit=="function"&&(c.quit=function(m){quit(m)})):(D||Y)&&(D?document.currentScript&&(J=document.currentScript.src):J=self.location.href,J=J.indexOf("blob:")!==0?J.split("/").slice(0,-1).join("/")+"/":"",c.read=function(E){var Q=new XMLHttpRequest;return Q.open("GET",E,!1),Q.send(null),Q.responseText},Y&&(c.readBinary=function(E){var Q=new XMLHttpRequest;return Q.open("GET",E,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),c.readAsync=function(E,Q,v){var P=new XMLHttpRequest;P.open("GET",E,!0),P.responseType="arraybuffer",P.onload=function(){if(P.status==200||P.status==0&&P.response){Q(P.response);return}v()},P.onerror=v,P.send(null)},c.setWindowTitle=function(m){document.title=m});var N=c.print||(typeof console<"u"?console.log.bind(console):typeof print<"u"?print:null),H=c.printErr||(typeof printErr<"u"?printErr:typeof console<"u"&&console.warn.bind(console)||N);for(i in b)b.hasOwnProperty(i)&&(c[i]=b[i]);function ne(m){var E=h;return h=h+m+15&-16,E}function we(m){var E=A[y>>2],Q=E+m+15&-16;return A[y>>2]=Q,Q>=be&&!Cn()?(A[y>>2]=E,0):E}function Ce(m,E){return E||(E=16),m=Math.ceil(m/E)*E}function nt(m){switch(m){case"i1":case"i8":return 1;case"i16":return 2;case"i32":case"float":return 4;case"i64":case"double":return 8;default:if(m[m.length-1]==="*")return 4;if(m[0]!=="i")return 0;var E=parseInt(m.substr(1));return pt(E%8==0),E/8}}function Ne(m){Ne.shown||(Ne.shown={}),Ne.shown[m]||(Ne.shown[m]=1,H(m))}b=void 0;var st={"f64-rem":function(m,E){return m%E},debugger:function(){}},eo=[];function an(m,E){for(var Q=0,v=Q;v<Q+0;v++)if(!eo[v])return eo[v]=m,1+v;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."}function ln(m){eo[m-1]=null}var to={};function Al(m,E){if(m){pt(E),to[E]||(to[E]={});var Q=to[E];return Q[m]||(E.length===1?Q[m]=function(){return yi(E,m)}:E.length===2?Q[m]=function(P){return yi(E,m,[P])}:Q[m]=function(){return yi(E,m,Array.prototype.slice.call(arguments))}),Q[m]}}function rl(m,E,Q){return Q?+(m>>>0)+4294967296*+(E>>>0):+(m>>>0)+4294967296*+(0|E)}function yi(m,E,Q){return Q&&Q.length?c["dynCall_"+m].apply(null,[E].concat(Q)):c["dynCall_"+m].call(null,E)}var bo=0,cn=0;function pt(m,E){m||dt("Assertion failed: "+E)}function gn(m){var E=c["_"+m];return pt(E,"Cannot call unknown function "+m+", make sure it is exported"),E}var dn={stackSave:function(){Mi()},stackRestore:function(){xi()},arrayToC:function(m){var E,Q,v=Lo(m.length);return E=m,Q=v,n.set(E,Q),v},stringToC:function(m){var E=0;if(m!=null&&m!==0){var Q=(m.length<<2)+1;E=Lo(Q),un(m,E,Q)}return E}},ea={string:dn.stringToC,array:dn.arrayToC};function hn(m,E,Q,v,P){var oe=gn(m),se=[],V=0;if(v)for(var ve=0;ve<v.length;ve++){var me=ea[Q[ve]];me?(V===0&&(V=Mi()),se[ve]=me(v[ve])):se[ve]=v[ve]}var pe,he=oe.apply(null,se);return he=(pe=he,E==="string"?vo(pe):E==="boolean"?!!pe:pe),V!==0&&xi(V),he}function ta(m,E,Q,v){switch((Q=Q||"i8").charAt(Q.length-1)==="*"&&(Q="i32"),Q){case"i1":case"i8":n[m>>0]=E;break;case"i16":r[m>>1]=E;break;case"i32":A[m>>2]=E;break;case"i64":tempI64=[E>>>0,+Aa(tempDouble=E)>=1?tempDouble>0?(0|aa(+yn(tempDouble/4294967296),4294967295))>>>0:~~+ra((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0],A[m>>2]=tempI64[0],A[m+4>>2]=tempI64[1];break;case"float":u[m>>2]=E;break;case"double":l[m>>3]=E;break;default:dt("invalid type for setValue: "+Q)}}function al(m,E,Q){switch((E=E||"i8").charAt(E.length-1)==="*"&&(E="i32"),E){case"i1":case"i8":return n[m>>0];case"i16":return r[m>>1];case"i32":case"i64":return A[m>>2];case"float":return u[m>>2];case"double":return l[m>>3];default:dt("invalid type for getValue: "+E)}return null}function ll(m,E,Q,v){typeof m=="number"?(oe=!0,se=m):(oe=!1,se=m.length);var P=typeof E=="string"?E:null;if(V=Q==4?v:[typeof Ro=="function"?Ro:ne,Lo,ne,we][Q===void 0?2:Q](Math.max(se,P?1:E.length)),oe){for(v=V,pt((3&V)==0),ve=V+(-4&se);v<ve;v+=4)A[v>>2]=0;for(ve=V+se;v<ve;)n[v++>>0]=0;return V}if(P==="i8")return m.subarray||m.slice?s.set(m,V):s.set(new Uint8Array(m),V),V;for(var oe,se,V,ve,me,pe,he,te=0;te<se;){var Ue=m[te];if((me=P||E[te])===0){te++;continue}me=="i64"&&(me="i32"),ta(V+te,Ue,me),he!==me&&(pe=nt(me),he=me),te+=pe}return V}function cl(m){return C?bi?Ro(m):we(m):ne(m)}function vo(m,E){if(E===0||!m)return"";for(var Q,v,P,oe=0,se=0;oe|=v=s[m+se>>0],(v!=0||E)&&(se++,!E||se!=E););E||(E=se);var V="";if(oe<128){for(;E>0;)P=String.fromCharCode.apply(String,s.subarray(m,m+Math.min(E,1024))),V=V?V+P:P,m+=1024,E-=1024;return V}return Q=m,function(me,pe){for(var he=pe;me[he];)++he;if(he-pe>16&&me.subarray&&In)return In.decode(me.subarray(pe,he));for(var te,Ue,Ve,Ke,We,Rt,Ze="";;){if(!(te=me[pe++]))return Ze;if(!(128&te)){Ze+=String.fromCharCode(te);continue}if(Ue=63&me[pe++],(224&te)==192){Ze+=String.fromCharCode((31&te)<<6|Ue);continue}if(Ve=63&me[pe++],(240&te)==224?te=(15&te)<<12|Ue<<6|Ve:(Ke=63&me[pe++],(248&te)==240?te=(7&te)<<18|Ue<<12|Ve<<6|Ke:(We=63&me[pe++],te=(252&te)==248?(3&te)<<24|Ue<<18|Ve<<12|Ke<<6|We:(1&te)<<30|Ue<<24|Ve<<18|Ke<<12|We<<6|(Rt=63&me[pe++]))),te<65536)Ze+=String.fromCharCode(te);else{var so=te-65536;Ze+=String.fromCharCode(55296|so>>10,56320|1023&so)}}}(s,Q)}function gl(m){for(var E="";;){var Q=n[m++>>0];if(!Q)return E;E+=String.fromCharCode(Q)}}function dl(m,E){return function(v,P,oe){for(var se=0;se<v.length;++se)n[P++>>0]=v.charCodeAt(se);oe||(n[P>>0]=0)}(m,E,!1)}var In=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function xo(m,E,Q,v){if(!(v>0))return 0;for(var P=Q,oe=Q+v-1,se=0;se<m.length;++se){var V=m.charCodeAt(se);if(V>=55296&&V<=57343&&(V=65536+((1023&V)<<10)|1023&m.charCodeAt(++se)),V<=127){if(Q>=oe)break;E[Q++]=V}else if(V<=2047){if(Q+1>=oe)break;E[Q++]=192|V>>6,E[Q++]=128|63&V}else if(V<=65535){if(Q+2>=oe)break;E[Q++]=224|V>>12,E[Q++]=128|V>>6&63,E[Q++]=128|63&V}else if(V<=2097151){if(Q+3>=oe)break;E[Q++]=240|V>>18,E[Q++]=128|V>>12&63,E[Q++]=128|V>>6&63,E[Q++]=128|63&V}else if(V<=67108863){if(Q+4>=oe)break;E[Q++]=248|V>>24,E[Q++]=128|V>>18&63,E[Q++]=128|V>>12&63,E[Q++]=128|V>>6&63,E[Q++]=128|63&V}else{if(Q+5>=oe)break;E[Q++]=252|V>>30,E[Q++]=128|V>>24&63,E[Q++]=128|V>>18&63,E[Q++]=128|V>>12&63,E[Q++]=128|V>>6&63,E[Q++]=128|63&V}}return E[Q]=0,Q-P}function un(m,E,Q){return xo(m,s,E,Q)}function Mo(m){for(var E=0,Q=0;Q<m.length;++Q){var v=m.charCodeAt(Q);v>=55296&&v<=57343&&(v=65536+((1023&v)<<10)|1023&m.charCodeAt(++Q)),v<=127?++E:v<=2047?E+=2:v<=65535?E+=3:v<=2097151?E+=4:v<=67108863?E+=5:E+=6}return E}var mn=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function hl(m){for(var E=m,Q=E>>1;r[Q];)++Q;if((E=Q<<1)-m>32&&mn)return mn.decode(s.subarray(m,E));for(var v=0,P="";;){var oe=r[m+2*v>>1];if(oe==0)return P;++v,P+=String.fromCharCode(oe)}}function Il(m,E,Q){if(Q===void 0&&(Q=2147483647),Q<2)return 0;for(var v=E,P=(Q-=2)<2*m.length?Q/2:m.length,oe=0;oe<P;++oe){var se=m.charCodeAt(oe);r[E>>1]=se,E+=2}return r[E>>1]=0,E-v}function ul(m){return 2*m.length}function ml(m){for(var E=0,Q="";;){var v=A[m+4*E>>2];if(v==0)return Q;if(++E,v>=65536){var P=v-65536;Q+=String.fromCharCode(55296|P>>10,56320|1023&P)}else Q+=String.fromCharCode(v)}}function pl(m,E,Q){if(Q===void 0&&(Q=2147483647),Q<4)return 0;for(var v=E,P=v+Q-4,oe=0;oe<m.length;++oe){var se=m.charCodeAt(oe);if(se>=55296&&se<=57343&&(se=65536+((1023&se)<<10)|1023&m.charCodeAt(++oe)),A[E>>2]=se,(E+=4)+4>P)break}return A[E>>2]=0,E-v}function Cl(m){for(var E=0,Q=0;Q<m.length;++Q){var v=m.charCodeAt(Q);v>=55296&&v<=57343&&++Q,E+=4}return E}function El(m){var E=Mo(m)+1,Q=Ro(E);return Q&&xo(m,n,Q,E),Q}function Bl(m){var E=Mo(m)+1,Q=Lo(E);return xo(m,n,Q,E),Q}function fl(m){return m}function Ql(){var m,E=function(){var v=Error();if(!v.stack){try{throw Error(0)}catch(P){v=P}if(!v.stack)return"(no stack trace available)"}return v.stack.toString()}();return c.extraStackTrace&&(E+=`
`+c.extraStackTrace()),(m=E).replace(/__Z[\w\d_]+/g,function(Q){var v,P=v=Q;return Q===P?Q:Q+" ["+P+"]"})}function Si(m,E){return m%E>0&&(m+=E-m%E),m}function pn(m){c.buffer=o=m}function wi(){c.HEAP8=n=new Int8Array(o),c.HEAP16=r=new Int16Array(o),c.HEAP32=A=new Int32Array(o),c.HEAPU8=s=new Uint8Array(o),c.HEAPU16=a=new Uint16Array(o),c.HEAPU32=d=new Uint32Array(o),c.HEAPF32=u=new Float32Array(o),c.HEAPF64=l=new Float64Array(o)}function Cn(){var m=c.usingWasm?65536:16777216,E=2147483648-m;if(A[y>>2]>E)return!1;var Q=be;for(be=Math.max(be,16777216);be<A[y>>2];)be=be<=536870912?Si(2*be,m):Math.min(Si((3*be+2147483648)/4,m),E);var v=c.reallocBuffer(be);return v&&v.byteLength==be?(pn(v),wi(),!0):(be=Q,!1)}g=h=p=f=S=M=y=0,C=!1,c.reallocBuffer||(c.reallocBuffer=function(m){try{if(ArrayBuffer.transfer)E=ArrayBuffer.transfer(o,m);else{var E,Q=n;E=new ArrayBuffer(m),new Int8Array(E).set(Q)}}catch{return!1}return!!la(E)&&E});try{(k=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get))(new ArrayBuffer(4))}catch{k=function(E){return E.byteLength}}var Di=c.TOTAL_STACK||5242880,be=c.TOTAL_MEMORY||16777216;function oa(){return be}function oo(m){for(;m.length>0;){var E=m.shift();if(typeof E=="function"){E();continue}var Q=E.func;typeof Q=="number"?E.arg===void 0?c.dynCall_v(Q):c.dynCall_vi(Q,E.arg):Q(E.arg===void 0?null:E.arg)}}be<Di&&H("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+be+"! (TOTAL_STACK="+Di+")"),c.buffer?o=c.buffer:(typeof WebAssembly=="object"&&typeof WebAssembly.Memory=="function"?(c.wasmMemory=new WebAssembly.Memory({initial:be/65536}),o=c.wasmMemory.buffer):o=new ArrayBuffer(be),c.buffer=o),wi();var En=[],ki=[],Bn=[],fn=[],Qn=[],bi=!1,ia=!1;function na(m){En.unshift(m)}function yl(m){ki.unshift(m)}function Sl(m){Bn.unshift(m)}function wl(m){fn.unshift(m)}function sa(m){Qn.unshift(m)}function Dl(m,E,Q){var v,P;Ne("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!"),Q&&(v=n[P=E+Mo(m)]),un(m,E,1/0),Q&&(n[P]=v)}function kl(m,E,Q){return m>=0?m:E<=32?2*Math.abs(1<<E-1)+m:Math.pow(2,E)+m}function bl(m,E,Q){if(m<=0)return m;var v=E<=32?Math.abs(1<<E-1):Math.pow(2,E-1);return m>=v&&(E<=32||m>v)&&(m=-2*v+m),m}var Aa=Math.abs,ra=Math.ceil,yn=Math.floor,aa=Math.min,Ft=0,vi=null,io=null;function vl(m){return m}c.preloadedImages={},c.preloadedAudios={};var Sn="data:application/octet-stream;base64,";function Fo(m){return String.prototype.startsWith?m.startsWith(Sn):m.indexOf(Sn)===0}(function(){var E="main.wast",Q="main.wasm",v="main.temp.asm.js";Fo(E)||(E=ee(E)),Fo(Q)||(Q=ee(Q)),Fo(v)||(v=ee(v));var P={global:null,env:null,asm2wasm:st,parent:c},oe=null;function se(he){return he}function V(){try{if(c.wasmBinary)return new Uint8Array(c.wasmBinary);if(c.readBinary)return c.readBinary(Q);throw"both async and sync fetching of the wasm failed"}catch(he){dt(he)}}c.asmPreload=c.asm;var ve=c.reallocBuffer,me=function(he){he=Si(he,c.usingWasm?65536:16777216);var te=c.buffer.byteLength;if(c.usingWasm)try{var Ue=c.wasmMemory.grow((he-te)/65536);return Ue!==-1?c.buffer=c.wasmMemory.buffer:null}catch{return null}};c.reallocBuffer=function(he){return pe==="asmjs"?ve(he):me(he)};var pe="";c.asm=function(he,te,Ue){var Ve;if(!(te=Ve=te).table){var Ke,We=c.wasmTableSize;We===void 0&&(We=1024);var Rt=c.wasmMaxTableSize;typeof WebAssembly=="object"&&typeof WebAssembly.Table=="function"?Rt!==void 0?te.table=new WebAssembly.Table({initial:We,maximum:Rt,element:"anyfunc"}):te.table=new WebAssembly.Table({initial:We,element:"anyfunc"}):te.table=Array(We),c.wasmTable=te.table}return te.memoryBase||(te.memoryBase=c.STATIC_BASE),te.tableBase||(te.tableBase=0),Ke=function(so,Vt,Ri){if(typeof WebAssembly!="object")return H("no native wasm support detected"),!1;if(!(c.wasmMemory instanceof WebAssembly.Memory))return H("no native wasm Memory in use"),!1;function Go(At,rt){if((oe=At.exports).memory){var Ao,Li,kn;Ao=oe.memory,Li=c.buffer,Ao.byteLength<Li.byteLength&&H("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here"),kn=new Int8Array(Li),new Int8Array(Ao).set(kn),pn(Ao),wi()}c.asm=oe,c.usingWasm=!0,function(Tl){if(Ft--,c.monitorRunDependencies&&c.monitorRunDependencies(Ft),Ft==0&&(vi!==null&&(clearInterval(vi),vi=null),io)){var ca=io;io=null,ca()}}("wasm-instantiate")}if(Vt.memory=c.wasmMemory,P.global={NaN:NaN,Infinity:1/0},P["global.Math"]=Math,P.env=Vt,Ft++,c.monitorRunDependencies&&c.monitorRunDependencies(Ft),c.instantiateWasm)try{return c.instantiateWasm(P,Go)}catch(At){return H("Module.instantiateWasm callback failed with error: "+At),!1}function Kt(At){Go(At.instance,At.module)}function Dn(At){(!c.wasmBinary&&(D||Y)&&typeof fetch=="function"?fetch(Q,{credentials:"same-origin"}).then(function(rt){if(!rt.ok)throw"failed to load wasm binary file at '"+Q+"'";return rt.arrayBuffer()}).catch(function(){return V()}):new Promise(function(rt,Ao){rt(V())})).then(function(rt){return WebAssembly.instantiate(rt,P)}).then(At).catch(function(rt){H("failed to asynchronously prepare wasm: "+rt),dt(rt)})}return c.wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||Fo(Q)||typeof fetch!="function"?Dn(Kt):WebAssembly.instantiateStreaming(fetch(Q,{credentials:"same-origin"}),P).then(Kt).catch(function(At){H("wasm streaming compile failed: "+At),H("falling back to ArrayBuffer instantiation"),Dn(Kt)}),{}}(he,te,Ue),pt(Ke,"no binaryen method succeeded."),Ke},c.asm})(),h=(g=1024)+4816,ki.push(),c.STATIC_BASE=g,c.STATIC_BUMP=4816;var Ye=h;function xl(m){n[Ye]=n[m],n[Ye+1]=n[m+1],n[Ye+2]=n[m+2],n[Ye+3]=n[m+3]}function Ml(m){n[Ye]=n[m],n[Ye+1]=n[m+1],n[Ye+2]=n[m+2],n[Ye+3]=n[m+3],n[Ye+4]=n[m+4],n[Ye+5]=n[m+5],n[Ye+6]=n[m+6],n[Ye+7]=n[m+7]}function Fl(m,E,Q){var v=Q>0?Q:Mo(m)+1,P=Array(v),oe=xo(m,P,0,P.length);return E&&(P.length=oe),P}function Rl(m){for(var E=[],Q=0;Q<m.length;Q++){var v=m[Q];v>255&&(v&=255),E.push(String.fromCharCode(v))}return E.join("")}h+=16,y=ne(4),S=(p=f=Ce(h))+Di,M=Ce(S),A[y>>2]=M,C=!0,c.wasmTableSize=4,c.wasmMaxTableSize=4,c.asmGlobalArg={},c.asmLibraryArg={abort:dt,assert:pt,enlargeMemory:Cn,getTotalMemory:oa,abortOnCannotGrowMemory:function(){dt("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+be+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_iii:function(E,Q,v){var P=Mi();try{return c.dynCall_iii(E,Q,v)}catch(oe){if(xi(P),typeof oe!="number"&&oe!=="longjmp")throw oe;c.setThrew(1,0)}},___assert_fail:function(E,Q,v,P){dt("Assertion failed: "+vo(E)+", at: "+[Q?vo(Q):"unknown filename",v,P?vo(P):"unknown function"])},___setErrNo:function(E){return c.___errno_location&&(A[c.___errno_location()>>2]=E),E},_abort:function(){c.abort()},_emscripten_memcpy_big:function(E,Q,v){return s.set(s.subarray(Q,Q+v),E),E},_llvm_floor_f64:yn,DYNAMICTOP_PTR:y,tempDoublePtr:Ye,ABORT:bo,STACKTOP:f,STACK_MAX:S};var wn=c.asm(c.asmGlobalArg,c.asmLibraryArg,o);c.asm=wn,c.___errno_location=function(){return c.asm.___errno_location.apply(null,arguments)};var la=c._emscripten_replace_memory=function(){return c.asm._emscripten_replace_memory.apply(null,arguments)};c._free=function(){return c.asm._free.apply(null,arguments)};var Ro=c._malloc=function(){return c.asm._malloc.apply(null,arguments)};c._memcpy=function(){return c.asm._memcpy.apply(null,arguments)},c._memset=function(){return c.asm._memset.apply(null,arguments)},c._sbrk=function(){return c.asm._sbrk.apply(null,arguments)},c._stb_vorbis_js_channels=function(){return c.asm._stb_vorbis_js_channels.apply(null,arguments)},c._stb_vorbis_js_close=function(){return c.asm._stb_vorbis_js_close.apply(null,arguments)},c._stb_vorbis_js_decode=function(){return c.asm._stb_vorbis_js_decode.apply(null,arguments)},c._stb_vorbis_js_open=function(){return c.asm._stb_vorbis_js_open.apply(null,arguments)},c._stb_vorbis_js_sample_rate=function(){return c.asm._stb_vorbis_js_sample_rate.apply(null,arguments)},c.establishStackSpace=function(){return c.asm.establishStackSpace.apply(null,arguments)},c.getTempRet0=function(){return c.asm.getTempRet0.apply(null,arguments)},c.runPostSets=function(){return c.asm.runPostSets.apply(null,arguments)},c.setTempRet0=function(){return c.asm.setTempRet0.apply(null,arguments)},c.setThrew=function(){return c.asm.setThrew.apply(null,arguments)};var Lo=c.stackAlloc=function(){return c.asm.stackAlloc.apply(null,arguments)},xi=c.stackRestore=function(){return c.asm.stackRestore.apply(null,arguments)},Mi=c.stackSave=function(){return c.asm.stackSave.apply(null,arguments)};function no(m){this.name="ExitStatus",this.message="Program terminated with exit("+m+")",this.status=m}function Fi(m){m=m||c.arguments,!(Ft>0)&&(function(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)na(c.preRun.shift());oo(En)}(),!(Ft>0)&&(c.calledRun||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),E()},1)):E())));function E(){!c.calledRun&&(c.calledRun=!0,bo||(bi||(bi=!0,oo(ki)),oo(Bn),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)sa(c.postRun.shift());oo(Qn)}()))}}function Ll(m,E){(!E||!c.noExitRuntime||m!==0)&&(c.noExitRuntime||(bo=!0,cn=m,f=w,oo(fn),ia=!0,c.onExit&&c.onExit(m)),c.quit(m,new no(m)))}function dt(m){throw c.onAbort&&c.onAbort(m),m!==void 0?(N(m),H(m),m=JSON.stringify(m)):m="",bo=!0,cn=1,"abort("+m+"). Build with -s ASSERTIONS=1 for more info."}if(c.dynCall_iii=function(){return c.asm.dynCall_iii.apply(null,arguments)},c.asm=wn,c.ccall=hn,c.cwrap=function(E,Q,v,P){var oe=(v=v||[]).every(function(se){return se==="number"});return Q!=="string"&&oe&&!P?gn(E):function(){return hn(E,Q,v,arguments,P)}},no.prototype=Error(),no.prototype.constructor=no,io=function m(){c.calledRun||Fi(),c.calledRun||(io=m)},c.run=Fi,c.abort=dt,c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();c.noExitRuntime=!0,Fi(),c.onRuntimeInitialized=()=>{_r=!0,Hr()},xt.decode=function(m){return function(Q){if(!_r)throw Error("Not initialized");var v={};function P(Vt){return new Int32Array(c.HEAPU8.buffer,Vt,1)[0]}function oe(Vt,Ri){var Go=new ArrayBuffer(Ri*Float32Array.BYTES_PER_ELEMENT),Kt=new Float32Array(Go);return Kt.set(new Float32Array(c.HEAPU8.buffer,Vt,Ri)),Kt}v.open=c.cwrap("stb_vorbis_js_open","number",[]),v.close=c.cwrap("stb_vorbis_js_close","void",["number"]),v.channels=c.cwrap("stb_vorbis_js_channels","number",["number"]),v.sampleRate=c.cwrap("stb_vorbis_js_sample_rate","number",["number"]),v.decode=c.cwrap("stb_vorbis_js_decode","number",["number","number","number","number","number"]);var se,V,ve,me,pe=v.open(),he=(se=Q,V=Q.byteLength,ve=c._malloc(V),(me=new Uint8Array(c.HEAPU8.buffer,ve,V)).set(new Uint8Array(se,0,V)),me),te=c._malloc(4),Ue=c._malloc(4),Ve=v.decode(pe,he.byteOffset,he.byteLength,te,Ue);if(c._free(he.byteOffset),Ve<0)throw v.close(pe),c._free(te),Error("stbvorbis decode failed: "+Ve);for(var Ke=v.channels(pe),We=Array(Ke),Rt=new Int32Array(c.HEAPU32.buffer,P(te),Ke),Ze=0;Ze<Ke;Ze++)We[Ze]=oe(Rt[Ze],Ve),c._free(Rt[Ze]);var so=v.sampleRate(pe);return v.close(pe),c._free(P(te)),c._free(te),{data:We,sampleRate:so,eof:!0,error:null}}(m)}})();var Wi=class extends Dt{constructor(e,t,o,n,s,r,a,A,d,u,l,g,h){super(e,r,a,A,d,u,n-t/2,s-t/2),this.sampleName=e,this.sampleStartIndex=t,this.sampleEndIndex=o,this.isSampleLoaded=!1,this.sampleID=g,this.sampleLength=this.sampleEndIndex-this.sampleStartIndex,this.sampleDataArray=l,this.sampleData=new Float32Array(0),this.isCompressed&&(this.sampleLoopStartIndex+=this.sampleStartIndex/2,this.sampleLoopEndIndex+=this.sampleStartIndex/2,this.sampleLength=99999999),this.isDataRaw=h}getRawData(){let e=this.sampleDataArray;if(this.isCompressed){if(this.compressedData)return this.compressedData;let t=e.currentIndex;return e.slice(this.sampleStartIndex/2+t,this.sampleEndIndex/2+t)}else{this.isDataRaw||super.getRawData();let t=e.currentIndex;return e.slice(t+this.sampleStartIndex,t+this.sampleEndIndex)}}decodeVorbis(){if(this.sampleLength<1)return;let e=this.sampleDataArray,t=e.currentIndex,o=e.slice(this.sampleStartIndex/2+t,this.sampleEndIndex/2+t);this.sampleData=new Float32Array(0);try{let n=xt.decode(o.buffer);this.sampleData=n.data[0],this.sampleData===void 0&&Z(`Error decoding sample ${this.sampleName}: Vorbis decode returned undefined.`)}catch(n){Z(`Error decoding sample ${this.sampleName}: ${n}`),this.sampleData=new Float32Array(this.sampleLoopEndIndex+1)}}getAudioData(){return this.isSampleLoaded?this.sampleData:this.sampleLength<1?(Z(`Invalid sample ${this.sampleName}! Invalid length: ${this.sampleLength}`),new Float32Array(1)):this.isCompressed?(this.decodeVorbis(),this.isSampleLoaded=!0,this.sampleData):this.isDataRaw?this.loadUncompressedData():this.getUncompressedReadyData()}loadUncompressedData(){if(this.isCompressed)return Z("Trying to load a compressed sample via loadUncompressedData()... aborting!"),new Float32Array(0);let e=new Float32Array(this.sampleLength/2),t=this.sampleDataArray.currentIndex,o=new Int16Array(this.sampleDataArray.slice(t+this.sampleStartIndex,t+this.sampleEndIndex).buffer);for(let n=0;n<o.length;n++)e[n]=o[n]/32768;return this.sampleData=e,this.isSampleLoaded=!0,e}getUncompressedReadyData(){let e=this.sampleDataArray.slice(this.sampleStartIndex/2,this.sampleEndIndex/2);return this.sampleData=e,this.isSampleLoaded=!0,e}};function Pr(i,e,t=!0){let o=[],n=0;for(;i.chunkData.length>i.chunkData.currentIndex;){let s=Ka(n,i.chunkData,e,t);o.push(s),n++}return o.length>1&&o.pop(),o}function Ka(i,e,t,o){let n=ae(e,20),s=T(e,4)*2,r=T(e,4)*2,a=T(e,4),A=T(e,4),d=T(e,4),u=e[e.currentIndex++];u===255&&(u=60);let l=Xn(e[e.currentIndex++]),g=T(e,2),h=T(e,2);return new Wi(n,s,r,a,A,d,u,l,g,h,t,i,o)}var Zi=class extends q{constructor(e){super();let t=e.currentIndex;this.generatorType=e[t+1]<<8|e[t],this.generatorValue=Ct(e[t+2],e[t+3]),e.currentIndex+=4}};function ji(i){let e=[];for(;i.chunkData.length>i.chunkData.currentIndex;)e.push(new Zi(i.chunkData));return e.length>1&&e.pop(),e}var Xi=class extends kt{constructor(e){super(),this.instrumentName=ae(e.chunkData,20).trim(),this.instrumentZoneIndex=T(e.chunkData,2),this.instrumentZonesAmount=0}getInstrumentZones(e,t){this.instrumentZonesAmount=e;for(let o=this.instrumentZoneIndex;o<this.instrumentZonesAmount+this.instrumentZoneIndex;o++)this.instrumentZones.push(t[o])}};function Or(i,e){let t=[];for(;i.chunkData.length>i.chunkData.currentIndex;){let o=new Xi(i);if(t.length>0){let n=o.instrumentZoneIndex-t[t.length-1].instrumentZoneIndex;t[t.length-1].getInstrumentZones(n,e)}t.push(o)}return t.length>1&&t.pop(),t}var $i=class extends Te{constructor(e){super(),this.generatorZoneStartIndex=T(e,2),this.modulatorZoneStartIndex=T(e,2),this.modulatorZoneSize=0,this.generatorZoneSize=0,this.isGlobal=!0}setZoneSize(e,t){this.modulatorZoneSize=e,this.generatorZoneSize=t}getGenerators(e){for(let t=this.generatorZoneStartIndex;t<this.generatorZoneStartIndex+this.generatorZoneSize;t++)this.generators.push(e[t])}getModulators(e){for(let t=this.modulatorZoneStartIndex;t<this.modulatorZoneStartIndex+this.modulatorZoneSize;t++)this.modulators.push(e[t])}getSample(e){let t=this.generators.find(o=>o.generatorType===I.sampleID);t&&(this.sample=e[t.generatorValue],this.isGlobal=!1,this.sample.useCount++)}getKeyRange(){let e=this.generators.find(t=>t.generatorType===I.keyRange);e&&(this.keyRange.min=e.generatorValue&127,this.keyRange.max=e.generatorValue>>8&127)}getVelRange(){let e=this.generators.find(t=>t.generatorType===I.velRange);e&&(this.velRange.min=e.generatorValue&127,this.velRange.max=e.generatorValue>>8&127)}};function Yr(i,e,t,o){let n=[];for(;i.chunkData.length>i.chunkData.currentIndex;){let s=new $i(i.chunkData);if(n.length>0){let r=s.modulatorZoneStartIndex-n[n.length-1].modulatorZoneStartIndex,a=s.generatorZoneStartIndex-n[n.length-1].generatorZoneStartIndex;n[n.length-1].setZoneSize(r,a),n[n.length-1].getGenerators(e),n[n.length-1].getModulators(t),n[n.length-1].getSample(o),n[n.length-1].getKeyRange(),n[n.length-1].getVelRange()}n.push(s)}return n.length>1&&n.pop(),n}var en=class extends wt{constructor(e){super(),this.generatorZoneStartIndex=T(e,2),this.modulatorZoneStartIndex=T(e,2),this.modulatorZoneSize=0,this.generatorZoneSize=0,this.isGlobal=!0}setZoneSize(e,t){this.modulatorZoneSize=e,this.generatorZoneSize=t}getGenerators(e){for(let t=this.generatorZoneStartIndex;t<this.generatorZoneStartIndex+this.generatorZoneSize;t++)this.generators.push(e[t])}getModulators(e){for(let t=this.modulatorZoneStartIndex;t<this.modulatorZoneStartIndex+this.modulatorZoneSize;t++)this.modulators.push(e[t])}getInstrument(e){let t=this.generators.find(o=>o.generatorType===I.instrument);t&&(this.instrument=e[t.generatorValue],this.instrument.addUseCount(),this.isGlobal=!1)}getKeyRange(){let e=this.generators.find(t=>t.generatorType===I.keyRange);e&&(this.keyRange.min=e.generatorValue&127,this.keyRange.max=e.generatorValue>>8&127)}getVelRange(){let e=this.generators.find(t=>t.generatorType===I.velRange);e&&(this.velRange.min=e.generatorValue&127,this.velRange.max=e.generatorValue>>8&127)}};function Jr(i,e,t,o){let n=[];for(;i.chunkData.length>i.chunkData.currentIndex;){let s=new en(i.chunkData);if(n.length>0){let r=s.modulatorZoneStartIndex-n[n.length-1].modulatorZoneStartIndex,a=s.generatorZoneStartIndex-n[n.length-1].generatorZoneStartIndex;n[n.length-1].setZoneSize(r,a),n[n.length-1].getGenerators(e),n[n.length-1].getModulators(t),n[n.length-1].getInstrument(o),n[n.length-1].getKeyRange(),n[n.length-1].getVelRange()}n.push(s)}return n.length>1&&n.pop(),n}var tn=class extends bt{constructor(e,t){super(t),this.presetName=ae(e.chunkData,20).trim().replace(/\d{3}:\d{3}/,""),this.program=T(e.chunkData,2),this.bank=T(e.chunkData,2),this.presetZoneStartIndex=T(e.chunkData,2),this.library=T(e.chunkData,4),this.genre=T(e.chunkData,4),this.morphology=T(e.chunkData,4),this.presetZonesAmount=0}getPresetZones(e,t){this.presetZonesAmount=e;for(let o=this.presetZoneStartIndex;o<this.presetZonesAmount+this.presetZoneStartIndex;o++)this.presetZones.push(t[o])}};function zr(i,e,t){let o=[];for(;i.chunkData.length>i.chunkData.currentIndex;){let n=new tn(i,t);if(o.length>0){let s=n.presetZoneStartIndex-o[o.length-1].presetZoneStartIndex;o[o.length-1].getPresetZones(s,e)}o.push(n)}return o.length>1&&o.pop(),o}var on=class extends X{constructor(e){super({srcEnum:T(e,2),dest:T(e,2),amt:Ct(e[e.currentIndex++],e[e.currentIndex++]),secSrcEnum:T(e,2),transform:T(e,2)})}};function Ei(i){let e=[];for(;i.chunkData.length>i.chunkData.currentIndex;)e.push(new on(i.chunkData));return e}var Bi=class extends vt{constructor(e,t=!0){super(),t&&console.warn("Using the constructor directly is deprecated. Use loadSoundFont instead."),this.dataArray=new L(e),Re("%cParsing SoundFont...",B.info),this.dataArray||(j(),this.parsingError("No data provided!"));let o=Ae(this.dataArray,!1);this.verifyHeader(o,"riff");let n=ae(this.dataArray,4).toLowerCase();if(n!=="sfbk"&&n!=="sfpk")throw j(),new SyntaxError(`Invalid soundFont! Expected "sfbk" or "sfpk" got "${n}"`);let s=n==="sfpk",r=Ae(this.dataArray);for(this.verifyHeader(r,"list"),ae(r.chunkData,4);r.chunkData.length>r.chunkData.currentIndex;){let K=Ae(r.chunkData),U;switch(K.header.toLowerCase()){case"ifil":case"iver":U=`${T(K.chunkData,2)}.${T(K.chunkData,2)}`,this.soundFontInfo[K.header]=U;break;case"icmt":U=ae(K.chunkData,K.chunkData.length,void 0,!1),this.soundFontInfo[K.header]=U;break;case"dmod":let J=Ei(K);J.pop(),U=`Modulators: ${J.length}`;let ee=this.defaultModulators;this.defaultModulators=J,this.defaultModulators.push(...ee.filter(N=>!this.defaultModulators.find(H=>X.isIdentical(N,H)))),this.soundFontInfo[K.header]=K.chunkData;break;default:U=ae(K.chunkData,K.chunkData.length),this.soundFontInfo[K.header]=U}x(`%c"${K.header}": %c"${U}"`,B.info,B.recognized)}let a=Ae(this.dataArray,!1);this.verifyHeader(a,"list"),this.verifyText(ae(this.dataArray,4),"sdta"),x("%cVerifying smpl chunk...",B.warn);let A=Ae(this.dataArray,!1);this.verifyHeader(A,"smpl");let d;if(s){x("%cSF2Pack detected, attempting to decode the smpl chunk...",B.info);try{d=xt.decode(this.dataArray.buffer.slice(this.dataArray.currentIndex,this.dataArray.currentIndex+a.size-12)).data[0]}catch(K){throw j(),new Error(`SF2Pack Ogg Vorbis decode error: ${K}`)}x(`%cDecoded the smpl chunk! Length: %c${d.length}`,B.info,B.value)}else d=this.dataArray,this.sampleDataStartIndex=this.dataArray.currentIndex;x(`%cSkipping sample chunk, length: %c${a.size-12}`,B.info,B.value),this.dataArray.currentIndex+=a.size-12,x("%cLoading preset data chunk...",B.warn);let u=Ae(this.dataArray);this.verifyHeader(u,"list"),ae(u.chunkData,4);let l=Ae(u.chunkData);this.verifyHeader(l,"phdr");let g=Ae(u.chunkData);this.verifyHeader(g,"pbag");let h=Ae(u.chunkData);this.verifyHeader(h,"pmod");let C=Ae(u.chunkData);this.verifyHeader(C,"pgen");let p=Ae(u.chunkData);this.verifyHeader(p,"inst");let f=Ae(u.chunkData);this.verifyHeader(f,"ibag");let S=Ae(u.chunkData);this.verifyHeader(S,"imod");let M=Ae(u.chunkData);this.verifyHeader(M,"igen");let y=Ae(u.chunkData);this.verifyHeader(y,"shdr"),this.dataArray.currentIndex=this.sampleDataStartIndex,this.samples.push(...Pr(y,d,!s));let k=ji(M),w=Ei(S),c=Yr(f,k,w,this.samples);this.instruments=Or(p,c);let b=ji(C),D=Ei(h),Y=Jr(g,b,D,this.instruments);this.presets.push(...zr(l,Y,this.defaultModulators)),this.presets.sort((K,U)=>K.program-U.program+(K.bank-U.bank)),x(`%cParsing finished! %c"${this.soundFontInfo.INAM}"%c has %c${this.presets.length} %cpresets,
        %c${this.instruments.length}%c instruments and %c${this.samples.length}%c samples.`,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info,B.recognized,B.info),j(),s&&delete this.dataArray}verifyHeader(e,t){e.header.toLowerCase()!==t.toLowerCase()&&(j(),this.parsingError(`Invalid chunk header! Expected "${t.toLowerCase()}" got "${e.header.toLowerCase()}"`))}verifyText(e,t){e.toLowerCase()!==t.toLowerCase()&&(j(),this.parsingError(`Invalid FourCC: Expected "${t.toLowerCase()}" got "${e.toLowerCase()}"\``))}destroySoundfont(){super.destroySoundfont(),delete this.dataArray}};function mt(i){let e=i.slice(8,12),t=new L(e);return ae(t,4,void 0,!1).toLowerCase()==="dls "?new ut(i):new Bi(i,!1)}async function Vr(){let i="locale.exportAudio.formats.formats.soundfont.options.";re(this.localeManager.getLocaleString(i+"title"),[{type:"toggle",translatePathTitle:i+"trim",attributes:{"trim-toggle":"1",checked:"checked"}},{type:"toggle",translatePathTitle:i+"compress",attributes:{"compress-toggle":"1"}},{type:"range",translatePathTitle:i+"quality",attributes:{min:"0",max:"10",value:"5"}},{type:"button",textContent:this.localeManager.getLocaleString(i+"confirm"),onClick:async e=>{let t=e.div.querySelector("input[trim-toggle='1']").checked,o=e.div.querySelector("input[compress-toggle='1']").checked,n=parseInt(e.div.querySelector("input[type='range']").value)/10;ie(e.id),Re("%cExporting minified soundfont...",B.info);let s=await this.seq.getMIDI(),r=mt(s.embeddedSoundFont||this.soundFont);Bt(s,await this.synth.getSynthesizerSnapshot()),t&&$t(r,s);let a=r.write({compress:o,compressionQuality:n,compressionFunction:await this.getVorbisEncodeFunction()}),A=new Blob([a.buffer],{type:"audio/soundfont"}),d=r.soundFontInfo.ifil.split(".")[0]==="3"?"sf3":"sf2";this.saveBlob(A,`${r.soundFontInfo.INAM||"unnamed"}.${d}`),j()}}],99999999,!0,this.localeManager)}async function Kr(){let i="locale.exportAudio.formats.";re(this.localeManager.getLocaleString(i+"title"),[{type:"button",translatePathTitle:i+"formats.wav.button",onClick:e=>{ie(e.id),this._exportAudioData()}},{type:"button",translatePathTitle:i+"formats.midi.button",onClick:e=>{ie(e.id),this.exportMidi()}},{type:"button",translatePathTitle:i+"formats.soundfont.button",onClick:e=>{ie(e.id);try{this._exportSoundfont()}catch{re("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}},{type:"button",translatePathTitle:i+"formats.dls.button",onClick:e=>{ie(e.id);try{this._exportDLS()}catch{re("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}},{type:"button",translatePathTitle:i+"formats.rmidi.button",onClick:e=>{ie(e.id);try{this._exportRMIDI()}catch{re("Warning",[{type:"text",textContent:this.localeManager.getLocaleString("locale.warnings.outOfMemory")}])}}}],999999,!0,this.localeManager,{display:"flex",flexWrap:"wrap",justifyContent:"center"})}async function Wr(){let i=(l,g,h)=>this.seq.midiData.RMIDInfo?.[l]===void 0?g:h.decode(this.seq.midiData.RMIDInfo?.[l]).replace(/\0$/,""),e=i("IENC","ascii",new TextDecoder),t=new TextDecoder(e),o=i("IPRD","",t),n=i("IART","",t),s=i("IGNR","",t),r=i("ICMT","Created using SpessaSynth: https://spessasus.github.io/SpessaSynth",t),a="locale.exportAudio.formats.formats.rmidi.options.",A="locale.exportAudio.formats.metadata.",u=re(this.localeManager.getLocaleString(a+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(a+"description"),attributes:{style:"max-width: 30ch; font-style: italic"}},{type:"toggle",translatePathTitle:a+"compress",attributes:{"compress-toggle":"1",checked:"true"}},{type:"range",translatePathTitle:a+"quality",attributes:{min:"0",max:"10",value:"5"}},{type:"input",translatePathTitle:A+"songTitle",attributes:{name:"song_title",type:"text",value:this.seqUI.currentSongTitle}},{type:"input",translatePathTitle:A+"album",attributes:{value:o,name:"album",type:"text"}},{type:"input",translatePathTitle:A+"artist",attributes:{value:n,name:"artist",type:"text"}},{type:"input",translatePathTitle:A+"genre",attributes:{value:s,name:"genre",type:"text"}},{type:"input",translatePathTitle:A+"comment",attributes:{value:r,name:"comment",type:"text"}},{type:"file",translatePathTitle:A+"albumCover",attributes:{value:this.seq.midiData.RMIDInfo?.IPIC!==void 0?this.seq.midiData.RMIDInfo.IPIC:"",name:"cover",accept:"image/*"}},{type:"input",translatePathTitle:a+"bankOffset",attributes:{value:this.seq.midiData.bankOffset,name:"bank_offset",type:"number"}},{type:"toggle",translatePathTitle:a+"adjust",attributes:{name:"adjust",checked:"checked"}},{type:"button",textContent:this.localeManager.getLocaleString(a+"confirm"),onClick:async l=>{let g=l.div.querySelector("input[compress-toggle='1']").checked,h=parseInt(l.div.querySelector("input[type='range']").value)/10,C=l.div.querySelector("input[name='album']").value,p=l.div.querySelector("input[name='artist']").value,f=l.div.querySelector("input[name='song_title']").value,S=l.div.querySelector("input[name='comment']").value,M=l.div.querySelector("input[name='genre']").value,y=parseInt(l.div.querySelector("input[name='bank_offset']").value),k=l.div.querySelector("input[name='adjust']").checked,w=l.div.querySelector("input[type='file']")?.files[0];ie(l.id),fe("%cExporting RMIDI...",B.info);let c="locale.exportAudio.formats.formats.rmidi.progress.",b=re(this.localeManager.getLocaleString(c+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(c+"loading"),attributes:{class:"export_rmidi_message"}}],9999999,!1);await new Promise(H=>setTimeout(H,500));let D=b.div.getElementsByClassName("export_rmidi_message")[0],Y=await this.seq.getMIDI(),K=mt(Y.embeddedSoundFont||this.soundFont);D.textContent=this.localeManager.getLocaleString(c+"modifyingMIDI"),await new Promise(H=>setTimeout(H,75));try{Bt(Y,await this.synth.getSynthesizerSnapshot())}catch(H){Z("Failed to modify MIDI:",H)}D.textContent=this.localeManager.getLocaleString(c+"modifyingSoundfont"),await new Promise(H=>setTimeout(H,75)),$t(K,Y);let U=K.write({compress:g,compressionQuality:h,compressionFunction:await this.getVorbisEncodeFunction()});D.textContent=this.localeManager.getLocaleString(c+"saving"),await new Promise(H=>setTimeout(H,75));let J;w?.type.split("/")[0]==="image"?J=await w.arrayBuffer():Y.RMIDInfo?.IPIC!==void 0&&(J=Y.RMIDInfo.IPIC.buffer);let ee=Ko(U,Y,K,y,this.seqUI.encoding,{name:f,comment:S,engineer:K.soundFontInfo.IENG,picture:J,album:C.length>0?C:void 0,artist:p.length>0?p:void 0,genre:M.length>0?M:void 0,midiEncoding:this.seqUI.encoding},k),N=new Blob([ee.buffer],{type:"audio/rmid"});this.saveBlob(N,`${f||"unnamed_song"}.rmi`),D.textContent=this.localeManager.getLocaleString(c+"done"),ie(b.id),j()}}],9999999,!0,this.localeManager).div.querySelector("input[type='file']");u.oninput=()=>{u.files[0]&&(u.parentElement.firstChild.textContent=u.files[0].name)}}var Zr="synthetizer/worklet_processor.min.js";var fi=class{constructor(e,t){let o=document.getElementsByClassName("drop_prompt")[0];document.body.addEventListener("dragover",n=>{n.preventDefault(),o.classList.remove("hidden")}),document.body.addEventListener("dragend",()=>{o.classList.add("hidden")}),document.body.addEventListener("drop",async n=>{if(n.preventDefault(),o.classList.add("hidden"),!n.dataTransfer.files[0])return;let s=[];for(let r of n.dataTransfer.files){let a=r.name,A=await r.arrayBuffer(),d=A.slice(0,4),u=new TextDecoder;if(u.decode(d)==="RIFF"){let l=A.slice(8,12);if(u.decode(l)==="RMID"){s.push({binary:A,altName:a});continue}t(A);continue}s.push({binary:A,altName:a})}e(s)})}};async function jr(){let i="locale.exportAudio.formats.formats.dls.warning.";re(this.localeManager.getLocaleString(i+"title"),[{type:"text",textContent:this.localeManager.getLocaleString(i+"message"),attributes:{style:"font-weight: bold"}},{type:"toggle",translatePathTitle:"locale.exportAudio.formats.formats.soundfont.options.trim",attributes:{"trim-toggle":"1"}},{type:"button",textContent:this.localeManager.getLocaleString(i+"details"),onClick:()=>{window.open("https://github.com/spessasus/SpessaSynth/wiki/DLS-Conversion-Problem")}},{type:"button",textContent:this.localeManager.getLocaleString(i+"confirm"),onClick:async e=>{let t=e.div.querySelector("input[trim-toggle='1']").checked;ie(e.id),Re("%cExporting DLS...",B.info);let o=await this.seq.getMIDI(),n=mt(o.embeddedSoundFont||this.soundFont);Bt(o,await this.synth.getSynthesizerSnapshot()),t&&$t(n,o);try{let s=n.writeDLS(),r=new Blob([s.buffer],{type:"audio/dls"});this.saveBlob(r,`${n.soundFontInfo.INAM||"unnamed"}.dls`)}catch(s){Z("Failed to export DLS: ",s),re(this.localeManager.getLocaleString("locale.error"),[{type:"text",textContent:s,attributes:{style:"font-weight: bold; color: red"}}])}j()}}],99999999,!0,this.localeManager)}document.body.classList.add("load");var Wa=!1,it=class{channelColors=["rgba(255, 99, 71, 1)","rgba(255, 165, 0, 1)","rgba(255, 215, 0, 1)","rgba(50, 205, 50, 1)","rgba(60, 179, 113, 1)","rgba(0, 128, 0, 1)","rgba(0, 191, 255, 1)","rgba(65, 105, 225, 1)","rgba(138, 43, 226, 1)","rgba(50, 120, 125, 1)","rgba(255, 0, 255, 1)","rgba(255, 20, 147, 1)","rgba(218, 112, 214, 1)","rgba(240, 128, 128, 1)","rgba(255, 192, 203, 1)","rgba(255, 255, 0, 1)"];sfError;compressionFunction=void 0;constructor(e,t,o,n=Wa){this.localeManager=o,this.context=e,this.enableDebug=n,this.isExporting=!1;let s;this.ready=new Promise(r=>s=r),this.initializeContext(e,t).then(()=>{s()})}async getVorbisEncodeFunction(){return this.compressionFunction!==void 0?this.compressionFunction:(this.compressionFunction=(await import("../externals/libvorbis/encode_vorbis.js")).encodeVorbis,this.compressionFunction)}saveBlob(e,t){let o=URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download=t,n.click(),x(n)}async initializeContext(e,t){if(!e.audioWorklet)throw alert("Audio worklet is not supported on your browser. Sorry!"),new Error("Audio worklet is not supported");for(let g of document.querySelectorAll("*[translate-path]"))this.localeManager.bindObjectProperty(g,"innerText",g.getAttribute("translate-path"));for(let g of document.querySelectorAll("*[translate-path-title]"))this.localeManager.bindObjectProperty(g,"innerText",g.getAttribute("translate-path-title")+".title"),this.localeManager.bindObjectProperty(g,"title",g.getAttribute("translate-path-title")+".description");this.soundFont=t;let n=this.enableDebug?"synthetizer/worklet_system/worklet_processor.js":Zr;this.enableDebug&&console.warn("DEBUG ENABLED! DEBUGGING ENABLED!!");let s=window.isLocalEdition?"../../../spessasynth_lib/":"../../spessasynth_lib/";this.workletPath=s+n,e.audioWorklet&&await e.audioWorklet.addModule(new URL(this.workletPath,import.meta.url));let r=new URL(s+"synthetizer/audio_effects/impulse_response_2.flac",import.meta.url),A=await(await fetch(r)).arrayBuffer();this.impulseResponseRaw=A,this.impulseResponse=await e.decodeAudioData(A.slice(0,A.byteLength)),this.audioDelay=new DelayNode(e,{delayTime:0}),this.audioDelay.connect(e.destination),this.synth=new Wt(this.audioDelay,this.soundFont,void 0,void 0,{chorusEnabled:!0,chorusConfig:void 0,reverbImpulseResponse:this.impulseResponse,reverbEnabled:!0,audioNodeCreators:void 0}),this.synth.eventHandler.addEvent("soundfonterror","manager-sf-error",g=>{this.sfError&&this.sfError(g.message)}),await this.synth.isReady,this.midHandler=new oi,new ii(this.synth),this.keyboard=new go(this.channelColors,this.synth);let d=document.getElementById("note_canvas");d.width=window.innerWidth*window.devicePixelRatio,d.height=window.innerHeight*window.devicePixelRatio,this.renderer=new He(this.channelColors,this.synth,d,this.localeManager,window.SPESSASYNTH_VERSION),this.renderer.render(!0);let u=!1,l=()=>{if(d.width=d.clientWidth*window.devicePixelRatio,d.height=d.clientHeight*window.devicePixelRatio,this.renderer.computeColors(),_e){if(window.innerWidth/window.innerHeight>1){if(!u){let g=document.getElementById("title_wrapper"),h=document.getElementById("settings_div");u=!0,g.parentElement.insertBefore(h,g)}}else if(u){let g=document.getElementById("title_wrapper"),h=document.getElementById("settings_div");u=!1,g.parentElement.insertBefore(g,h)}}this.renderer.render(!1,!0)};l(),window.addEventListener("resize",l.bind(this)),window.addEventListener("orientationchange",l.bind(this)),_e&&(this.renderer.keyRange={min:48,max:72},this.keyboard.setKeyRange({min:48,max:72},!1)),this.synthUI=new ot(this.channelColors,document.getElementById("synthetizer_controls"),this.localeManager),this.synthUI.connectSynth(this.synth),this.synthUI.connectKeyboard(this.keyboard),this.playerUI=new ai(document.getElementById("player_info"),this.localeManager),this.seqUI=new ht(document.getElementById("sequencer_controls"),this.localeManager,this.playerUI,this.renderer),this.settingsUI=new Ge(document.getElementById("settings_div"),this.synthUI,this.seqUI,this.renderer,this.keyboard,this.midHandler,this.playerUI,this.localeManager,this.audioDelay),new fi(async g=>{if(g.length===0)return;await this.context.resume(),this.play(g);let h=g[0].altName;h>20&&(h=h.substring(0,21)+"..."),document.getElementById("file_upload").textContent=h;let C=document.getElementById("export_button");C.style.display="flex",C.onclick=this.exportSong.bind(this),window.isLocalEdition||(document.getElementById("demo_song").style.display="none")},g=>{this.reloadSf(g)}),document.addEventListener("keydown",g=>{if(!g.ctrlKey)switch(g.key.toLowerCase()){case Ee.cinematicMode:this.seq&&this.seq.pause();let h=window.prompt(`Cinematic mode activated!
 Paste the link to the image for canvas (leave blank to disable)`,"");if(this.seq&&this.seq.play(),h===null)return;d.style.background=`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), center center / cover url("${h}")`,document.getElementsByClassName("top_part")[0].style.display="none",document.getElementsByClassName("bottom_part")[0].style.display="none",document.body.requestFullscreen().then();break;case Ee.videoMode:this.seq&&this.seq.pause();let C=window.prompt(`Video mode!
 Paste the link to the video source (leave blank to disable)
Note: the video will be available in console as 'video'`,"");if(C===null)return;let p=document.createElement("video");p.src=C,p.classList.add("secret_video"),d.parentElement.appendChild(p),p.play(),window.video=p,this.seq&&(p.currentTime=parseFloat(window.prompt("Video offset to sync to midi, in seconds.","0")),p.play(),this.seq.currentTime=0),document.addEventListener("keydown",f=>{f.key===" "&&(p.paused?p.play():p.pause())});break;case Ee.sustainPedal:this.renderer.showHoldPedal=!0,this.renderer.render(!1),this.keyboard.setHoldPedal(!0)}}),document.addEventListener("keyup",g=>{if(!g.ctrlKey)switch(g.key.toLowerCase()){case Ee.sustainPedal:this.renderer.showHoldPedal=!1,this.renderer.render(!1),this.keyboard.setHoldPedal(!1);break;default:break}}),this.renderer.render(!1,!0)}doDLSCheck(){if(window.isLocalEdition!==!0){let e=this.soundFont.slice(8,12);ae(new L(e),4).toLowerCase()==="dls "&&re(this.localeManager.getLocaleString("locale.convertDls.title"),[{type:"text",textContent:this.localeManager.getLocaleString("locale.convertDls.message")},{type:"button",textContent:this.localeManager.getLocaleString("locale.yes"),onClick:o=>{ie(o.id),this.downloadDesfont()}},{type:"button",textContent:this.localeManager.getLocaleString("locale.no"),onClick:o=>{ie(o.id)}}],99999999)}}async reloadSf(e){await this.synth.soundfontManager.reloadManager(e),this.soundFont=e,setTimeout(()=>{this.doDLSCheck()},3e3)}play(e){if(this.synth){if(this.seq){this.seq.loadNewSongList(e),this.seq.play(!0);return}this.seq=new Wo(e,this.synth),this.seq.onError=t=>{document.getElementById("title").textContent=t},this.seqUI.connectSequencer(this.seq),this.playerUI.connectSequencer(this.seq),this.renderer.connectSequencer(this.seq),this.settingsUI.addSequencer(this.seq),this.seq.play(!0)}}async downloadDLSRMI(){let e=await this.seq.getMIDI(),t=mt(this.soundFont),o=Ko(t.writeDLS(),e,t),n=new Blob([o.buffer],{type:"audio/rmid"});this.saveBlob(n,`${e.midiName}.rmi`)}downloadDesfont(){let e=mt(this.soundFont),t=e.write(),o=new Blob([t.buffer],{type:"audio/soundfont"});this.saveBlob(o,`${e.soundFontInfo.INAM}.sf2`)}};it.prototype.exportSong=Kr;it.prototype._exportAudioData=sr;it.prototype._doExportAudioData=nr;it.prototype.exportMidi=Ar;it.prototype._exportSoundfont=Vr;it.prototype._exportDLS=jr;it.prototype._exportRMIDI=Wr;var Za=44100,ja="GeneralUserGS.sf3",Qi=document.getElementById("title"),Mt=document.getElementById("midi_file_input"),Xa=document.getElementById("sf_file_input"),Xr=document.getElementById("demo_song"),nn=document.getElementById("export_button"),Yt=document.getElementsByClassName("loading")[0],Oe=document.getElementById("loading_message"),$a=await(await fetch("package.json")).json();window.SPESSASYNTH_VERSION=$a.version;var el="spessasynth-db",zt="soundFontStore";function rn(i){let e=indexedDB.open(el,1);e.onsuccess=()=>{let t=e.result;i(t)},e.onupgradeneeded=t=>{t.target.result.createObjectStore(zt,{keyPath:"id"})}}async function tl(){return await new Promise(i=>{rn(e=>{let n=e.transaction([zt],"readonly").objectStore(zt).get("buffer");n.onerror=s=>{console.error("Database error"),console.error(s),i(void 0)},n.onsuccess=async()=>{let s=n.result;if(!s){i(void 0);return}i(s.data)}})})}function Jt(i,e=!0){let t=Yt.getElementsByClassName("loading_icon")[0];t.innerHTML=i,t.style.animation=e?"none":""}async function $r(i){rn(e=>{let o=e.transaction([zt],"readwrite").objectStore(zt);try{let n=o.put({id:"buffer",data:i});n.onsuccess=()=>{x("SoundFont stored successfully")},n.onerror=s=>{console.error("Error saving soundfont",s)}}catch(n){Z("Failed saving soundfont:",n)}})}async function ol(i){let e=new li(i);try{let n=window.AudioContext||window.webkitAudioContext;window.audioContextMain=new n({sampleRate:Za})}catch(n){throw Jt(fo(256)),Oe.textContent=e.getLocaleString("locale.synthInit.noWebAudio"),n}Oe.textContent=e.getLocaleString("locale.synthInit.loadingSoundfont");let t=await tl(),o=!0;if(t===void 0){Z("Failed to load from db, fetching online instead"),o=!1;let n=document.getElementById("progress_bar"),s=e.getLocaleString("locale.synthInit.loadingBundledSoundfont");Oe.textContent=s,t=await il(`soundfonts/${ja}`,r=>{Oe.textContent=`${s} ${r}%`}),n.style.width="0"}else x("Loaded the soundfont from the database succesfully");window.soundFontParser=t,o||(Oe.textContent=e.getLocaleString("locale.synthInit.savingSoundfont"),await $r(t)),window.audioContextMain.state!=="running"&&document.addEventListener("mousedown",()=>{window.audioContextMain.state!=="running"&&window.audioContextMain.resume().then()}),Oe.textContent=e.getLocaleString("locale.synthInit.startingSynthesizer"),window.manager=new it(audioContextMain,soundFontParser,e),window.manager.sfError=n=>{Jt(fo(256)),o?(Z("Invalid soundfont in the database. Resetting."),rn(s=>{let A=s.transaction([zt],"readwrite").objectStore(zt).delete("buffer");A.onsuccess=()=>{location.reload()}})):Qi.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${n}</pre>`,Oe.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${n}</pre>`},await manager.ready,Mt.files[0]?await sn(Mt.files):(Mt.onclick=void 0,Mt.onchange=()=>{Mt.files[0]&&sn(Mt.files).then()}),Jt(Pi(256)),Oe.textContent=e.getLocaleString("locale.synthInit.done")}async function il(i,e){let t=await fetch(i);if(!t.ok)throw Qi.innerText="Error downloading soundfont!",t;let o=t.headers.get("content-length"),n=await(await t.body).getReader(),s=!1,r=new Uint8Array(parseInt(o)),a=0;do{let A=await n.read();A.value&&(r.set(A.value,a),a+=A.value.length),s=A.done;let d=Math.round(a/o*100);e(d)}while(!s);return r.buffer}async function sn(i){Xr.style.display="none";let e;i[0].name.length>20?e=i[0].name.substring(0,21)+"...":e=i[0].name,i.length>1&&(e+=` and ${i.length-1} others`),document.getElementById("file_upload").innerText=e,document.getElementById("file_upload").title=i[0].name;let t=[];for(let o of i)t.push({binary:await o.arrayBuffer(),altName:o.name});manager.synth.setLogLevel(!1,!1,!1,!1),manager.seq?manager.seq.loadNewSongList(t):manager.play(t),nn.style.display="flex",nn.onclick=window.manager.exportSong.bind(window.manager)}function nl(i){localStorage.setItem("spessasynth-settings",JSON.stringify(i)),x("saved as",i)}window.saveSettings=nl;var ko=JSON.parse(localStorage.getItem("spessasynth-settings"));ko!==null&&(window.savedSettings=new Promise(i=>{i(ko)}));var An;ko&&ko.interface&&ko.interface.language?An=(await savedSettings).interface.language||navigator.language.split("-")[0].toLowerCase():An=navigator.language.split("-")[0].toLowerCase();Mt.value="";Mt.focus();nn.style.display="none";document.getElementById("sf_upload").style.display="none";document.getElementById("file_upload").style.display="none";async function sl(i){Qi.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.genericLoading");let e=await fetch("https://spessasus.github.io/spessasynth-demo-songs/demo_songs/"+i);e.name=i,await sn([e])}ol(An).then(()=>{document.getElementById("sf_upload").style.display="flex",document.getElementById("file_upload").style.display="flex",Yt.classList.add("done"),document.documentElement.classList.add("no_scroll"),document.body.classList.add("no_scroll"),setTimeout(()=>{Yt.style.display="none",document.body.classList.remove("no_scroll"),document.documentElement.classList.remove("no_scroll"),_e&&window.chrome&&re(window.manager.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:window.manager.localeManager.getLocaleString("locale.warnings.chromeMobile")}],7)},1e3),Xa.onchange=i=>{if(!i.target.files[0])return;let e=i.target.files[0];window.manager.seq&&window.manager.seq.pause(),document.getElementById("sf_upload").firstElementChild.innerText=e.name,Yt.style.display="",setTimeout(async()=>{Yt.classList.remove("done"),Jt(cs(256),!1),Oe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.loadingSoundfont");let t=performance.now()/1e3,o;try{o=await e.arrayBuffer(),window.soundFontParser=o}catch(s){throw Oe.textContent=window.manager.localeManager.getLocaleString("locale.warnings.outOfMemory"),Jt(fo(256)),re(manager.localeManager.getLocaleString("locale.warnings.warning"),[{type:"text",textContent:window.manager.localeManager.getLocaleString("locale.warnings.outOfMemory")}]),s}window.manager.sfError=s=>{Oe.innerHTML=`Error parsing soundfont: <pre style='font-family: monospace; font-weight: bold'>${s}</pre>`,Jt(fo(256)),console.error(s)},Oe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.startingSynthesizer"),await window.manager.reloadSf(o),window.manager.seq&&(window.manager.seq.currentTime-=.1),Oe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.savingSoundfont"),await $r(o);let n=performance.now()/1e3-t;await new Promise(s=>setTimeout(s,1e3-n)),Jt(Pi(256)),Oe.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.done"),Yt.classList.add("done"),document.documentElement.classList.add("no_scroll"),document.body.classList.add("no_scroll"),setTimeout(()=>{Yt.style.display="none",document.body.classList.remove("no_scroll"),document.documentElement.classList.remove("no_scroll")},1e3)},75)},Xr.onclick=async()=>{let i=[{type:"button",textContent:"Bundled SoundFont Credits",onClick:()=>{window.open("https://schristiancollins.com/generaluser.php")}}];Qi.textContent=window.manager.localeManager.getLocaleString("locale.synthInit.genericLoading");let e=await(await fetch("https://spessasus.github.io/spessasynth-demo-songs/demo_song_list.json")).text(),t=JSON.parse(e);for(let o of t)i.push({type:"button",textContent:o.name,onClick:n=>{ie(n.id),re(window.manager.localeManager.getLocaleString("locale.credits"),[{type:"text",textContent:o.credits.replace(`
`,`\r
\r
`),attributes:{style:"white-space: pre-line;"}},{type:"button",textContent:"Ok",onClick:s=>{ie(s.id)}}],999999,!0,void 0,void 0,async()=>{await sl(o.fileName)})}});re(window.manager.localeManager.getLocaleString("locale.demoSongButton"),i,999999,!0,void 0)}});
